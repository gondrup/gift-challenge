function tmgAdsInit(){try{tmgAdsEvent("tmggpt-init:start"),tmgAds.log=tmgAds.log||[],tmgAds.ads={},tmgAds.adslots={},tmgAds.errors=[],tmgAds.data={metatags:{},metrics:{},ads:{}},tmgAds.performance={},tmgAds.refreshTimers={},tmgAds.plugins={timeouts:[],gpt:{name:"gpt",active:!0,type:"js",networkid:6582,servername:"ad.doubleclick.net",async:!0,enableSingleRequest:!1,enableAsyncRendering:!0,collapseEmptyDivs:!0,setLocation:!1,vastOutputVersion:"xml_vast3",url:"https://www.googletagservices.com/tag/js/gpt.js",urltest:"https://www.googletagservices.com/tag/js/gpt.js",ooyalaCMSID:5694,geoapi:{precision:2e4,watching:!1,test:"string"},useppid:!0,useppid:!0,dopubsub:!0,domains:["all"],timeout:!1,timeoutFn:function(){return null},preload:function(){return null},callback:function(){return null},onerror:function(){return null}},blockdomain:["chase.telegraph.co.uk","cms1.aem-dev1.awspreprod.telegraph.co.uk","cms1.aem-dev2.awspreprod.telegraph.co.uk","cms1.aem-dev3.awspreprod.telegraph.co.uk","cms1.aem-dev4.awspreprod.telegraph.co.uk","cms1.aem-dev5.awspreprod.telegraph.co.uk","cms1.aem-dev6.awspreprod.telegraph.co.uk","cms1.aem-dev7.awspreprod.telegraph.co.uk","cms1.aem-dev8.awspreprod.telegraph.co.uk","cms1.aem-dev9.awspreprod.telegraph.co.uk","cms1.aem-dev10.awspreprod.telegraph.co.uk","cms1.aem-dev11.awspreprod.telegraph.co.uk","cms1.aem-dev12.awspreprod.telegraph.co.uk","cms1.aem-test1.awspreprod.telegraph.co.uk","cms1.aem-test2.awspreprod.telegraph.co.uk","cms1.aem-test3.awspreprod.telegraph.co.uk","cms1.aem-test4.awspreprod.telegraph.co.uk","cms1.aem-test5.awspreprod.telegraph.co.uk","cms1.aem-test6.awspreprod.telegraph.co.uk","cms1.aem-editorial1.awspreprod.telegraph.co.uk","cms1.aem-editorial2.awspreprod.telegraph.co.uk","cms1.aem-nitro1.awspreprod.telegraph.co.uk","cms1.aem-demo.awspreprod.telegraph.co.uk","cms1.aem-perf1.awspreprod.telegraph.co.uk","cms1.aem-perf2.awspreprod.telegraph.co.uk"],test:{active:!1,status:!1,async:!1,url:"//adtools.telegraph.co.uk/tools/delay/?delay=4&type=js"},refurl:{active:!0},sizemapping:{x:{size:[1368,768],ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60],[1,1],"fluid"],boa:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],bin:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],bbt:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],bbb:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],myb:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],gad:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],mpu:[[300,600],[300,250],[300,215],[300,189],[1,1],"fluid"],hpg:[[300,600],[300,250],[300,215],[300,189],[160,600],[120,600],[1,1],"fluid"],mob:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[1,1],"fluid"],dyn:[[640,360],[1,1],"fluid"],lmpu:[[300,250],[300,215],[300,189],[1,1],"fluid"],nat:[[1,1],"fluid"],yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"},l:{size:[1008,768],ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60],[1,1],"fluid"],boa:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],bin:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],bbt:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],bbb:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],gad:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],myb:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[1,1],"fluid"],mpu:[[300,600],[300,250],[300,215],[300,189],[1,1],"fluid"],hpg:[[300,600],[300,250],[300,215],[300,189],[160,600],[120,600],[1,1],"fluid"],mob:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[1,1],"fluid"],dyn:[[640,360],[1,1],"fluid"],lmpu:[[300,250],[300,215],[300,189],[1,1],"fluid"],nat:[[1,1],"fluid"],yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"},m:{size:[730,480],ban:[[728,90],[468,60],[1,1],"fluid"],bin:[[728,90],[468,60],[1,1],"fluid"],boa:[[728,90],[468,60],[1,1],"fluid"],bbt:[[728,90],[468,60],[1,1],"fluid"],bbb:[[728,90],[468,60],[1,1],"fluid"],gad:[[300,250],[300,215],[300,189],[1,1],"fluid"],myb:[[728,90],[468,60],[1,1],"fluid"],mpu:[[300,250],[300,215],[300,189],[1,1],"fluid"],hpg:[[300,250],[300,215],[300,189],[1,1],"fluid"],mob:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[1,1],"fluid"],dyn:[[640,360],[300,250],[300,215],[300,189],[320,50],[300,50],[1,1],"fluid"],lmpu:[[300,250],[300,215],[300,189],[1,1],"fluid"],nat:[[1,1],"fluid"],yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"},s:{size:[480,320],ban:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],bin:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],boa:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],bbt:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],bbb:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],myb:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],gad:[[300,250],[300,215],[300,189],[1,1],"fluid"],mpu:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],hpg:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],mob:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[468,60],[1,1],"fluid"],dyn:[[640,360],[300,250],[300,215],[300,189],[1,1],"fluid"],lmpu:[[300,250],[300,215],[300,189],[1,1],"fluid"],nat:[[1,1],"fluid"],yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"300x235"},xs:{size:[0,0],ban:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[1,1],"fluid"],bin:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[1,1],"fluid"],boa:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[1,1],"fluid"],bbt:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[1,1],"fluid"],bbb:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[1,1],"fluid"],gad:[[300,250],[300,215],[300,189],[1,1],"fluid"],myb:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[1,1],"fluid"],mpu:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[1,1],"fluid"],hpg:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[1,1],"fluid"],mob:[[300,250],[300,215],[300,189],[320,100],[320,50],[300,50],[1,1],"fluid"],dyn:[[640,360],[300,250],[300,215],[300,189],[320,50],[300,50],[1,1],"fluid"],lmpu:[[300,250],[300,215],[300,189],[1,1],"fluid"],nat:[[1,1],"fluid"],yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"300x235"},default:{size:[0,0],ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60],[1,1],"fluid"],bin:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60],[1,1],"fluid"],boa:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60],[1,1],"fluid"],bbt:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60],[1,1],"fluid"],bbb:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60],[1,1],"fluid"],gad:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60],[1,1],"fluid"],myb:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60],[1,1],"fluid"],mpu:[[300,600],[300,250],[300,215],[300,189],[1,1],"fluid"],hpg:[[300,600],[300,250],[300,215],[300,189],[160,600],[120,600],[1,1],"fluid"],mob:[[300,250],[320,100],[300,215],[300,189],[320,50],[300,50],[1,1],"fluid"],dyn:[[640,360],[300,250],[300,215],[300,189],[320,50],[300,50],[1,1],"fluid"],lmpu:[[300,250],[300,215],[300,189],[1,1],"fluid"],nat:[[1,1],"fluid"],yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"}},adiesticky:tmgAdsGetURLParam("adiesticky",window.location.search),adtest:tmgAdsGetURLParam("adtest",window.location.search),adteston:tmgAdsGetURLParam("adteston",window.location.search),adconsole:tmgAdsGetURLParam("adconsole",window.location.search),adixidoff:tmgAdsGetURLParam("adixidoff",window.location.search),adixidon:tmgAdsGetURLParam("adixidon",window.location.search),adkill:tmgAdsGetURLParam("adkill",window.location.search),adgptoff:tmgAdsGetURLParam("adgptoff",window.location.search),adviewability:tmgAdsGetURLParam("adviewability",window.location.search),advast4:tmgAdsGetURLParam("advast4",window.location.search),adscroll:tmgAdsGetURLParam("adscroll",window.location.search),adscrollon:tmgAdsGetURLParam("adscrollon",window.location.search),adscrolloff:tmgAdsGetURLParam("adscrolloff",window.location.search),adgrapeshoton:tmgAdsGetURLParam("adgrapeshoton",window.location.search),adgrapeshotoff:tmgAdsGetURLParam("adgrapeshotoff",window.location.search),adevidonon:tmgAdsGetURLParam("adevidonon",window.location.search),adevidonoff:tmgAdsGetURLParam("adevidonoff",window.location.search),adbeemrayon:tmgAdsGetURLParam("adbeemrayon",window.location.search),adbeemrayoff:tmgAdsGetURLParam("adbeemrayoff",window.location.search),adlotameon:tmgAdsGetURLParam("adlotameon",window.location.search),adlotameoff:tmgAdsGetURLParam("adlotameoff",window.location.search),adhbon:tmgAdsGetURLParam("adhbon",window.location.search),adhboff:tmgAdsGetURLParam("adhboff",window.location.search),adpermutiveon:tmgAdsGetURLParam("adpermutiveon",window.location.search),adpermutiveoff:tmgAdsGetURLParam("adpermutiveoff",window.location.search),adprebidon:tmgAdsGetURLParam("adprebidon",window.location.search),adprebidoff:tmgAdsGetURLParam("adprebidoff",window.location.search),adstickyon:tmgAdsGetURLParam("adstickyon",window.location.search),adstickyoff:tmgAdsGetURLParam("adstickyoff",window.location.search),adnativeon:tmgAdsGetURLParam("adnativeon",window.location.search),adnativeoff:tmgAdsGetURLParam("adnativeoff",window.location.search),counters:20,tmgcookies:{active:!0},performance:{active:!0,supported:"unknown"},chartbeat:{active:!1},quantcast:{active:!0,maxSegs:10},targetTests:{tests:{rejectors:{testid:20047610,control:20047600}},rejectors:{stickyban:!1,desktopdyn:!0,mobindex:!0}},lazyLoad:{xs:{active:!0,offset:-250,delayCall:150,geo:[],channels:[],lazy:["gad","lmpu","myb","nat","bin","dyn","bbt","bbb","boa"],exempt:["advert_tmg_nat_story_outbrain"]},s:{active:!0,offset:-250,delayCall:150,geo:[],channels:[],lazy:["gad","lmpu","myb","nat","bin","dyn","bbt","bbb","boa"],exempt:["advert_tmg_nat_story_outbrain"]},m:{active:!0,offset:-250,delayCall:150,geo:[],channels:[],lazy:["gad","lmpu","myb","nat","bin","dyn","bbt","bbb","boa"],exempt:["advert_tmg_nat_story_outbrain"]},l:{active:!0,offset:-750,delayCall:150,geo:[],channels:[],lazy:["gad","lmpu","myb","nat","bin","dyn","bbt","bbb","boa"],exempt:["advert_tmg_nat_story_outbrain"]},x:{active:!0,offset:-750,delayCall:150,geo:[],channels:[],lazy:["gad","lmpu","myb","nat","bin","dyn","bbt","bbb","boa"],exempt:["advert_tmg_nat_story_outbrain"]}},dynad:{active:!0,viewports:["xs","s","m","l","x"],styling:{title:"#EEEEEE",titleText:"#444444",body:"#F5F5F5"},config:{story:{x:{firstAd:850,otherAd:999999999,minParaChars:150},l:{firstAd:850,otherAd:999999999,minParaChars:150},m:{firstAd:850,otherAd:1e3,minParaChars:150},s:{firstAd:850,otherAd:1e3,minParaChars:150},xs:{firstAd:850,otherAd:1e3,minParaChars:150}},video:{x:{firstAd:850,otherAd:999999999,minParaChars:150},l:{firstAd:850,otherAd:999999999,minParaChars:150},m:{firstAd:850,otherAd:1e3,minParaChars:150},s:{firstAd:850,otherAd:1e3,minParaChars:150},xs:{firstAd:850,otherAd:1e3,minParaChars:150}},live:{x:{firstAd:850,otherAd:999999999,minParaChars:150},l:{firstAd:850,otherAd:999999999,minParaChars:150},m:{firstAd:850,otherAd:1e3,minParaChars:150},s:{firstAd:850,otherAd:1e3,minParaChars:150},xs:{firstAd:850,otherAd:1e3,minParaChars:150}}}},newadtests:[],mytelegraph:{isActive:!0,isApplied:!1,isPlatform:"unknown",active:function(){return void 0!==tmgAds.mytelegraph&&tmgAds.mytelegraph},exempt:["sponsored","commerce","about-us","events","financial-services","promotions"],refreshPeriod:20,refreshLimit:2e3,refreshCount:0},adobe:{active:!0,tmgCookieName:"AAMDFP",aamCookieName:"aam",dfpKeyName:"aamseg"},adomik:{active:!0,getAdGroup:function(){var e=Math.random();switch(!1){case!(e<.09):return"ad_ex"+Math.floor(100*e);case!(e<.1):return"ad_bc";default:return"ad_opt"}}},adSlotRefresh:{active:!0,retryPeriod:200,retryLimit:60,retryCount:0,exemptAdSlots:["gad","nat","boa","bbt","bbb","dyn","tmg","inr","opt","ftr"],pagetypes:["index","topic","story","live","video","gallery"]},oopunits:["tmg","inr","int","opt","ftr"],beemray:{name:"beemray",active:!1,status:"init",response:"init",type:"js",id:"5e463430-b036-4755-ac9a-233b7a357002",url:"https://telegraph.sdk.beemray.com/content/websdk/5e463430-b036-4755-ac9a-233b7a357002?source="+btoa(location.href),urltest:"https://stage.sdk.beemray.com/content/websdk/5e463430-b036-4755-ac9a-233b7a357002?source="+btoa(location.href),dfp:[],segments:[],dopubsub:!0,domains:tmgAds.prodServers,timeout:1500,timeoutFn:function(){tmg.pubsub.publish({topic:"tmg.ads.beemray.timeout"})},preload:function(){tmgAds.plugins.beemray.response="preload",window.addEventListener("br_sdkload",function(){tmgAds.plugins.beemray.response="sdkload",beemray.EventApi.create("WebSDK","/rest/event/web/plain").send(function(e){if(null===e)return console.log("["+tmgAdsTimer()+"] BEEMRAY: WebSDK response - null"),void(tmgAds.plugins.beemray.response="empty");for(var t in tmgAds.plugins.beemray.response="received",e.list)tmgAds.plugins.beemray.dfp.push(e.list[t].id),tmgAds.plugins.beemray.dfp.push(e.list[t].place.id);if(e.hasOwnProperty("stand")&&e.stand.hasOwnProperty("userPlaceInfo")&&e.stand.userPlaceInfo.hasOwnProperty("state"))for(t=0;t<=e.stand.userPlaceInfo.state.length-1;t++)tmgAds.plugins.beemray.dfp.push(e.stand.userPlaceInfo.state[t])},tmgAds.plugins.beemray.timeout)})},callback:function(){},onerror:function(){}},permutive:{name:"permutive",id:"e8eaf546-a7b4-4d26-bc0a-3a71131d21c3",active:!0,data:null,status:"init",type:"js",url:"https://cdn.permutive.com/e8eaf546-a7b4-4d26-bc0a-3a71131d21c3-web.js",urltest:"https://cdn.permutive.com/e8eaf546-a7b4-4d26-bc0a-3a71131d21c3-web.js",dopubsub:!0,domains:tmgAds.prodServers,timeout:1e3,timeoutFn:function(){tmg.pubsub.publish({topic:"tmg.ads.permutive.timeout"})},preload:function(){tmgAds.plugins.permutive.status="preload",function(e,t,s,d,i){if(!t){t=t||{},window.permutive=t,t.q=[],t.config={}||{},t.config.projectId="e8eaf546-a7b4-4d26-bc0a-3a71131d21c3",t.config.apiKey="d0ad7082-d741-4059-848f-e8d3a8aae2f0",t.config.environment=t.config.environment||"production";for(var a=["addon","identify","track","trigger","query","segment","segments","ready","on","once","user","consent"],n=0;n<a.length;n++){var o=a[n];t[o]=function(e){return function(){var s=Array.prototype.slice.call(arguments,0);t.q.push({functionName:e,arguments:s})}}(o)}}}(document,window.permutive),void 0!==tmgAds.tmg.pid&&window.permutive.identify([{id:tmgAds.tmg.pid,tag:"PID"}]),permutive.addon("web",{page:{article:{businessSegment:tmgAds.page.businessseg,channel:tmgAds.page.zone,headline:tmgAds.page.dataLayer.pageName.replace(/\\/g,""),type:tmgAds.page.pagetype,keywords:tmgAds.page.keywords},sponsored:{isSponsored:tmgAds.page.site},user:{status:JSON.stringify(tmgAds.tmg.isLoggedIn),subscription:tmgAds.tmg.userState}}})},callback:function(){},onerror:function(){}},lotame:{name:"lotamelib",id:"LOTCC_12639",active:!0,data:null,status:"init",type:"js",url:"https://tags.crwdcntrl.net/c/12639/cc.js?ns=_cc12639",urltest:"https://tags.crwdcntrl.net/c/12639/cc.js?ns=_cc12639",url_api:"https://ad.crwdcntrl.net/5/c=13271/pe=y/callback=tmgAds.plugins.lotame.data_extract",dopubsub:!1,domains:tmgAds.prodServers,timeout:3e3,timeoutFn:function(){console.log("ADTECH: Lotamelib Timeout - issuing the tmg.ads.lotame.ready event"),tmg.pubsub.publish({topic:"tmg.ads.lotamelib.ready"}),tmg.pubsub.publish({topic:"tmg.ads.lotame.ready"})},preload:function(){},callback:function(){_cc12639.bcp();LOTCC.setConsent(function(e){},12639,{analytics:!0,crossdevice:!0,datasharing:!0,targeting:!0}),lotameapi={name:"lotame",active:!0,status:"init",type:"js",url:tmgAds.plugins.lotame.url_api,urltest:tmgAds.plugins.lotame.url_api,domains:tmgAds.prodServers,timeout:3e3,timeoutFn:function(){console.log("ADTECH: Lotame API Timeout - issuing the tmg.ads.lotame.ready event"),tmg.pubsub.publish({topic:"tmg.ads.lotame.ready"})},preload:function(){},callback:function(){},onerror:function(){console.log("ADTECH: Lotame API Error - issuing the tmg.ads.lotame.ready event"),tmg.pubsub.publish({topic:"tmg.ads.lotame.ready"})}},tmgAdsLoad(lotameapi)},onerror:function(){console.log("ADTECH: Lotamelib Error - issuing the tmg.ads.lotame.ready event"),tmg.pubsub.publish({topic:"tmg.ads.lotamelib.ready"}),tmg.pubsub.publish({topic:"tmg.ads.lotame.ready"})},data_extract:function(e){if(tmgAds.plugins.lotame.dfp={segments:[],pid:"unset",tpid:"unset"},tmgAds.plugins.lotame.data=e,e.hasOwnProperty("Profile")&&e.Profile.hasOwnProperty("Audiences")&&e.Profile.Audiences.hasOwnProperty("Audience"))for(var t in e.Profile.hasOwnProperty("pid")&&(tmgAds.plugins.lotame.dfp.pid=e.Profile.pid),e.Profile.hasOwnProperty("tpid")&&(tmgAds.plugins.lotame.dfp.tpid=e.Profile.tpid),e.Profile.Audiences.Audience)tmgAds.plugins.lotame.dfp.segments.push(Number(e.Profile.Audiences.Audience[t].id));tmg.pubsub.publish({topic:"tmg.ads.lotame.ready"})}},scroll:{name:"scroll",active:!1,status:"init",type:"js",url:"https://static.scroll.com/js/scroll.js",urltest:"https://static.scroll.com/js/scroll.js",dopubsub:!0,domains:tmgAds.prodServers,timeout:!1,timeoutFn:function(){},preload:function(){tmgAdsLog("tmgAds.plugins.scroll.preload()"),function(e,t,s,d){if(!e[t]){var i=e[t]={};i._q=[],i.do=function(e){i._q.push(e)}}}(window,"Scroll"),Scroll.config={detected:document.cookie.indexOf("scroll0=")>-1}},callback:function(){tmgAdsLog("tmgAds.plugins.scroll.callback()")},onerror:function(){}},ixid:{name:"ixid",active:!0,status:"init",type:"js",url:"https://js-sec.indexww.com/ht/p/188607-104920660844159.js",urltest:"https://js-sec.indexww.com/ht/p/188607-104920660844159.js",requiresConsent:!0,dopubsub:!0,domains:tmgAds.prodServers,timeout:1e3,timeoutFn:function(){tmg.pubsub.publish({topic:"tmg.ads.ixid.timeout"})},preload:function(){},callback:function(){},onerror:function(){}},grapeshot:{name:"grapeshot",active:!0,status:"init",type:"js",maxSegs:20,retryPeriod:200,retryLimit:10,retryCount:0,loadStatus:!1,url:"https://telegraph.grapeshot.co.uk/main/channels.cgi?url="+location.protocol+"//"+location.host+location.pathname,urltest:"https://telegraph.grapeshot.co.uk/main/channels.cgi?url="+location.protocol+"//"+location.host+location.pathname,dopubsub:!0,domains:tmgAds.prodServers,timeout:1e3,timeoutFn:function(){tmg.pubsub.publish({topic:"tmg.ads.grapeshot.timeout"})},preload:function(){},callback:function(){tmgAds.grapeshot={raw:null,dfp:[]},void 0!==window.gs_channels?(tmgAds.grapeshot={raw:window.gs_channels,dfp:window.gs_channels.split(",")},tmgAdsLog("GRAPESHOT: window.gs_channels exists :: Num of channls ="+tmgAds.grapeshot.dfp.length+" :: Content = "+tmgAds.grapeshot.dfp.toString())):tmgAdsLog("GRAPESHOT: window.gs_channels does not exist:")},onerror:function(){}},dynamicads:{active:!0,date:"2020-01-07",counters:{},exclude:["subscriptions","rewards"],ads:[{id:"nat_story_logo",active:!1,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["all"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["all"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".header-breadcrumbs__list",position:"after",style:"",poscount:0},{id:"nat_story_sidebar",active:!0,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["all"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["l","x"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".article__sidebar .social-follow",position:"before",style:"",poscount:0},{id:"nat_story_sparkbrain_1",active:!0,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["all"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["all"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".article__spark #polar-ad-article-bottom",position:"before",style:"",poscount:0},{id:"nat_story_outbrain",active:!0,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["all"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["all"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:["gb"]},selector:".article__spark #polar-ad-article-bottom",position:"before",style:"",poscount:0},{id:"nat_story_sparkbrain_2",active:!0,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["all"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["all"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".article__spark #polar-ad-article-bottom",position:"after",style:"",poscount:0},{id:"bbt",active:!1,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["all"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["l","x"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".snippet-onward-journey",position:"before",style:"",poscount:0},{id:"bbb",active:!0,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["all"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["l","x","s","xs"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".snippet-onward-journey",position:"after",style:"",poscount:0},{id:"nat_story_list_onward_mob",active:!0,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["all"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["s","xs"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".article__related .list:last-child .list-of-entities__container",style:"",list:{position:6,repeat:!0}},{id:"nat_story_bottom",active:!0,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["all"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["all"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".listOfTags",style:"",position:"before"},{id:"nat_story_sparkbrain_1",active:!0,testParam:!1,cms:["aem"],pagetypes:["gallery"],rendertypes:["all"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["all"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".article__spark #polar-ad-article-bottom",position:"before",style:"",poscount:0},{id:"nat_story_outbrain",active:!0,testParam:!1,cms:["aem"],pagetypes:["gallery"],rendertypes:["all"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["all"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:["gb"]},selector:".article__spark #polar-ad-article-bottom",position:"before",style:"",poscount:0},{id:"nat_story_sparkbrain_2",active:!0,testParam:!1,cms:["aem"],pagetypes:["gallery"],rendertypes:["all"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["all"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".article__spark #polar-ad-article-bottom",position:"after",style:"",poscount:0},{id:"bbb",active:!1,testParam:!1,cms:["escenic"],pagetypes:["story"],rendertypes:["all"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["l","x","m","s","xs"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".backtotop",position:"after",style:"margin-top:10px; margin-bottom:10px;",poscount:0},{id:"nat_story_top",active:!0,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["articleRenderer2"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["all"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".hero-area-wrapper",position:"after",style:"",poscount:0},{id:"nat_story_top",active:!0,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["articleRenderer"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["xs","s","m","l","x"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".article-body-text",position:"before",style:"margin-bottom:10px;",poscount:0},{id:"nat_story_sidebar",active:!1,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["articleRenderer"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["l","x"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".commercial-unit.commercial-unit--sidebar",position:"before",style:"margin-top:10px;",poscount:0},{id:"nat_story_newarticle_1",active:!0,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["articleRenderer"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["xs","s","m","l","x"],userstate:["anon"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".article-list",position:"before",style:"margin-top:10px; margin-bottom:10px;",poscount:1},{id:"nat_story_newarticle_2",active:!0,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["articleRenderer"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["xs","s","m","l","x"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".article-list",position:"after",style:"margin-top:10px; margin-bottom:10px;",poscount:1},{id:"bbb",active:!0,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["articleRenderer"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["l","x","s","xs"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".more-stories",position:"after",style:"margin-top:10px; margin-bottom:10px;",poscount:1},{id:"hotfix_remove_mobile_a3pages_mpu",active:!0,testParam:!1,cms:["aem"],pagetypes:["story"],rendertypes:["articleRenderer"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["xs","s"],userstate:["all"],section:{include:["portal"],exclude:[]},geo:{include:["all"],exclude:[]},selector:function(){console.log("ADTECH: HOTFIX - removing MPU slot from mobile A3 pages"),tmgAdsRemoveElement("advert_tmg_mpu")},position:"",style:"",poscount:0},{id:"hotfix_remove_desktop_portal_mpu",active:!0,testParam:!1,cms:["aem"],pagetypes:["index"],rendertypes:["all"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["x","l"],userstate:["all"],section:{include:["portal"],exclude:[]},geo:{include:["all"],exclude:[]},selector:function(){let e=document.getElementById("advert_tmg_mpu");e&&(console.log("ADTECH: HOT-FIX - remove MPU on Portal Desktop pages - deleting advert_tmg_mpu"),e.parentNode.removeChild(e))},position:"",style:"",poscount:0},{id:"hotfix_remove_tablet_mpu_container",active:!0,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["all"],fullWidth:!1,addTitle:!1,viewports:["m"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:function(){if(document.querySelectorAll(".commercial-unit.commercial-unit--sidebar").length>0){console.log("ADTECH: HOT-FIX - remove M/Tablet MPU container - unit found");var e=document.querySelectorAll(".commercial-unit.commercial-unit--sidebar")[0];e.parentNode.removeChild(e)}},position:"",style:"",poscount:0},{id:"a3_remove_ban_mobile",active:!0,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["articleRenderer"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["xs","s"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:function(){console.log("ADTECH: A3 - articleRenderer -> a3_remove_ban_mobile");var e=document.getElementById("advert_tmg_ban");e&&(e.classList.remove("is-sticky"),document.getElementById("advert_tmg_ban").parentNode.removeChild(e))},position:"before",style:"margin-top:10px; margin-bottom:10px;",poscount:0},{id:"a3_hotfix",active:!0,testParam:!1,cms:["aem"],pagetypes:["story"],rendertypes:["articleRenderer"],storytypes:["all"],fullWidth:!1,viewports:["all"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:function(){if(tmgAds.page.dataLayer&&"articleRenderer"==tmgAds.page.dataLayer.pageType){function e(e,t){var s={};s.sp1=document.createElement("div"),s.sp1.style.backgroundColor=tmgAds.plugins.dynad.styling.body,s.sp1.id="advert_tmg_dyn_"+t,s.sp1.setAttribute("data-adType","dyn_"+t),s.sp1.classList.add("js-advert"),s.sp1.classList.add("advert"),s.sp1.classList.add("dynamicMpu"),s.sp1.style.marginBottom="20px",s.sp2=e,s.parentDiv=s.sp2.parentNode,s.parentDiv.insertBefore(s.sp1,s.sp2)}var t={charCount:0,lastBlockWasTxt:!1,lastBlockWasEmbed:!1,dynCount:0,hasFirstAd:!1,adFreq:{}};for(t.article=document.getElementsByTagName("article")[0],t.dyns=t.article.getElementsByClassName("dynamicMpu");t.dyns.length>0;)console.log("Removing DynMPU Slot: ",t.dyns[0]),t.dyns[0].parentNode.removeChild(t.dyns[0]);for(t.adFreq=tmgAds.plugins.dynad.config[tmgAds.page.pagetype][tmgAds.layout.viewport],t.nodes=t.article.getElementsByClassName("article-body-text"),t.lastBlockWasTxt=!1,t.paras=t.nodes[0].querySelectorAll("p,div"),n=0;n<t.paras.length;n++)t.lastBlockWasTxt&&(t.hasFirstAd?t.charCount>=t.adFreq.otherAd&&t.paras[n].innerText.length>t.adFreq.minParaChars?(e(t.paras[n],t.dynCount),t.dynCount++,t.charCount=0):(t.paras[n].innerText.length,t.adFreq.minParaChars):t.charCount>=t.adFreq.firstAd&&t.paras[n].innerText.length>t.adFreq.minParaChars?(e(t.paras[n],t.dynCount),t.dynCount++,t.hasFirstAd=!0,t.charCount=0):(t.paras[n].innerText.length,t.adFreq.minParaChars)),t.charCount+=t.paras[n].innerText.length,t.lastBlockWasTxt=!0;"x"!=tmgAds.layout.viewport&&"l"!=tmgAds.layout.viewport&&function(e){for(nodes=document.getElementsByClassName("premium_ads_text");nodes.length>0;)nodes[0].parentNode.removeChild(nodes[0]);nodes=document.getElementsByClassName(e);for(var t=0;t<nodes.length;t++)s=nodes[t],d=void 0,(d={}).sp1=document.createElement("div"),d.sp1.innerText="Advertisement",d.sp1.style.backgroundColor=tmgAds.plugins.dynad.styling.title,d.sp1.classList.add("new_premium_ads_text"),d.sp1.classList.add("dynMpuAdTitle"),d.sp1.style.marginTop="0",d.sp1.style.marginBottom="0",d.sp1.style.fontFamily='"Telesans Text Regular", Arial,sans-serif',d.sp1.style.fontSize="11px",d.sp1.style.color=tmgAds.plugins.dynad.styling.titleText,d.sp1.style.flex="1",d.sp1.style.padding="0px",d.sp1.style.textAlign="center",d.sp2=s,d.parentDiv=d.sp2.parentNode,d.parentDiv.insertBefore(d.sp1,d.sp2);var s,d}("dynamicMpu")}},position:"",style:"",poscount:0},{id:"gad_comments_a2",active:!1,testParam:!1,cms:["aem"],pagetypes:["story"],rendertypes:["articleRenderer2"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["m","s","xs"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:"#comments",position:"after",style:"margin-top:10px; margin-bottom:10px;",poscount:0},{id:"newads2020_delete_all_adsmax_slots",active:!0,testParam:!1,cms:["aem"],pagetypes:["all"],rendertypes:["all"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["x","l"],userstate:["reg","sub"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:function(){console.log("ADTECH: newads2020_delete_all_adsmax_slots - Reg/Sub User - removing the adsmax new ad placements");for(var e=tmgAdsGetAllAdSlots(),t=0;t<e.length;t++)if(e[t].getAttribute("data-ad-adsmax")){console.log("ADTECH: newads2020_delete_all_adsmax_slots - Reg/Sub User - deleting slot ->",e[t]);var s=e[t].parentElement;s.parentElement.removeChild(s)}},position:"before",style:"margin-top:10px; margin-bottom:10px;",poscount:0},{id:"newads2020_desktop_article_sticky_ban",active:!0,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["articleRenderer","articleRenderer2"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["x","l"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:function(){console.log("ADTECH: newads2020_desktop_article_sticky_ban - Anon User - Turning on Sticky banners for anonymous users - requires turning on banner slot"),tmgAds.config.deliveryModel.exempt.push("ban")},position:"before",style:"margin-top:10px; margin-bottom:10px;",poscount:0},{id:"nat_story_sidebar",active:!0,testParam:!1,cms:["aem"],pagetypes:["story","live","video"],rendertypes:["all"],storytypes:["storytype_comments"],fullWidth:!1,addTitle:!0,viewports:["l","x"],userstate:["all"],section:{include:["sport"],exclude:[]},geo:{include:["all"],exclude:[]},selector:".commercial-unit.commercial-unit--sidebar",position:"before",style:"margin-bottom: 24px; margin-top: 8px",poscount:0},{id:"a2_liveblog_remove_300x600",active:!0,testParam:!1,cms:["aem"],pagetypes:["live"],rendertypes:["articleRenderer","articleRenderer2"],storytypes:["all"],fullWidth:!1,addTitle:!1,viewports:["x","l"],userstate:["all"],section:{include:["all"],exclude:[]},geo:{include:["all"],exclude:[]},selector:function(){tmgAds.plugins.sizemapping.l.mpu=[[300,250],[300,215],[300,189],[1,1],"fluid"],tmgAds.plugins.sizemapping.x.mpu=[[300,250],[300,215],[300,189],[1,1],"fluid"],console.log("ADTECH: DYNAMIC-ADS -> A2 Live Blog onward journey RHR - removing 300x600 support on desktops")},position:"",style:"",poscount:0}]},models:{story:[{viewport:"x",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]}],live:[{viewport:"x",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]}],video:[{viewport:"x",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]}],"video-play":[{viewport:"x",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]}],index:[{viewport:"x",ruleName:"Default",model:"ban",minHeight:900,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin","lmpu"]},{viewport:"l",ruleName:"Default",model:"ban",minHeight:900,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin","lmpu"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin","lmpu"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin","lmpu"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin","lmpu"]}],topic:[{viewport:"x",ruleName:"Default",model:"ban",minHeight:900,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin","lmpu"]},{viewport:"l",ruleName:"Default",model:"ban",minHeight:900,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin","lmpu"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin","lmpu"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin","lmpu"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg","bin","lmpu"]}],"video-index":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],gallery:[{viewport:"x",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","mpu"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","mpu"]}],"travel-product":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],"travel-product-listing":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],"travel-destinations":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],"travel-review":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],"rewards-offers-detail":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],bare:[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],unset:[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],default:[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}]}},tmgAds.layout={viewport:"u",viewportWidth:"",getBreakpoint:function(e){var t="xs";return e>=tmgAds.plugins.sizemapping.s.size[0]&&(t="s"),e>=tmgAds.plugins.sizemapping.m.size[0]&&(t="m"),e>=tmgAds.plugins.sizemapping.l.size[0]&&(t="l"),e>=tmgAds.plugins.sizemapping.x.size[0]&&(t="x"),tmgAdsLog("tmgAds.layout.getBreakpoint -> width:"+tmgAds.layout.viewportWidth+" height:"+tmgAds.layout.viewportHeight+" size:"+tmgAds.layout.viewport),t},getViewportWidth:function(){return document.documentElement.clientWidth>=0?document.documentElement.clientWidth:document.body&&document.body.clientWidth>=0?document.body.clientWidth:window.innerWidth>=0?window.innerWidth:0},getViewportHeight:function(){return document.documentElement.clientHeight>=0?document.documentElement.clientHeight:document.body&&document.body.clientHeight>=0?document.body.clientHeight:window.innerHeight>=0?window.innerHeight:0},onresize:function(){tmgAds.layout.viewportHeight=tmgAds.layout.getViewportHeight(),tmgAds.layout.viewportWidth=tmgAds.layout.getViewportWidth(),tmgAds.layout.viewport=tmgAds.layout.getBreakpoint(tmgAds.layout.viewportWidth)},addEvent:function(e,t,s){null!==e&&"undefined"!=e&&(e.addEventListener?e.addEventListener(t,s,!1):e.attachEvent?e.attachEvent("on"+t,s):e["on"+t]=s)}},tmgAds.page=tmgAdsGetPageData(),tmgAds.layout.onresize(),tmgAdsLog("Current viewport now: "+tmgAds.layout.viewport),tmgAdsLog("Creating an event handler for dealing with page layout changes ie; viewport change"),tmgAds.layout.addEvent(window,"resize",tmgAds.layout.onresize),tmgAds.plugins.prebid={name:"prebid",active:!0,status:"init",type:"js",bidstatus:"init",auctionID:!1,debug:!1,async:!1,excludeZones:[],jsloc:function(){return!1},url:"https://static.telegraph.co.uk/telegraph-advertising/prebid/prebid3.26.0.appnexus.criteo.ix.openx.ozone.rubicon.teads.triple.adomik.ga.consentManagementGDPR.PubComID.UserIDPubComID.js",urltest:"https://static.telegraph.co.uk/develop/telegraph-advertising/prebid/prebid3.26.0.appnexus.criteo.ix.openx.ozone.rubicon.teads.triple.adomik.ga.consentManagementGDPR.PubComID.UserIDPubComID.js",loc:"head",zerorated:["appnexusgmsm"],exempt:["tmg","inr","ftr"],keynames:["hb_data","hb_bids","hb_dealId"],multiSlots:["dyn","bin","lmpu"],domains:tmgAds.prodServers,timeout:2e3,timeoutBuffer:500,timeoutFn:function(){},timeoutCount:0,timeoutHit:!1,timeoutModify:{xs:750,s:750,m:500,l:250,x:250},disableAjaxTimeout:!0,checkFreq:100,delayed:0,priceGranularity:{buckets:[{precision:2,max:3,increment:.01},{precision:2,max:20,increment:.05},{precision:2,max:1e3,increment:1}]},commonId:{enable:!0,expInterval:525600,optout:tmgAdsGetCookie("_pubcid_optout"),_pubcid:tmgAdsGetCookie("_pubcid")},cmp:{active:!0,type:"iab",timeout:800},bidderConfigs:{rubicon:{rubiconSReq:!0},ix:{timeout:500},kargo:{geo:["us","ca","mx","ap","ae","af","am","au","az","bd","bh","bn","bt","cc","cn","cx","cy","ge","hk","id","il","in","io","iq","ir","jo","jp","kg","kh","kp","kr","kw","kz","la","lb","lk","mm","mn","mo","mv","my","np","nz","om","ph","pk","ps","qa","ru","sa","sg","sy","th","tj","tl","tm","tr","tw","uz","vn","ye"]}},userSync:{syncEnabled:!0,syncDelay:1e4,syncsPerBiddder:5,bidders:"*",filter:"include",enableOverride:!1},preload:function(){tmgAdsPerf("mark",["prebid_preload"]),window.location.search.indexOf("pbcidtest")>=0&&(console.log("PREBID: Common ID turned on via URL."),tmgAds.plugins.prebid.commonId.enable=!0),window.pbjs={},window.pbjs.cmd=[],window.pbjs.que=[],window.PREBID_TIMEOUT=tmgAds.plugins.prebid.timeout,tmgAds.layout.viewport&&(window.PREBID_TIMEOUT+=tmgAds.plugins.prebid.timeoutModify[tmgAds.layout.viewport]),tmgAds.performance.prebid={preload:tmgAdsTimer()},pbjs.que.push(function(){pbjs.setConfig({debug:tmgAds.plugins.prebid.debug}),pbjs.setConfig({bidderTimeout:window.PREBID_TIMEOUT})}),pbjs.que.push(function(){tmgAds.plugins.prebid.cmp.active?pbjs.setConfig({consentManagement:{cmpApi:tmgAds.plugins.prebid.cmp.type,timeout:tmgAds.plugins.prebid.cmp.timeout,allowAuctionWithoutConsent:!0}}):console.log("ADTECH: Prebid CMP -> INACTIVE"),tmgAds.plugins.prebid.commonId.active&&pbjs.setConfig({pubcid:{enable:tmgAds.plugins.prebid.commonId.enable,expInterval:tmgAds.plugins.prebid.commonId.expInterval}}),tmgAds.plugins.prebid.userSync.syncEnabled?pbjs.setConfig({userSync:{syncEnabled:tmgAds.plugins.prebid.userSync.syncEnabled,syncDelay:tmgAds.plugins.prebid.userSync.syncDelay,filterSettings:{all:{bidders:tmgAds.plugins.prebid.userSync.bidders,filter:tmgAds.plugins.prebid.userSync.filter},syncsPerBidder:tmgAds.plugins.prebid.userSync.syncsPerBidder},enableOverride:tmgAds.plugins.prebid.userSync.enableOverride}}):pbjs.setConfig({userSync:{syncEnabled:tmgAds.plugins.prebid.userSync.syncEnabled}}),pbjs.setConfig({priceGranularity:tmgAds.plugins.prebid.priceGranularity}),pbjs.setConfig({ix:{timeout:tmgAds.plugins.prebid.bidderConfigs.ix.timeout}}),pbjs.setConfig({rubicon:{singleRequest:tmgAds.plugins.prebid.bidderConfigs.rubicon.rubiconSReq}});try{pbjs.setConfig({ix:{firstPartyData:{sc:tmgAds.dfp.customvars.sc}}})}catch(e){console.log("ADTECH: prebid config - failed to add firstPartyData ->",e)}pbjs.onEvent("auctionInit",function(){tmgAdsPerf("mark",["prebid_auctionInit"])}),pbjs.onEvent("auctionEnd",function(){tmgAdsPerf("mark",["prebid_auctionEnd"])}),pbjs.onEvent("bidAdjustment",function(){tmgAdsPerf("mark",["prebid_bidAdjustment"])}),pbjs.onEvent("bidTimeout",function(){tmgAdsPerf("mark",["prebid_bidTimeout"])}),pbjs.onEvent("bidRequested",function(){tmgAdsPerf("mark",["prebid_bidRequested"])}),pbjs.onEvent("bidResponse",function(){tmgAdsPerf("mark",["prebid_bidResponse"])}),pbjs.onEvent("bidWon",function(){tmgAdsPerf("mark",["prebid_bidWon"])}),pbjs.onEvent("setTargeting",function(){tmgAdsPerf("mark",["prebid_setTargeting"])}),pbjs.onEvent("requestBids",function(){tmgAdsPerf("mark",["prebid_requestBids"])}),tmgAds.plugins.prebid.bids=tmgAdsPrebidReturnAdUnits(),pbjs.addAdUnits(tmgAds.plugins.prebid.bids),pbjs.aliasBidder("appnexus","appnexusclient"),pbjs.aliasBidder("appnexus","appnexusgmsm"),pbjs.aliasBidder("openx","openxclient"),pbjs.aliasBidder("teads","teadsclient"),pbjs.aliasBidder("criteo","criteoclient"),pbjs.aliasBidder("triplelift","tripleliftclient"),pbjs.requestBids(tmgAds.plugins.prebid.bidsBackHandler)}),tmgAds.plugins.prebid.pbversion=pbjs.version,tmgAds.plugins.prebid.ozversion="pending"},bidsBackHandler:{bidsBackHandler:function(e){tmgAdsPerf("mark",["prebid_bidsBackHandler"]),tmgAds.performance.prebid.bidsReceived=tmgAdsTimer();var t=[];for(var s in e)for(var d in e[s].bids){if(1!=e[s].bids[d].getStatusCode())switch(e[s].bids[d].adserverTargeting=e[s].bids[d].adserverTargeting||{hb_adid:"",hb_pb:""},e[s].bids[d].adserverTargeting.hb_adid="none",e[s].bids[d].getStatusCode()){case 0:e[s].bids[d].adserverTargeting.hb_pb="pending";break;case 2:e[s].bids[d].adserverTargeting.hb_pb="nobid";break;case 3:e[s].bids[d].adserverTargeting.hb_pb="timeout"}"s2s"==e[s].bids[d].source?e[s].bids[d].adBidder=e[s].bids[d].bidder+e[s].bids[d].source:e[s].bids[d].adBidder=e[s].bids[d].bidderCode;var i=s.split("-");e[s].bids[d].adserverTargeting.hb_pborigin=e[s].bids[d].adserverTargeting.hb_pb,tmgAds.plugins.prebid.zerorated.indexOf(e[s].bids[d].adBidder)>-1&&(e[s].bids[d].adserverTargeting.hb_pb=0),e[s].bids[d].adSlot=i[0],e[s].bids[d].adType=i[0].split("_")[2],e[s].bids[d].placementId=i[1]||"none",tmgAds.performance.prebid["timeToRespond_"+e[s].bids[d].adSlot+"_"+e[s].bids[d].adBidder+"_"+e[s].bids[d].placementId]=e[s].bids[d].timeToRespond,e[s].bids[d].bidData=e[s].bids[d].adBidder+"_"+e[s].bids[d].adserverTargeting.hb_pb+"_"+e[s].bids[d].size+"_"+e[s].bids[d].adType+"_"+e[s].bids[d].adserverTargeting.hb_adid+"_"+e[s].bids[d].placementId+"_"+e[s].bids[d].timeToRespond+"_"+e[s].bids[d].requestId,e[s].bids[d].bidID=e[s].bids[d].adBidder+"_"+e[s].bids[d].adserverTargeting.hb_pb+"_"+e[s].bids[d].size,t[e[s].bids[d].adSlot]=t[e[s].bids[d].adSlot]||{bids:[]},t[e[s].bids[d].adSlot].bids.push(e[s].bids[d])}tmgAds.plugins.prebid.bidResponse=t,"timeout"!=tmgAds.plugins.prebid.bidstatus&&(tmgAds.plugins.prebid.bidstatus="received"),tmgAds.performance.prebid.bidsReceived=Math.round(tmgAdsTimer()),tmgAds.performance.prebid.timeToLoad=Math.round(tmgAds.performance.prebid.bidsReceived-tmgAds.performance.prebid.requested),tmgAds.plugins.prebid.callback(e)}},callback:function(){tmgAdsPerf("mark",["prebid_callback"])}},tmgAdsLog("TMG-GPT-"+tmgAds.about.version+" - "+tmgAds.about.date),tmgAdsLog("SUCCESS: tmgAdsInit() initialisation"),tmgAdsLog("##################################################################################################################"),tmgAdsEvent("tmggpt-init:end")}catch(e){tmgAdsLog("ERROR: tmgAdsInit() failed -> error="+e.message,tmgAds)}}function tmgAdsPrebidReturnAdUnits(){var e={adUnits:[],sizes:[],adSlots:document.querySelectorAll(".js-advert"),dynmax:5,dyncount:0,bincount:0,lmpucount:0,customData:[{settings:{},targeting:tmgAds.dfp.customvars}],customDataStr:JSON.stringify(tmgAds.dfp.customvars),newIndex:!1};for(i in"index"==tmgAds.page.pagetype&&"indexRenderer"==dataLayer.pageType&&(e.newIndex=!0),e.adSlots)"object"==typeof e.adSlots[i]&&(e.adSlots[i].setAttribute("data-adtype",e.adSlots[i].id.split("_")[2]),"nat"==e.adSlots[i].id.split("_")[2]&&e.adSlots[i].setAttribute("data-adtype",e.adSlots[i].id.substring(11))),"object"==typeof e.adSlots[i]&&"dyn"==e.adSlots[i].getAttribute("data-adtype").substring(0,3)&&e.dyncount++,"object"==typeof e.adSlots[i]&&"bin"==e.adSlots[i].getAttribute("data-adtype").substring(0,3)&&e.bincount++,"object"==typeof e.adSlots[i]&&"lmpu"==e.adSlots[i].getAttribute("data-adtype").substring(0,4)&&e.lmpucount++;if(e.dyncount>e.dynmax&&(e.count=e.dynmax),"x"==tmgAds.layout.viewport||"l"==tmgAds.layout.viewport)if(tmgAds.layout.viewportHeight<tmgAds.config.deliveryModel.minHeight?e.sizes.ban=[[728,90]]:e.sizes.ban=[[970,250],[728,90]],"index"==tmgAds.page.pagetype||"topic"==tmgAds.page.pagetype||"video-index"==tmgAds.page.pagetype||"travel-destinations"==tmgAds.page.pagetype){for(e.adUnits.push({code:"advert_tmg_ban-0420420601",mediaTypes:{banner:{sizes:e.sizes.ban}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"0420420601",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]}),i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-1420420622",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"1420420622",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-1420420623",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"1420420623",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]});for(e.adUnits.push({code:"advert_tmg_ban-12618727",mediaTypes:{banner:{sizes:[[970,250]]}},bids:[{bidder:"appnexusgmsm",params:{placementId:"12618727",keywords:{vp:tmgAds.dfp.customvars.vp,pt:tmgAds.dfp.customvars.pt,div:"advert_tmg_ban"}}}]}),e.adUnits.push({code:"advert_tmg_ban-15943283",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"appnexusgmsm",params:{placementId:"15943283",keywords:{vp:tmgAds.dfp.customvars.vp,pt:tmgAds.dfp.customvars.pt,div:"advert_tmg_ban"}}}]}),i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-12618727",mediaTypes:{banner:{sizes:[[970,250]]}},bids:[{bidder:"appnexusgmsm",params:{placementId:"12618727",keywords:{vp:tmgAds.dfp.customvars.vp,pt:tmgAds.dfp.customvars.pt,div:"advert_tmg_bin_"+i}}}]});for(i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-15943283",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"appnexusgmsm",params:{placementId:"15943283",keywords:{vp:tmgAds.dfp.customvars.vp,pt:tmgAds.dfp.customvars.pt,div:"advert_tmg_bin_"+i}}}]});for(e.adUnits.push({code:"advert_tmg_ban-9979466",mediaTypes:{banner:{sizes:e.sizes.ban}},bids:[{bidder:"appnexusclient",params:{placementId:"9979466",keywords:{section:[tmgAds.page.section]}}}]}),i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-15611942",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"appnexusclient",params:{placementId:"15611942",keywords:{section:[tmgAds.page.section]}}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-15611943",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"appnexusclient",params:{placementId:"15611943",keywords:{section:[tmgAds.page.section]}}}]});for(e.adUnits.push({code:"advert_tmg_ban-540231754",mediaTypes:{banner:{sizes:e.sizes.ban}},bids:[{bidder:"openxclient",params:{unit:"540231754",delDomain:"telegraph-d.openx.net"}}]}),i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-540666550",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"openxclient",params:{unit:"540666550",delDomain:"telegraph-d.openx.net"}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-540666551",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"openxclient",params:{unit:"540666551",delDomain:"telegraph-d.openx.net"}}]});for(e.adUnits.push({code:"advert_tmg_ban-1110732",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1110732",position:"atf"}}]}),i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-1233484",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1233484",position:"atf"}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-1233488",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1233488",position:"atf"}}]});for(e.adUnits.push({code:"advert_tmg_ban-864201",mediaTypes:{banner:{sizes:e.sizes.ban}},bids:[{bidder:"criteoclient",params:{networkId:502}}]}),i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-864225",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"criteoclient",params:{networkId:502}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-864226",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"criteoclient",params:{networkId:502}}]});for(tmgAds.layout.viewportHeight>tmgAds.config.deliveryModel.minHeight?e.adUnits.push({code:"advert_tmg_ban-319259",mediaTypes:{banner:{sizes:e.sizes.ban}},bids:[{bidder:"ix",params:{siteId:"319259",size:[970,250]}},{bidder:"ix",params:{siteId:"319259",size:[728,90]}}]}):e.adUnits.push({code:"advert_tmg_ban-319259",mediaTypes:{banner:{sizes:e.sizes.ban}},bids:[{bidder:"ix",params:{siteId:"319259",size:[728,90]}}]}),i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-357821",mediaTypes:{banner:{sizes:[[970,250]]}},bids:[{bidder:"ix",params:{siteId:"357821",size:[970,250]}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-357822",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"ix",params:{siteId:"357822",size:[300,250]}}]})}else e.adUnits.push({code:"advert_tmg_bbb-0420420603",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"0420420603",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]}),e.adUnits.push({code:"advert_tmg_mpu-0420420600",mediaTypes:{banner:{sizes:[[300,250],[300,600]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"0420420600",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]}),e.adUnits.push({code:"advert_tmg_mpu-12427874",mediaTypes:{banner:{sizes:[[300,600]]}},bids:[{bidder:"appnexusgmsm",params:{placementId:"12427874",keywords:{vp:tmgAds.dfp.customvars.vp,pt:tmgAds.dfp.customvars.pt,div:"advert_tmg_mpu"}}}]}),e.adUnits.push({code:"advert_tmg_mpu-15901110",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"appnexusgmsm",params:{placementId:"15901110",keywords:{vp:tmgAds.dfp.customvars.vp,pt:tmgAds.dfp.customvars.pt,div:"advert_tmg_mpu"}}}]}),e.adUnits.push({code:"advert_tmg_bbb-11679937",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"appnexusclient",params:{placementId:"11679937",keywords:{section:[tmgAds.page.section]}}}]}),e.adUnits.push({code:"advert_tmg_mpu-9979467",mediaTypes:{banner:{sizes:[[300,250],[300,600]]}},bids:[{bidder:"appnexusclient",params:{placementId:"9979467",keywords:{section:[tmgAds.page.section]}}}]}),e.adUnits.push({code:"advert_tmg_bbb-540231758",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"openxclient",params:{unit:"540231758",delDomain:"telegraph-d.openx.net"}}]}),e.adUnits.push({code:"advert_tmg_mpu-540231756",mediaTypes:{banner:{sizes:[[300,250],[300,600]]}},bids:[{bidder:"openxclient",params:{unit:"540231756",delDomain:"telegraph-d.openx.net"}}]}),e.adUnits.push({code:"advert_tmg_bbb-1110734",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1110734",position:"btf"}}]}),e.adUnits.push({code:"advert_tmg_mpu-1110740",mediaTypes:{banner:{sizes:[[300,250],[300,600]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1110740",position:"atf"}}]}),e.adUnits.push({code:"advert_tmg_bbb-864207",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"criteoclient",params:{networkId:502}}]}),e.adUnits.push({code:"advert_tmg_mpu-864202",mediaTypes:{banner:{sizes:[[300,600],[300,250]]}},bids:[{bidder:"criteoclient",params:{networkId:502}}]}),e.adUnits.push({code:"advert_tmg_dyn_0",mediaTypes:{video:{playerSize:[640,360],mimes:["video/mp4"],context:"outstream"}},bids:[{bidder:"teadsclient",params:{pageId:"114348",placementId:"124194,",video:{skippable:!0,playback_method:["auto_play_sound_off"]}}}]}),e.adUnits.push({code:"advert_tmg_nat_story_top-12347",mediaTypes:{banner:{sizes:[[1,1]]}},bids:[{bidder:"tripleliftclient",params:{inventoryCode:"12347"}}]}),e.adUnits.push({code:"advert_tmg_nat_story_sidebar-12357",mediaTypes:{banner:{sizes:[[1,1]]}},bids:[{bidder:"tripleliftclient",params:{inventoryCode:"12357"}}]}),"gb"!=tmgAds.page.geo&&(e.adUnits.push({code:"advert_tmg_nat_story_sparkbrain_1-12359",mediaTypes:{banner:{sizes:[[1,1]]}},bids:[{bidder:"tripleliftclient",params:{inventoryCode:"12359"}}]}),e.adUnits.push({code:"advert_tmg_nat_story_sparkbrain_2-12359",mediaTypes:{banner:{sizes:[[1,1]]}},bids:[{bidder:"tripleliftclient",params:{inventoryCode:"12359"}}]})),e.adUnits.push({code:"advert_tmg_bbb-323075",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"ix",params:{siteId:"323075",size:[970,250]}},{bidder:"ix",params:{siteId:"323075",size:[970,90]}},{bidder:"ix",params:{siteId:"323075",size:[728,90]}}]}),e.adUnits.push({code:"advert_tmg_mpu-323078",mediaTypes:{banner:{sizes:[[300,250],[300,600]]}},bids:[{bidder:"ix",params:{siteId:"323078",size:[300,250]}},{bidder:"ix",params:{siteId:"323078",size:[300,600]}}]}),e.adUnits.push({code:"advert_tmg_dyn_0",mediaTypes:{video:{playerSize:[640,360],mimes:["video/mp4"],context:"outstream"}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204201",placementId:"1420420621",lotameData:tmgAds.plugins.lotame.data,customData:e.customData,video:{skippable:!0,playback_method:["auto_play_sound_off"]}}}]});if("m"==tmgAds.layout.viewport)if("index"==tmgAds.page.pagetype||"topic"==tmgAds.page.pagetype||"video-index"==tmgAds.page.pagetype||"travel-destinations"==tmgAds.page.pagetype){for(e.adUnits.push({code:"advert_tmg_ban-0420420611",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"0420420611",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]}),i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-1420420624",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"1420420624",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-1420420625",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"1420420625",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]});for(e.adUnits.push({code:"advert_tmg_ban-15943283",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"appnexusgmsm",params:{placementId:"15943283",keywords:{vp:tmgAds.dfp.customvars.vp,pt:tmgAds.dfp.customvars.pt,div:"advert_tmg_ban"}}}]}),i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-15943283",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"appnexusgmsm",params:{placementId:"15943283",keywords:{vp:tmgAds.dfp.customvars.vp,pt:tmgAds.dfp.customvars.pt,div:"advert_tmg_bin_"+i}}}]});for(e.adUnits.push({code:"advert_tmg_ban-9979546",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"appnexusclient",params:{placementId:"9979546",keywords:{section:[tmgAds.page.section]}}}]}),i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-15611947",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"appnexusclient",params:{placementId:"15611947",keywords:{section:[tmgAds.page.section]}}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-15611949",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"appnexusclient",params:{placementId:"15611949",keywords:{section:[tmgAds.page.section]}}}]});for(e.adUnits.push({code:"advert_tmg_ban-540231754",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"openxclient",params:{unit:"540231754",delDomain:"telegraph-d.openx.net"}}]}),i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-540666552",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"openxclient",params:{unit:"540666552",delDomain:"telegraph-d.openx.net"}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-540666553",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"openxclient",params:{unit:"540666553",delDomain:"telegraph-d.openx.net"}}]});for(e.adUnits.push({code:"advert_tmg_ban-1110742",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1110742",position:"atf"}}]}),i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-1237284",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1237284",position:"atf"}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-1237286",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1237286",position:"atf"}}]});for(e.adUnits.push({code:"advert_tmg_ban-864209",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"criteoclient",params:{networkId:502}}]}),i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-864213",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"criteoclient",params:{networkId:502}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-864214",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"criteoclient",params:{networkId:502}}]});for(e.adUnits.push({code:"advert_tmg_ban-323079",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"ix",params:{siteId:"323079",size:[728,90]}}]}),i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-356077",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"ix",params:{siteId:"356077",size:[728,90]}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-356078",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"ix",params:{siteId:"356078",size:[300,250]}}]})}else{for(e.adUnits.push({code:"advert_tmg_ban-0420420611",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"0420420611",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]}),e.adUnits.push({code:"advert_tmg_ban-0420420615",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"0420420615",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]}),i=0;i<=e.dyncount-1;i++)e.adUnits.push({code:"advert_tmg_dyn_"+i+"-0420420616",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"0420420616",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]}),window.location.search.indexOf("pbtest")>=0&&(console.log("tmgAdsPrebidReturnAdUnits: issuing test Unruly"),e.adUnits.push({code:"advert_tmg_dyn_"+i+"-0420420424",mediaTypes:{video:{playerSize:[640,480],mimes:["video/mp4"],context:"outstream"}},bids:[{bidder:"ozone",params:{publisherId:"OZONETEST001",siteId:"4204204201",placementId:"9420420424",lotameData:tmgAds.plugins.lotame.data,customData:e.customData,video:{skippable:!0,playback_method:["auto_play_sound_off"]}}}]}));for(e.adUnits.push({code:"advert_tmg_mpu-15901110",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"appnexusgmsm",params:{placementId:"15901110",keywords:{vp:tmgAds.dfp.customvars.vp,pt:tmgAds.dfp.customvars.pt,div:"advert_tmg_mpu"}}}]}),i=0;i<=e.dyncount-1;i++)e.adUnits.push({code:"advert_tmg_dyn_"+i+"-15901110",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"appnexusgmsm",params:{placementId:"15901110",keywords:{vp:tmgAds.dfp.customvars.vp,pt:tmgAds.dfp.customvars.pt,div:"advert_tmg_dyn_"+i}}}]});for(e.adUnits.push({code:"advert_tmg_ban-9979546",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"appnexusclient",params:{placementId:"9979546",keywords:{section:[tmgAds.page.section]}}}]}),e.adUnits.push({code:"advert_tmg_bbb-13861923",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"appnexusclient",params:{placementId:"13861923",keywords:{section:[tmgAds.page.section]}}}]}),i=0;i<=e.dyncount-1;i++)e.adUnits.push({code:"advert_tmg_dyn_"+i+"-13862909",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"appnexusclient",params:{placementId:"13862909",keywords:{section:[tmgAds.page.section]}}}]});for(e.adUnits.push({code:"advert_tmg_ban-540231754",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"openxclient",params:{unit:"540231754",delDomain:"telegraph-d.openx.net"}}]}),e.adUnits.push({code:"advert_tmg_bbb-540231758",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"openxclient",params:{unit:"540231758",delDomain:"telegraph-d.openx.net"}}]}),i=0;i<=e.dyncount-1;i++)e.adUnits.push({code:"advert_tmg_dyn_"+i+"-540272932",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"openxclient",params:{unit:"540272932",delDomain:"telegraph-d.openx.net"}}]});for(e.adUnits.push({code:"advert_tmg_ban-1110742",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1110742",position:"atf"}}]}),e.adUnits.push({code:"advert_tmg_bbb-1110744",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1110744",position:"atf"}}]}),i=0;i<=e.dyncount-1;i++)e.adUnits.push({code:"advert_tmg_dyn_"+i+"-1110754",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1110754",position:"btf"}}]});for(e.adUnits.push({code:"advert_tmg_ban-864209",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"criteoclient",params:{networkId:502}}]}),e.adUnits.push({code:"advert_tmg_bbb-864215",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"criteoclient",params:{networkId:502}}]}),i=0;i<=e.dyncount-1;i++)e.adUnits.push({code:"advert_tmg_dyn_"+i+"-864212",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"criteoclient",params:{networkId:502}}]});for(i=0;i<=e.dyncount-1;i++)e.adUnits.push({code:"advert_tmg_dyn_"+i,mediaTypes:{banner:{sizes:[[300,250],[300,215],[300,189],[1,1]]}},bids:[{bidder:"teadsclient",params:{placementId:"99348",pageId:"91661"}}]});for(e.adUnits.push({code:"advert_tmg_dyn_0",mediaTypes:{video:{playerSize:[640,360],mimes:["video/mp4"],context:"outstream"}},bids:[{bidder:"teadsclient",params:{pageId:"114348",placementId:"124194,",video:{skippable:!0,playback_method:["auto_play_sound_off"]}}}]}),e.adUnits.push({code:"advert_tmg_nat_story_top-12348",mediaTypes:{banner:{sizes:[[1,1]]}},bids:[{bidder:"tripleliftclient",params:{inventoryCode:"12348"}}]}),"gb"!=tmgAds.page.geo&&(e.adUnits.push({code:"advert_tmg_nat_story_sparkbrain_1-12359",mediaTypes:{banner:{sizes:[[1,1]]}},bids:[{bidder:"tripleliftclient",params:{inventoryCode:"12359"}}]}),e.adUnits.push({code:"advert_tmg_nat_story_sparkbrain_2-12359",mediaTypes:{banner:{sizes:[[1,1]]}},bids:[{bidder:"tripleliftclient",params:{inventoryCode:"12359"}}]})),e.adUnits.push({code:"advert_tmg_ban-323079",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"ix",params:{siteId:"323079",size:[728,90]}}]}),e.adUnits.push({code:"advert_tmg_bbb-323081",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"ix",params:{siteId:"323081",size:[728,90]}}]}),i=0;i<=e.dyncount-1;i++)e.adUnits.push({code:"advert_tmg_dyn_"+i+"-323084",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"ix",params:{siteId:"323084",size:[300,250]}},{bidder:"ix",params:{siteId:"323084",size:[320,50]}}]});e.adUnits.push({code:"advert_tmg_dyn_0",mediaTypes:{video:{playerSize:[640,360],mimes:["video/mp4"],context:"outstream"}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204201",placementId:"0420420616",lotameData:tmgAds.plugins.lotame.data,customData:e.customData,video:{skippable:!0,playback_method:["auto_play_sound_off"]}}}]})}if("xs"==tmgAds.layout.viewport||"s"==tmgAds.layout.viewport)if("index"==tmgAds.page.pagetype||"topic"==tmgAds.page.pagetype||"video-index"==tmgAds.page.pagetype||"travel-destinations"==tmgAds.page.pagetype){for(i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-1420420627",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"1420420627",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-1420420628",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"1420420628",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]});for(e.adUnits.push({code:"advert_tmg_mpu-12427875",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"appnexusgmsm",params:{placementId:"12427875",keywords:{vp:tmgAds.dfp.customvars.vp,pt:tmgAds.dfp.customvars.pt,div:"advert_tmg_mpu"}}}]}),i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-12427875",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"appnexusgmsm",params:{placementId:"12427875",keywords:{vp:tmgAds.dfp.customvars.vp,pt:tmgAds.dfp.customvars.pt,div:"advert_tmg_bin_"+i}}}]});for(i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-15611953",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"appnexusclient",params:{placementId:"15611953",keywords:{section:[tmgAds.page.section]}}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-15611987",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"appnexusclient",params:{placementId:"15611987",keywords:{section:[tmgAds.page.section]}}}]});for(i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-540666554",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"openxclient",params:{unit:"540666554",delDomain:"telegraph-d.openx.net"}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-540666555",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"openxclient",params:{unit:"540666555",delDomain:"telegraph-d.openx.net"}}]});for(i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-1237290",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1237290",position:"atf"}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-1237292",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1237292",position:"atf"}}]});for(i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-864221",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"criteoclient",params:{networkId:502}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-864222",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"criteoclient",params:{networkId:502}}]});for(i=0;i<=e.bincount-1;i++)e.adUnits.push({code:"advert_tmg_bin_"+i+"-356077",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"ix",params:{siteId:"323087",size:[300,250]}},{bidder:"ix",params:{siteId:"323087",size:[320,50]}}]});for(i=0;i<=e.lmpucount-1;i++)e.adUnits.push({code:"advert_tmg_lmpu_"+i+"-356078",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"ix",params:{siteId:"323087",size:[300,250]}},{bidder:"ix",params:{siteId:"323087",size:[320,50]}}]})}else{for(e.adUnits.push({code:"advert_tmg_ban-0420420607",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"0420420607",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]}),e.adUnits.push({code:"advert_tmg_bbb-0420420619",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"0420420619",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]}),e.adUnits.push({code:"advert_tmg_mpu-0420420608",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"0420420608",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]}),e.adUnits.push({code:"advert_tmg_hpg-0420420609",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"0420420609",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]}),i=0;i<=e.dyncount-1;i++)e.adUnits.push({code:"advert_tmg_dyn_"+i+"-0420420610",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204210",placementId:"0420420610",lotameData:tmgAds.plugins.lotame.data,customData:e.customData}}]}),window.location.search.indexOf("pbtest")>=0&&(console.log("tmgAdsPrebidReturnAdUnits: issuing test Unruly"),e.adUnits.push({code:"advert_tmg_dyn_"+i+"-0420420424",mediaTypes:{video:{playerSize:[640,480],mimes:["video/mp4"],context:"outstream"}},bids:[{bidder:"ozone",params:{publisherId:"OZONETEST001",siteId:"4204204201",placementId:"9420420424",lotameData:tmgAds.plugins.lotame.data,customData:e.customData,video:{skippable:!0,playback_method:["auto_play_sound_off"]}}}]}));for(e.adUnits.push({code:"advert_tmg_ban-16143575",mediaTypes:{banner:{sizes:[[320,50]]}},bids:[{bidder:"appnexusgmsm",params:{placementId:"16143575",keywords:{vp:tmgAds.dfp.customvars.vp,pt:tmgAds.dfp.customvars.pt,div:"advert_tmg_ban"}}}]}),e.adUnits.push({code:"advert_tmg_mpu-12674818",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"appnexusgmsm",params:{placementId:"12674818",keywords:{vp:tmgAds.dfp.customvars.vp,pt:tmgAds.dfp.customvars.pt,div:"advert_tmg_mpu"}}}]}),e.adUnits.push({code:"advert_tmg_mpu-12427875",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"appnexusgmsm",params:{placementId:"12427875",keywords:{vp:tmgAds.dfp.customvars.vp,pt:tmgAds.dfp.customvars.pt,div:"advert_tmg_mpu"}}}]}),i=0;i<=e.dyncount-1;i++)e.adUnits.push({code:"advert_tmg_dyn_"+i+"-12427875",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"appnexusgmsm",params:{placementId:"12427875",keywords:{vp:tmgAds.dfp.customvars.vp,pt:tmgAds.dfp.customvars.pt,div:"advert_tmg_dyn_"+i}}}]});for(e.adUnits.push({code:"advert_tmg_ban-9979622",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"appnexusclient",params:{placementId:"9979622",keywords:{section:[tmgAds.page.section]}}}]}),e.adUnits.push({code:"advert_tmg_bbb-15612020",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"appnexusclient",params:{placementId:"15612020",keywords:{section:[tmgAds.page.section]}}}]}),e.adUnits.push({code:"advert_tmg_mpu-9979654",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"appnexusclient",params:{placementId:"9979654",keywords:{section:[tmgAds.page.section]}}}]}),e.adUnits.push({code:"advert_tmg_hpg-9979665",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"appnexusclient",params:{placementId:"9979665",keywords:{section:[tmgAds.page.section]}}}]}),i=0;i<=e.dyncount-1;i++)e.adUnits.push({code:"advert_tmg_dyn_"+i+"-11433632",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"appnexusclient",params:{placementId:"11433632",keywords:{section:[tmgAds.page.section]}}}]});for(e.adUnits.push({code:"advert_tmg_ban-540231759",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"openxclient",params:{unit:"540231759",delDomain:"telegraph-d.openx.net"}}]}),e.adUnits.push({code:"advert_tmg_bbb-540666556",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"openxclient",params:{unit:"540666556",delDomain:"telegraph-d.openx.net"}}]}),e.adUnits.push({code:"advert_tmg_mpu-540231760",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"openxclient",params:{unit:"540231760",delDomain:"telegraph-d.openx.net"}}]}),e.adUnits.push({code:"advert_tmg_hpg-540231762",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"openxclient",params:{unit:"540231762",delDomain:"telegraph-d.openx.net"}}]}),i=0;i<=e.dyncount-1;i++)e.adUnits.push({code:"advert_tmg_dyn_"+i+"-540231763",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"openxclient",params:{unit:"540231763",delDomain:"telegraph-d.openx.net"}}]});for(e.adUnits.push({code:"advert_tmg_ban-1110756",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1110756",position:"btf"}}]}),e.adUnits.push({code:"advert_tmg_bbb-1233500",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1233500",position:"btf"}}]}),e.adUnits.push({code:"advert_tmg_mpu-1110762",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1110762",position:"btf"}}]}),e.adUnits.push({code:"advert_tmg_hpg-1110760",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1110760",position:"btf"}}]}),i=0;i<=e.dyncount-1;i++)e.adUnits.push({code:"advert_tmg_dyn_"+i+"-1110758",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"rubicon",params:{accountId:"8560",siteId:"226006",zoneId:"1110758",position:"btf"}}]});for(e.adUnits.push({code:"advert_tmg_ban-864217",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"criteoclient",params:{networkId:502}}]}),e.adUnits.push({code:"advert_tmg_bbb-864223",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"criteoclient",params:{networkId:502}}]}),i=0;i<=e.dyncount-1;i++)e.adUnits.push({code:"advert_tmg_dyn_"+i+"-864220",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"criteoclient",params:{networkId:502}}]});for(e.adUnits.push({code:"advert_tmg_mpu",mediaTypes:{banner:{sizes:[[300,250],[300,215],[300,189],[1,1]]}},bids:[{bidder:"teadsclient",params:{placementId:"99344",pageId:"91657"}}]}),e.adUnits.push({code:"advert_tmg_hpg",mediaTypes:{banner:{sizes:[[300,250],[300,215],[300,189],[1,1]]}},bids:[{bidder:"teadsclient",params:{placementId:"101185",pageId:"93419"}}]}),e.adUnits.push({code:"advert_tmg_bbb",mediaTypes:{banner:{sizes:[[300,250],[300,215],[300,189],[1,1]]}},bids:[{bidder:"teadsclient",params:{placementId:"102335",pageId:"94519"}}]}),i=0;i<=e.dyncount-1;i++)e.adUnits.push({code:"advert_tmg_dyn_"+i,mediaTypes:{banner:{sizes:[[300,250],[300,215],[300,189],[1,1]]}},bids:[{bidder:"teadsclient",params:{placementId:"99345",pageId:"91658"}}]});for(e.adUnits.push({code:"advert_tmg_dyn_0",mediaTypes:{video:{playerSize:[640,360],mimes:["video/mp4"],context:"outstream"}},bids:[{bidder:"teadsclient",params:{pageId:"114348",placementId:"124194,",video:{skippable:!0,playback_method:["auto_play_sound_off"]}}}]}),e.adUnits.push({code:"advert_tmg_nat_story_top-12346",mediaTypes:{banner:{sizes:[[1,1]]}},bids:[{bidder:"tripleliftclient",params:{inventoryCode:"12346"}}]}),"gb"!=tmgAds.page.geo&&(e.adUnits.push({code:"advert_tmg_nat_story_sparkbrain_1-12359",mediaTypes:{banner:{sizes:[[1,1]]}},bids:[{bidder:"tripleliftclient",params:{inventoryCode:"12359"}}]}),e.adUnits.push({code:"advert_tmg_nat_story_sparkbrain_2-12359",mediaTypes:{banner:{sizes:[[1,1]]}},bids:[{bidder:"tripleliftclient",params:{inventoryCode:"12359"}}]})),e.adUnits.push({code:"advert_tmg_ban-323085",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"ix",params:{siteId:"323085",size:[300,250]}},{bidder:"ix",params:{siteId:"323085",size:[320,50]}}]}),e.adUnits.push({code:"advert_tmg_bbb-357827",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"ix",params:{siteId:"357827",size:[300,250]}},{bidder:"ix",params:{siteId:"357827",size:[320,50]}}]}),e.adUnits.push({code:"advert_tmg_mpu-323088",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"ix",params:{siteId:"323088",size:[300,250]}},{bidder:"ix",params:{siteId:"323088",size:[320,50]}}]}),e.adUnits.push({code:"advert_tmg_hpg-323087",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"ix",params:{siteId:"323087",size:[300,250]}},{bidder:"ix",params:{siteId:"323087",size:[320,50]}}]}),i=0;i<=e.dyncount-1;i++)e.adUnits.push({code:"advert_tmg_dyn_0-323086",mediaTypes:{banner:{sizes:[[300,250],[320,50]]}},bids:[{bidder:"ix",params:{siteId:"323086",size:[300,250]}},{bidder:"ix",params:{siteId:"323086",size:[320,50]}}]});e.adUnits.push({code:"advert_tmg_dyn_0",mediaTypes:{video:{playerSize:[640,360],mimes:["video/mp4"],context:"outstream"}},bids:[{bidder:"ozone",params:{publisherId:"OZONETMG0001",siteId:"4204204201",placementId:"0420420610",lotameData:tmgAds.plugins.lotame.data,customData:e.customData,video:{skippable:!0,playback_method:["auto_play_sound_off"]}}}]})}return e.adUnits}function tmgAdsPerf(e,t){if(void 0!==window.RUM){if(tmgAdsLog("SUCCESS: RUM installed.... go go go go! - "+e+" - "+t[0]),"now"==e)return RUM.now();if("mark"==e)return tmgAds.metrics[t[0]]=tmgAdsTimer(),RUM.mark(t[0]);if("measure"==e)return RUM.measure(t[0],t[1],t[2])}else if(void 0!==window.performance){if(tmgAdsLog("WARNING: RUM NOT installed.... using window.performance API instead! - "+e+" - "+t[0]),tmgAds.log.push("Performance: RUM Not installed, using performance API - "+e+" - "+t[0]),"now"==e)return window.performance.now();if("mark"==e)return tmgAds.metrics[t[0]]=tmgAdsTimer(),window.performance.mark(t[0]);if("measure"==e)return window.performance.measure(t[0],t[1],t[2])}else{if(tmgAdsLog("WARNING: RUM NOT installed AND window.performance not supported... - "+e+" - "+t[0]),tmgAds.log.push("Performance: No RUM, No perrformance API - "+e+" - "+t[0]),"now"==e)return RUM.now();if("mark"==e)return void(tmgAds.metrics[t[0]]=tmgAdsTimer());if("measure"==e)return}}function tmgAdsGetObj(e){return window[e]}function tmgAdsInitConfig(){try{tmgAdsEvent("tmggpt-init-conf:start"),tmgAds.config={viewportstatus:!0,refurl:!0},tmgAds.config.deliveryModels=tmgAds.model,tmgAds.prodServers.indexOf(window.location.host)>=0?tmgAds.config.productionAds=!0:(console.log("ADTECH: non-production server - turn on production ads on this page by adding url-param ?adsShowProductionAds"),tmgAds.config.productionAds=!1),window.location.href.indexOf("adsShowProductionAds")>=0&&(console.log("ADTECH: Turning on production ads through url param -> adsShowProductionAds"),tmgAds.config.productionAds=!0),tmgAdsLog("SUCCESS: tmgAdsInitConfig() initialisation"),tmgAdsLog("##################################################################################################################"),tmgAdsEvent("tmggpt-init-conf:end")}catch(e){tmgAdsLog("ERROR: tmgAdsInitConfig() failed -> error="+e.message),tmgAdsEvent("tmggpt-init-conf:end")}}function tmgAdsInitData(){for(var e in tmgAdsEvent("tmggpt-init-data:start"),tmgAds.counters={},tmgAds.metatags={},tmgAds.page=tmgAdsGetPageData(),tmgAds.tmg=tmgAdsGetTMGUserData(),tmgAds.google=tmgAdsGetGoogleData(),tmgAds.adobe=tmgAdsGetAdobe(),tmgAds.browser=tmgAdsGetBrowserData(),tmgAds.cookies={all:document.cookie},tmgAds.cookies.adops=tmgAdsGetTMGCookies("adops"),tmgAds.page.cms=tmgAdsGetCMS(),tmgAds.plugins.blockdomain)tmgAds.plugins.blockdomain.hasOwnProperty(e)&&tmgAds.page.domain==tmgAds.plugins.blockdomain[e]&&(tmgAds.plugins.adkill=!0,tmgAdsLog("tmgAdsInitConfig: This page is being viewed through one of our AEM preview instances, turning ads off in: "+tmgAds.plugins.blockdomain[e]));tmgAdsLog("SUCCESS: tmgAdsInitData() initialisation"),tmgAdsLog("##################################################################################################################"),tmgAdsEvent("tmggpt-init-data:end")}function tmgAdsInitDFP(){tmgAdsEvent("tmggpt-init-dfp:start"),tmgAds.dfp=tmgAdsGetDFPData(),tmgAdsUpdateDFPCustomVars(),tmgAds.dfp.gpt=tmgAdsGetGPTSetup(tmgAds.dfp.gpt),tmgAds.dfp.adunit="/"+tmgAds.dfp.networkid+"/"+tmgAds.dfp.sitezone,tmgAdsLog("AdUnit set to: "+tmgAds.dfp.adunit),tmgAds.geo=tmgAdsGetGeoAPI(),tmgAdsAdjustSizeMapping(),tmgAds.adCount=0,tmgAds.dynCount=0,tmgAdsEvent("tmggpt-init-dfp:end")}function tmgAdsInitEventHandlers(){tmgAdsLog("Called: tmgAdsInitEventHandlers()");try{googletag.cmd.push(function(){googletag.pubads().addEventListener("slotRenderEnded",function(e){tmgAdsActionEventHandler("slotRenderEnded",e)}),googletag.pubads().addEventListener("impressionViewable",function(e){tmgAdsActionEventHandler("impressionViewable",e)}),googletag.pubads().addEventListener("slotVisibilityChanged",function(e){tmgAdsActionEventHandler("slotVisibilityChanged",e)})}),document.addEventListener("tmg:init-ads",function(e){for(var t in tmgAdsEvent("tmggpt-init-ads:start"),tmgAdsInitData(),tmgAdsInitDFP(tmgAds),tmgAds.ads)tmgAds.ads.hasOwnProperty(t)&&(googletag.destroySlots([tmgAds.ads[t].adslot]),googletag.cmd.push(tmgAdsBuildAd(tmgAds.ads[t].div,"","").display()));tmgAdsEvent("tmggpt-init-ads:end")}),document.addEventListener("tmgAds:tmggpt-revertStickyBanner",function(e){tmgAdsActionEventHandler("tmgAds_tmggpt-revertStickyBanner")}),document.addEventListener("tmgAds:tmggpt-collapseStickyAdslot",function(e){tmgAdsActionEventHandler("tmgAds_tmggpt-collapseStickyAdslot")}),document.addEventListener("tmgAds:tmggpt:initstart",function(e){tmgAdsPerf("mark",["adverts_tmggpt_start"])}),document.addEventListener("tmgAds:tmggpt:initend",function(e){tmgAdsPerf("mark",["adverts_tmggpt_end"]),tmgAdsPerf("measure",["adverts_tmggpt_loadtime","adverts_tmggpt_start","adverts_tmggpt_end"])}),document.addEventListener("tmgAds:tmggpt:pageload",function(e){tmgAdsPerf("mark",["adverts_tmggpt_pageload"]),tmgAdsPerf("mark",["adverts_page_end"])}),document.addEventListener("tmgAds:headerbid:reload",function(e){tmgAdsPerf("mark",["adverts_headerbid_reload"]),tmgAdsInitHeaderBidders()})}catch(e){tmgAdsLog("ERROR: tmgAdsInitEventHandlers() - failed -> error="+e.message)}}function tmgAdsActionEventHandler(e,t){try{switch(e){case"tmgAds_tmggpt-revertStickyBanner":tmgAdsLog("tmgAds_tmggpt-revertStickyBanner: removing is-sticky class from advert_tmg_ban"),document.querySelector(".is-sticky").classList.remove("is-sticky"),tmgAds.plugins.mytelegraph.isApplied&&(document.getElementsByClassName("my-telegraph")[0].style.top="0px");break;case"tmgAds_tmggpt-collapseStickyAdslot":tmgAdsLog("We will now close down the sticky ad for the this adunit: "+tmgAds.config.deliveryModel.model),document.getElementById("advert_tmg_"+tmgAds.config.deliveryModel.model).style.height="0px",setTimeout(function(){document.getElementsByClassName("is-sticky")[0].style.height="0px"},1e3);break;case"slotRenderEnded":var s={event:t,timestamp:tmgAdsTimer(),advertiserId:t.advertiserId,campaignId:t.campaignId,lineItemId:t.lineItemId,creativeId:t.creativeId,sourceAgnosticCreativeId:t.sourceAgnosticCreativeId,sourceAgnosticLineItemId:t.sourceAgnosticLineItemId,esid:null,epid:null,moat:"https://z.moatads.com/telegraphdfp799172313855/moatad.js#moatClientLevel1="+t.advertiserId+"&moatClientLevel2="+t.camapignId+"&moatClientLevel3="+t.lineItemId+"&moatClientLevel4="+t.creativeId+"&moatClientSlicer1=null&moatClientSlicer2=null&zMoatPS="+String(t.slot.getTargeting("at"))+"&zMoatSZ="+String(t.size[0]+"x"+t.size[1])+"&zMoatPT="+String(t.slot.getTargeting("pt"))+"&zMoatVP="+String(t.slot.getTargeting("vp"))+"&zMoatOP=null&zMoatST="+String(t.slot.getTargeting("sc")),sz:String(t.size[0]+"x"+t.size[1]),natid:String(t.slot.getTargeting("natid")),nattype:String(t.slot.getTargeting("nattype")),div:String(t.slot.getTargeting("div")),pos:String(t.slot.getTargeting("pos")),at:String(t.slot.getTargeting("at")),pt:String(t.slot.getTargeting("pt")),vp:String(t.slot.getTargeting("vp")),sc:String(t.slot.getTargeting("sc"))};tmgAds.data.ads[s.div]=tmgAds.data.ads[s.div]||[],tmgAds.data.ads[s.div].push(s),tmgAdsLog("EVENT: "+e+" lineItemId:"+t.lineItemId+"  -  creativeId:"+t.creativeId+" - size:"+t.size+" - isEmpty:"+t.isEmpty+" - slotContentChanged:"+t.slotContentChanged,t),void 0===tmgAds.metrics.tmggptAdFirstAdRendered&&(tmgAdsLog("tmgAds.metrics.tmggptAdFirstAdRendered is not defined, setting this now"),tmgAdsPerf("mark",["adverts_metrics_firstadloaded"]),tmgAds.metrics.tmggptAdFirstAdRendered=s.timestamp,tmgAds.metrics.metricTimeToRenderFirstAd=tmgAds.metrics.tmggptAdFirstAdRendered),tmgAdsPerf("mark",["adverts_loaded_"+s.at]),tmgAds.metrics.tmggptAdLastAdRendered=s.timestamp,tmgAds.metrics.metricTimeToRenderAllAds=tmgAds.metrics.tmggptAdLastAdRendered-tmgAds.metrics.tmggptAdFirstAdQueued;var d=document.getElementById(s.div);t.isEmpty?(d.classList.add("is-empty"),d.classList.remove("is-loaded"),d.style.height=0,d.style.opacity=0,tmgAdsLog("Ad is EMPTY we have nothing to transition - "+s.div)):(d.classList.add("is-loaded"),d.classList.remove("is-empty"),"nat"==s.at?(-1!=s.natid.indexOf("nat_story_list_onward_mob")&&(d.style.marginTop="-16px",d.style.marginBottom="-16px"),"nat_story_sparkbrain_1"!=s.natid&&"nat_story_sparkbrain_2"!=s.natid&&"nat_story_outbrain"!=s.natid||(("x"==s.vp||"l"==s.vp||"m"==s.vp)&&(s.marginBottom="0px"),("xs"==s.vp||"s"==s.vp)&&(s.marginBottom="0px"),d.style.marginBottom=s.marginBottom,tmgAdsLog("NATIVE:: "+s.natid+" :: vp="+s.vp+" :: setting marginBottom = "+s.marginBottom)),d.style.height="auto"):d.style.height=t.size[1]+"px",d.style.opacity=1,"mpu"!=s.at&&"hpg"!=s.at||"x"!=s.vp&&"l"!=s.vp||(d.style.width=t.size[0]+"px"),"mytelegraph"==tmgAds.page.businessseg&&("x"==s.vp||"l"==s.vp||"m"==s.vp?d.style.height=t.size[1]+15+"px":(d.style.height=t.size[1]+30+"px",d.style.paddingTop="15px")),!tmgAds.plugins.mytelegraph.isApplied||"desktop"!=tmgAds.plugins.mytelegraph.isPlatform||"ban"!=s.at&&"mpu"!=s.at||("mpu"==s.at&&("story"==tmgAds.page.pagetype||"live"==tmgAds.page.pagetype||tmgAds.page.pagetype),"ban"!=s.at||"index"!=tmgAds.page.pagetype&&"topic"!=tmgAds.page.pagetype||"m"!=tmgAds.layout.viewport&&"ban"==tmgAds.config.deliveryModel.activityStatus&&(document.getElementsByClassName("my-telegraph")[0].style.top=t.size[1]+16+"px")),tmgAdsLog("Ad is rendered, transition height/opacity")),void 0!==tmgAds.metrics.ads[s.at]&&(tmgAds.metrics.ads[s.at].rendered=tmgAdsTimer(),tmgAds.metrics.ads[s.at].rendertime=Number((tmgAds.metrics.ads[s.at].rendered-tmgAds.metrics.ads[s.at].queued).toFixed(3))),tmgAds.plugins.adviewability&&(console.log("VIEWABILITY: we are testing non-creative-wrapper delivered "),tmgAdsLoadJS("moat-"+s.div,s.moat,{},function(){console.log("VIEWABILITY: Moat")}),tmgAdsLoadJS("ias-"+s.div,s.ias,{},function(){console.log("VIEWABILITY: IAS")}));break;case"impressionViewable":tmgAds.metrics.ads[t.slot.getTargeting("at")].viewable=!0;break;case"slotVisibilityChanged":tmgAdsLog("EVENT: "+e+" lineItemId:"+t.lineItemId+"  -  creativeId:"+t.creativeId+" - size:"+t.size+" - isEmpty:"+t.isEmpty+" - slotContentChanged:"+t.slotContentChanged,t),tmgAds.metrics.ads[t.slot.getTargeting("at")].viewability=t.inViewPercentage,tmgAds.metrics.ads[t.slot.getTargeting("at")].creativeId=t.creativeId,t.inViewPercentage<50&&tmgAds.config.deliveryModel.sticky&&t.slot.getTargeting("at")==tmgAds.config.deliveryModel.model&&(tmgAds.config.viewportstatus=!1,tmgAdsLog("EVENT: Viewability Changed - "+t.inViewPercentage),tmgAdsLog("PAUSE ad due to viewability < 100% - ["+t.inViewPercentage+"]")),t.inViewPercentage>=50&&tmgAds.config.deliveryModel.sticky&&t.slot.getTargeting("at")==tmgAds.config.deliveryModel.model&&(tmgAds.config.viewportstatus=!0,tmgAdsLog("EVENT: Viewability Changed - "+t.inViewPercentage),tmgAdsLog("START ad has returned to 100%"));break;case"impressionViewable":tmgAdsLog("EVENT: "+e+" lineItemId:"+t.lineItemId+"  -  creativeId:"+t.creativeId+" - size:"+t.size+" - isEmpty:"+t.isEmpty+" - slotContentChanged:"+t.slotContentChanged,t)}}catch(e){tmgAdsLog("ERROR: tmgAdsActionEventHandler() - failed -> error="+e.message,t)}}function tmgAdsInitGeoAPIStatus(){try{void 0!==window.googletag?tmgAds.plugins.gpt.setLocation?(tmgAdsLog("tmgAdsGeoAPIStatus: obj.plugins.gpt.setLocation is ACTIVATED for this site - now lets check if the browsers currently supports the Geo-API feature"),1==tmgAds.geo.supported?(tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.supported IS supported - now lets check if the browser supports this feature"),1==tmgAds.geo.available?(tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.available IS available - setting the following: googletag.setLocation("+tmgAds.geo.api.longitude+", "+tmgAds.geo.api.latitude+", "+tmgAds.geo.api.accuracy+") [longitude,latitude,accuracy]"),googletag.cmd.push(function(){googletag.setLocation(tmgAds.geo.api.longitude,tmgAds.geo.api.latitude,tmgAds.geo.api.accuracy)})):tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.available IS NOT available")):tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.supported IS NOT supported.")):tmgAdsLog("tmgAdsGeoAPIStatus: obj.plugins.gpt.setLocation is NOT ACTIVATED for this site."):tmgAdsLog("tmgAdsGeoAPIStatus: WARNING: googletag obj does not exist")}catch(e){tmgAdsLog("ERROR: tmgAdsInitGeoAPIStatus() - failed -> error="+e.message,event)}}function tmgAdsGetSizeMatrix(){tmgAdsLog("Called");return{ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60]],mpu:[[300,1050],[300,600],[300,250]],sky:[[300,1050],[300,600],[300,250],[160,600],[120,600]],hpg:[[300,1050],[300,600],[300,250],[160,600],[120,600]],mob:[[300,250],[320,100],[320,50],[300,50]],nat:"fluid",com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"}}function tmgAdsGetDFPData(){var e={pos:0,tile:0,adserver:tmgAds.plugins.gpt.servername,networkid:tmgAds.plugins.gpt.networkid,site:tmgAds.page.site,sitename:"tmg.telegraph."+tmgAds.page.site,zonename:tmgAds.page.zone.substr(0,100),sitezone:"tmg.telegraph."+tmgAds.page.site+"/"+tmgAds.page.zone.substr(0,100),ord:Number(new Date)};return tmgAds.plugins.adteston&&(console.log("tmgAdsGetDFPData: adteston has been declared, we now change adunits to tmg.telegraph.test/test"),e.site="test",e.sitename="tmg.telegraph.test",e.zonename="tmg.telegraph.test/test",e.sitezone="tmg.telegraph.test/test"),tmgAdsLog("tmgads.dfp.site     = "+e.site),tmgAdsLog("tmgads.dfp.sitename = "+e.sitename),tmgAdsLog("tmgads.dfp.zonename = "+e.zonename),tmgAdsLog("tmgads.dfp.sitezone = "+e.sitezone),e}function tmgAdsAdjustSizeMapping(){tmgAdsLog("Called"),"puzzles"==tmgAds.dfp.site&&(tmgAdsLog("ALERT: site is not covered by default sizeing values, we are resetting these now -> at=ban -> site="+tmgAds.dfp.site),tmgAds.config.adsizematrix.ban=[[468,60],[728,90],[900,250],[940,250]],tmgAds.plugins.sizemapping.x.ban=[[468,60],[728,90],[900,250],[940,250]],tmgAds.plugins.sizemapping.l.ban=[[468,60],[728,90],[900,250],[940,250]],tmgAds.plugins.sizemapping.m.ban=[[468,60],[728,90],[900,250],[940,250]],tmgAds.plugins.sizemapping.s.ban=[[468,60],[728,90],[900,250],[940,250]],tmgAds.plugins.sizemapping.xs.ban=[[468,60],[728,90],[900,250],[940,250]]),"fantasyfootball"==tmgAds.dfp.site&&(tmgAdsLog("ALERT: site is not covered by default sizing values, we are resetting these now -> site="+tmgAds.dfp.site),tmgAds.config.adsizematrix.ban=[728,90],tmgAds.plugins.sizemapping.x.ban=[728,90],tmgAds.plugins.sizemapping.l.ban=[728,90],tmgAds.plugins.sizemapping.m.ban=[728,90],tmgAds.plugins.sizemapping.s.ban=[320,50],tmgAds.plugins.sizemapping.xs.ban=[320,50],tmgAds.config.adsizematrix.mpu=[[300,250],[300,600]],tmgAds.plugins.sizemapping.x.mpu=[[300,250],[300,600]],tmgAds.plugins.sizemapping.l.mpu=[[300,250],[300,600]],tmgAds.plugins.sizemapping.m.mpu=[[300,250],[300,600]],tmgAds.plugins.sizemapping.s.mpu=[300,250],tmgAds.plugins.sizemapping.xs.mpu=[300,250]),"courses"!=tmgAds.dfp.site&&"clearing"!=tmgAds.dfp.site||(tmgAds.config.adsizematrix.mpu=[300,250],tmgAds.plugins.sizemapping.x.mpu=[300,250],tmgAds.plugins.sizemapping.l.mpu=[300,250],tmgAds.plugins.sizemapping.m.mpu=[300,250],tmgAds.plugins.sizemapping.s.mpu=[300,250],tmgAds.plugins.sizemapping.xs.mpu=[300,250])}function tmgAdsGetCMS(){tmgAdsLog("Called:");var e="unknown";return tmgAdsLog("ascertaining which CMS is being used"),tmgAdsLog("tmgAds.page.businessseg="+tmgAds.page.businessseg),null===tmgAds.page.businessseg||void 0===tmgAds.page.businessseg?(tmgAdsLog("would appear we are using eScenic"),e="escenic"):(tmgAdsLog("would appear we are using AEM"),e="aem"),tmgAdsLog("returning the following values cms="+e),e}function tmgAdsGetAdobe(){var e,t,s={amcv:"unavailable",aam_uuid:"unavailable"};return void 0!==window._satellite?(s.amcv=window._satellite.getVisitorId().getMarketingCloudVisitorID(),s.aam_uuid=tmgAdsGetCookie("aam_uuid")):tmgAdsLog("WARNING:: Adobe _satellite object no available...."),tmgAds.plugins.adobe.active&&(s.aam_cookie=tmgAdsGetCookie(tmgAds.plugins.adobe.tmgCookieName),void 0!==s.aam_cookie&&(s.dfp_raw=s.aam_cookie.substring(tmgAds.plugins.adobe.aamCookieName.length+1),s.dfp_segments=(e=s.dfp_raw.split("-"),t=[],e.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),t))),s}function tmgAdsGetGoogleData(){tmgAdsLog("Called:");return{}}function tmgAdsGetTMGUserData(){var e={premt:!1,premo:tmgAds.page.dataLayer.premiumOverride,premc:tmgAds.page.dataLayer.premiumContent,session:tmgAdsGetCookie("tmg_session"),rem:tmgAdsGetCookie("tmg_rem"),pid:tmgAdsGetCookie("tmg_pid"),p13n:tmgAdsGetCookie("tmg_p13n"),tmg_subs_referer:tmgAdsGetCookie("tmg_subs_referer"),tmg_authz_session:tmgAdsGetCookie("tmg_authz_session"),tmg_meter_count:tmgAdsCsvToObj(tmgAdsGetCookie("tmg_meter_count"),",",":"),tmg_web_trends:tmgAdsCsvToObj(tmgAdsGetCookie("tmg_web_trends"),",",":"),isSubscriber:"no",isRegistered:"no",isLoggedIn:"no",isAnon:"yes",userState:"anon",profile:{}};if(tmg.hasOwnProperty("pubsub")&&tmg.pubsub.hasOwnProperty("publishedTopics")&&(-1!=tmg.pubsub.publishedTopics.indexOf("tmg.piano.paywall.triggered")?(console.log("ADTECH: tmgAdsGetTMGUserData - tmg.piano.paywall.triggered EXISTS"),e.premt=!0):tmg.pubsub.subscribe({topic:"tmg.piano.paywall.triggered",func:function(){tmgAds.tmg.premt=!0},runIfAlreadyPublished:!0})),"object"==typeof window.tmg)if(tmg.hasOwnProperty("user")){tmg.user.hasOwnProperty("isSubscriber")&&(e.isSubscriber=tmg.user.isSubscriber(),e.isSubscriber&&(e.isAnon="no")),tmg.user.hasOwnProperty("isRegistered")&&(e.isRegistered=tmg.user.isRegistered(),e.isRegistered&&(e.isAnon="no")),tmg.user.hasOwnProperty("isLoggedIn")&&(e.isLoggedIn=tmg.user.isLoggedIn(),e.isLoggedIn&&(e.isAnon="no"));try{tmg.user.hasOwnProperty("getProfile")&&(e.profile=tmg.user.getProfile())}catch(e){console.log("tmgAdsGetTMGUserData: Error accessing tmg.user.getProfile() (prob single quotes in JSON object parsing on tmg.user.getProfile() ) -> "+e)}}else e.isSubscriber="unknown",e.isRegistered="unknown",e.isLoggedIn="unknown",e.isAnon="unknown";else"mytelegraph"==tmgAds.page.businessseg?(e.isSubscriber="unknown",e.isRegistered="yes",e.isLoggedIn="yes",e.isAnon="no"):(e.isSubscriber="unknown",e.isRegistered="unknown",e.isLoggedIn="unknown",e.isAnon="unknown");return e.isRegistered&&(e.userState="reg"),e.isSubscriber&&(e.userState="sub"),window.JSON&&void 0!==e.tmg_subs_referer?(tmgAdsLog("window.JSON supported AND tmg_subs_referer cookie exists"),"undefined"!=e.tmg_subs_referer&&(e.tmg_subs_referer=JSON.parse(e.tmg_subs_referer),tmgAdsLog("JSON.parse(tmp.tmg_subs_referer)="+e.tmg_subs_referer))):tmgAdsLog("either window.JSON not supported or no tmg_subs_referer cookie"),tmg.guid?e.guid=tmg.guid:e.guid="unavailable",e}function tmgAdsGetGPTSetup(e){tmgAdsLog("Called:");var t=e||{};if(t.setTargeting=[],t.setTargetingStr=[],t.customvarstr="",void 0!==tmgAds.dfp.customvars)for(var s in tmgAdsLog("tmgAds.dfp.customvars exists - iterating through tmgAds.dfp.customvars"),tmgAds.dfp.customvars)tmgAds.dfp.customvars.hasOwnProperty(s)&&""!==tmgAds.dfp.customvars[s]&&(tmgAds.dfp.customvars[s]instanceof Array?(tmgAdsLog("adding tmgAds.dfp.customvars["+s+"] as Array()"),t.setTargeting.push(".setTargeting('"+s+"',tmgAds.dfp.customvars['"+s+"'])"),t.setTargetingStr+=".setTargeting('"+s+"',tmgAds.dfp.customvars['"+s+"'])"):null!==tmgAds.dfp.customvars[s]?(tmgAdsLog("adding tmgAds.dfp.customvars["+s+"]="+tmgAds.dfp.customvars[s]),t.setTargeting.push(".setTargeting('"+s+"','"+tmgAds.dfp.customvars[s]+"')"),t.setTargetingStr+=".setTargeting('"+s+"','"+tmgAds.dfp.customvars[s]+"')"):tmgAdsLog("tmgAds.dfp.customvars["+s+"] is null, omitting from tag"),t.customvarstr+="&"+s+"="+tmgAds.dfp.customvars[s]);else tmgAdsLog("tmgAds.dfp.customvars does not exist");return t.customvarstr=t.customvarstr.substring(1),t}function tmgAdsUpdateDFPCustomVars(){var e={};void 0!==tmgAds.about.version&&(e.ver=tmgAds.about.version),void 0!==tmgAds.page.section&&(e.sc=tmgAds.page.section),void 0!==tmgAds.page.pagetype&&(e.pt=tmgAds.page.pagetype);try{tmgAds.page.dataLayer&&(e.pr=tmgAds.page.dataLayer.pageType.toLowerCase())}catch(e){console.log("ADTECH: page rendered not available -> tmgAds.page.dataLayer.pageType")}return void 0!==tmgAds.page.level&&(e.lvl=tmgAds.page.level),void 0!==tmgAds.browser.biw&&(e.biw=tmgAds.browser.biw),void 0!==tmgAds.browser.bih&&(e.bih=tmgAds.browser.bih),void 0!==tmgAds.browser.language&&(e.lang=tmgAds.browser.language.toLowerCase()),void 0!==tmgAds.page.protocol&&(e.protocol=tmgAds.page.protocol.substring(0,tmgAds.page.protocol.length-1)),void 0!==tmgAds.page.domain&&(e.rd=tmgAds.page.domain),void 0!==tmgAds.page.topdom&&(e.topdom=tmgAds.page.topdom),void 0!==tmgAds.page.cms&&(e.cms=tmgAds.page.cms),void 0!==tmgAds.page.keywords&&(e.kw=tmgAds.page.keywords),void 0!==tmgAds.page.geo&&(e.geo=tmgAds.page.geo),void 0!==tmgAds.page.editorschoice&&(e.ec=tmgAds.page.editorschoice),void 0!==tmgAds.page.mostviewed&&(e.mv=tmgAds.page.mostviewed),void 0!==tmgAds.page.mostshared&&(e.ms=tmgAds.page.mostshared),void 0!==tmgAds.page.videosrc&&(e.vidsrc=tmgAds.page.videosrc),void 0!==tmgAds.page.articleid&&(e.pg=tmgAds.page.articleid),void 0!==tmgAds.page.gamp&&(e.gamp=tmgAds.page.gamp),void 0!==tmgAds.page.refresh?e.refresh=tmgAds.page.refresh:e.refresh=0,void 0!==tmgAds.page.instanceId&&(e.pvid=tmgAds.page.instanceId),void 0!==tmgAds.page.premadexp?e.premadexp=!0:e.premadexp=!1,void 0!==tmgAds.page.pageDataDFP?e.pagedata=tmgAds.page.pageDataDFP:tmgAds.page.pageDataDFP=["unset"],tmgAds.config.productionAds?e.prod="true":e.prod="false",-1!=window.location.href.indexOf("#source=refresh")&&(e.autoref=1),void 0!==tmgAds.page.docdom&&(e.docdom=tmgAds.page.docdom),void 0!==tmgAds.grapeshot&&(e.gs=tmgAds.grapeshot.dfp),void 0!==tmgAds.layout.viewport&&(e.vp=tmgAds.layout.viewport),tmgAds.page.dataLayer.premiumContent?e.premc=tmgAds.page.dataLayer.premiumContent:e.premc="false",tmgAds.page.dataLayer.premiumOverride?e.premo=tmgAds.page.dataLayer.premiumOverride:e.premo="false",tmgAds.tmg.premt?e.premt=tmgAds.tmg.premt:e.premt="false",void 0!==tmgAds.tmg.tmg_meter_count?e.tmgmvc=tmgAds.tmg.tmg_meter_count.vars.meter_viewed_count:e.tmgmvc="none",void 0!==tmgAds.tmg.tmg_meter_count?e.tmgmu=tmgAds.tmg.tmg_meter_count.vars.meter_user_viewed:e.tmgmu="none",void 0!==tmgAds.tmg.guid&&(e.tmgguid=tmgAds.tmg.guid),"undefined"!=typeof s&&s.prop32!=tmgAds.tmg.guid&&(e.tmgguid=s.prop32),null!==typeof tmgAds.tmg.isSubscriber&&(e.tmgsub=tmgAds.tmg.isSubscriber),null!==typeof tmgAds.tmg.isRegistered&&(e.tmgreg=tmgAds.tmg.isRegistered),null!==typeof tmgAds.tmg.isLoggedIn&&(e.tmglin=tmgAds.tmg.isLoggedIn),null!==typeof tmgAds.tmg.isAnon&&(e.tmganon=tmgAds.tmg.isAnon),null!==typeof tmgAds.tmg.userState&&(e.tmgusr=tmgAds.tmg.userState),void 0!==tmgAds.tmg.pid&&(e.tmgpid=tmgAds.tmg.pid),tmgAds.cmp.loadStatus?e.cmp="true":e.cmp="false",e.cmppurps=tmgAds.cmp.purposes,void 0!==tmgAds.plugins.lotame.dfp?(e.lotpid=tmgAds.plugins.lotame.dfp.pid,e.lottpid=tmgAds.plugins.lotame.dfp.tpid,e.lotsegs=tmgAds.plugins.lotame.dfp.segments):(e.lotpid="unavailable",e.lottpid="unavailable",e.lotsegs="unavailable"),tmgAds.plugins.beemray.dfp.push(tmgAds.plugins.beemray.response),void 0!==tmgAds.plugins.beemray.dfp?e.beemray=tmgAds.plugins.beemray.dfp:e.beemray="none",void 0!==tmgAds.adobe.amcv?e.amcv=tmgAds.adobe.amcv:e.amcv="none",void 0!==tmgAds.adobe.aam_uuid?e.aam=tmgAds.adobe.aam_uuid:e.aam="none",void 0!==tmgAds.adobe.dfp_segments?e.aamseg=tmgAds.adobe.dfp_segments:e.aamseg="none",window.location.search.indexOf("pbcidtest")>=0&&(console.log("ADTECH: Prebid _pubcid is ACTIVE, injecting into DFP call."),void 0!==tmgAds.plugins.prebid.commonId._pubcid?e.pubcid=tmgAds.plugins.prebid.commonId._pubcid:e.pubcid="none"),tmgAds.timeouts?e.timeouts=tmgAds.timeouts:e.timeouts="none",!1!==typeof tmgAds.plugins.adtest&&(e.test=tmgAds.plugins.adtest),tmgAds.plugins.adtest&&(e.test=tmgAds.plugins.adtest),tmgAds.plugins.refurl?e.refurl=tmgAds.page.url:e.refurl="inactive",void 0!==tmgAds.target.targetID&&(e.adbtargettid=tmgAds.target.targetID),void 0!==tmgAds.target.segments&&(e.adbtargetsid=tmgAds.target.segments),void 0!==tmgAds.config.deliveryModel?(e.admodel=tmgAds.config.deliveryModel.activityStatus+"-"+tmgAds.config.deliveryModel.minHeight+"-"+tmgAds.config.deliveryModel.refreshRate+"-"+tmgAds.config.deliveryModel.refreshCycle,e.sticky=0,"default"!==tmgAds.config.deliveryModel.activityStatus&&"none"!==tmgAds.config.deliveryModel.activityStatus&&(e.sticky=1)):console.log("ADTECH: tmgAds.config.deliveryModel not set yet"),tmgAds.dfp.customvars=e,e}function tmgAdsLog(e,t){if("undefined"!=typeof tmgAds&&void 0!==tmgAds.plugins&&void 0!==tmgAds.plugins.adconsole&&!0===tmgAds.plugins.adconsole){var s={time:("00"+(tmgAdsTimer()/1e3).toFixed(5)).slice(-9),callee:null,extra:t,styling:"",css:{none:"background: #FFFFFF; color: #000000",alert:"background: #D4A6A6; color: #000000",success:"background: #B2D8B2; color: #000000",error:"background: #FFB2B2; color: #000000",warning:"background: #FFE4B2; color: #000000",optimizely:"background: #FFDD37: color: #000000",event:"background: #C0CEDC; color: #000000"},msg:e};arguments.callee.caller&&(s.callee=arguments.callee.caller.name),s.msg="[TMG-GPT]["+s.time+"]["+(s.callee+"                         ").substr(0,25)+"]: "+s.msg,tmgAds.log.push(s.msg),console.log(s.msg,s.styling)}}function tmgAdsGetObjSize(e){for(var t=[],s=[e],d=0;s.length;){var i=s.pop();if("boolean"==typeof i)d+=4;else if("string"==typeof i)d+=2*i.length;else if("number"==typeof i)d+=8;else if("object"==typeof i&&-1===t.indexOf(i))for(var a in t.push(i),i)s.push(i[a])}return d/1024}function tmgAdsGetGeoAPI(){tmgAdsLog("Called:");var e={available:0,supported:0,api:{},position:{}};return tmgAds.plugins.gpt.setLocation?(navigator.geolocation.getCurrentPosition(function(t){e.api=t.coords,e.position=t.coords,e.available=1,e.supported=1,tmgAdsLog("GeoAPI success -> position.coords="+t.coords)},function(t){e.available=0,e.supported=-1,tmgAdsLog("GeoAPI failed: "+t)}),tmgAdsLog("navigator.geolocation supported in this browser")):tmgAdsLog("navigator.geolocation not supported in this browser"),e}function tmgAdsGetMetaTag(e){try{var t=null;if(null!==document.getElementsByName(e)[0]&&void 0!==document.getElementsByName(e)[0]){if(tmgAdsLog("tmgAdsGetMetaTag("+e+"): document.getElementsByName('"+e+"')[0] exists"),document.getElementsByName(e)[0].content.length>0&&(t=document.getElementsByName(e)[0].content.toLowerCase(),tmgAdsLog("tmgAdsGetMetaTag("+e+'): "'+(t="tmgads.articleid"==e?decodeURIComponent(document.getElementsByName(e)[0].content):decodeURIComponent(document.getElementsByName(e)[0].content.toLowerCase()))+'"')),"tmgads.keywords"==e)if(null!==t){t=t.split(",");for(var s=0;s<t.length;s++)String.prototype.trim?t[s]=t[s].replace("'","").trim():null!==typeof t[s]?t[s]=t[s].replace(/^\s\s*/,"").replace(/\s\s*$/,"").replace("'",""):tmgAdsLog("tmgAdsGetMetaTag("+e+'): tmp[i] is null -> "'+t[s]+'"'),tmgAdsLog("tmgAdsGetMetaTag("+e+'): tmgads.keywords -> "'+t[s]+'"')}else tmgAdsLog("tmgAdsGetMetaTag("+e+"): tmgads.keywords -> tmgads.keywords content is not set")}else tmgAdsLog("tmgAdsGetMetaTag("+e+"): document.getElementsByName('"+e+"')[0] does not exist -> "+t);return tmgAds.data.metatags[e]=t,t}catch(t){tmgAdsLog("ERROR: tmgAdsGetMetTag("+e+") failed -> error="+t.message)}}function tmgAdsGetPageData(){try{tmgAdsLog("Called:");var e={zone:"unknown",url:location.protocol+"//"+location.host+location.pathname,url_full:location.href,referrer:document.referrer,docdom:document.domain,domain:location.hostname,protocol:location.protocol,search:location.search,topdom:top.location.hostname,gamp:"0",environment:"-"};if("refresh"===tmgAdsGetURLParam("source",window.location.href)?(e.refresh=1,tmgAdsLog("tmgAdsGetPageData: page is a refreshed page")):tmgAdsLog("tmgAdsGetPageData: page is not refreshed"),e.pagetype=tmgAdsGetMetaTag("tmgads.pagetype"),e.articleid=tmgAdsGetMetaTag("tmgads.articleid"),e.geo=tmgAdsGetMetaTag("tmgads.geo"),null===e.pagetype&&(e.pagetype="unset"),e.zone=tmgAdsGetMetaTag("tmgads.zone"),null===e.zone?(e.zone="unknown",e.channel=tmgAdsGetMetaTag("tmgads.channel"),null!==e.channel&&(e.zone=e.channel+".escenic",console.log("tmgAdsGetPageData: tmgads.zone metatag is not populated, setting to tmgads.channel: ",e.channel))):e.zone=e.zone.replace(/\//g,".").replace(/-/g,"").replace(/_/g,""),null!==e.zone.match(/(\d{4})\.(\d{2})\.(\d{2})$/)&&(e.zone=e.zone.substring(0,e.zone.length-11)),e.businessseg=tmgAdsGetMetaTag("tmgads.businessSegment"),"lifestyle/puzzles"==e.zone&&(e.zone="puzzles"),null===e.businessseg||e.businessseg==e.zone.split(".")[0]||(e.zone=e.businessseg+"."+e.zone),e.zonedata=e.zone.split("."),e.level=e.zonedata.length,e.section=e.zone.replace(/\./g,"-").replace(/_/g,""),e.site=e.zonedata[0],e.businessseg,e.site,e.otherdata="",e.keywords=tmgAdsGetMetaTag("tmgads.keywords"),e.mostshared=tmgAdsGetMetaTag("tmgads.mostshared"),e.mostviewed=tmgAdsGetMetaTag("tmgads.mostviewed"),e.parentid=tmgAdsGetMetaTag("tmgads.parentid"),e.product=tmgAdsGetMetaTag("tmgads.product"),e.sensitive=tmgAdsGetMetaTag("tmgads.sensitive"),e.videosrc=tmgAdsGetMetaTag("tmgads.videosrc"),e.sponsor=tmgAdsGetMetaTag("tmgads.sponsor"),e.sourcepoint="-1",-1==document.cookie.indexOf("euconsent")?e.sourcepoint="0":e.sourcepoint="1",("ece_frontpage"==e.section||"ecefrontpage"==e.section)&&(e.section="portal"),("food_and_drink"==e.section||"food-and-drink"==e.section)&&(e.section="foodanddrink"),("food_and_drink"==e.site||"food-and-drink"==e.site)&&(e.site="foodanddrink"),e.dataLayer=window.dataLayer||["unset"],e.pageData=window.pageData||["unset"],void 0!==window.pageData)for(e.pageDataDFP=tmgadsGetPageData(e.pageData),i=0;i<e.pageDataDFP.length;i++)0==e.pageDataDFP[i].indexOf("storytype")&&(e.storytype=e.pageDataDFP[i].split("_")[1]);return e.instanceId=tmgAdsUUID(),void 0!==e.dataLayer.pageType?e.rendererType=e.dataLayer.pageType:e.rendererType="unset",console.log("ADTECH: tmgAdsGetPageData -> passed",e),e}catch(e){console.log("ERROR: tmgAdsGetPageData() failed -> error="+e.message)}}function tmgAdsGetURLParam(e,t){return"adtest"==e?decodeURI((RegExp(e+"=(.+?)(&|$)").exec(t)||[,null])[1]):window.location.search.indexOf(e)>0}function tmgAdsGetTMGCookies(e){tmgAdsLog("Called:"),tmgAdsLog("tmgAds.plugins.tmgcookies.active = "+tmgAds.plugins.tmgcookies.active);var t,s="";if(tmgAds.plugins.tmgcookies.active){tmgAdsLog("Adding any tmgcookies");for(var d=document.cookie.split("; "),i=0;i<d.length;i++)d[i].hasOwnProperty(i)&&"tmgads_"===(t=d[i].split("="))[0].substr(0,7)&&t[0].length>0&&(s+=";ck_"+t[0].substr(7,t[0].length-7)+"="+t[1])}return s}function tmgAdsLoad(e){var t={status:"init",id:e.id,url:e.url,performance:{url:e.url,init:tmgAdsTimer(),requested:0,received:0,latency:-1}};if(tmgAds.performance[e.name]=tmgAds.performance[e.name]||{},window.location.search.indexOf(e.name+"urltest")>=0&&(t.url=e.urltest,console.log("ADTECH: Using TEST url for this 3rd party -> ",e.name,t.url)),e.domains.indexOf(window.location.host)>=0||e.domains.indexOf("all")>=0){"function"==typeof e.preload&&e.preload();var s=document.createElement("script");e.id&&(s.id=t.id),s.type="text/javascript",s.async=!0,"function"==typeof e.onerror&&(s.onerror=e.onerror),s.onload=function(){if("requested"==e.status){for(var s in e.status="received",tmgAdsEvent(e.name+":"+e.status),tmg.pubsub&&e.dopubsub&&(t.eventName="tmg.ads."+e.name+".ready",tmg.pubsub.publish({topic:t.eventName})),t.performance.received=tmgAdsTimer(),t.performance.latency=Math.round(parseFloat((t.performance.received-t.performance.init).toFixed(3))),t.performance)tmgAds.performance[e.name][s]=t.performance[s];"function"==typeof e.callback&&e.callback()}},e.timeout&&setTimeout(function(){"received"!=e.status&&(e.status="timeout",tmgAds.plugins.timeouts.push(e.name),"function"==typeof e.timeoutFn&&(e.timeoutFn(),tmgAds.performance[e.name].timeout=tmgAdsTimer()))},e.timeout),e.status="requested",tmgAds.performance[e.name].requested=tmgAdsTimer(),s.src=t.url;var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(s,d)}else console.log("["+tmgAdsTimer()+"] tmgAdsLoad:: "+e.name+" - domain NOT matched -> "+window.location.host,e.domains)}function __tmgAdsLoad(e){var t={status:"init",id:e.id,url:e.url,performance:{url:e.url,init:tmgAdsTimer(),requested:0,received:0,latency:-1}};tmgAds.performance[e.name]=tmgAds.performance[e.name]||{},window.location.search.indexOf(e.name+"urltest")>=0&&(t.url=e.urltest,console.log("ADTECH: Using TEST url for this 3rd party -> ",e.name,t.url)),"function"==typeof e.preload&&e.preload();var s=document.createElement("script");e.id&&(s.id=t.id),s.type="text/javascript",s.async=!0,"function"==typeof e.onerror&&(s.onerror=e.onerror),s.onload=function(){if("requested"==e.status){for(var s in e.status="received",tmgAdsEvent(e.name+":"+e.status),tmg.pubsub&&e.dopubsub&&(t.eventName="tmg.ads."+e.name+".ready",tmg.pubsub.publish({topic:t.eventName})),t.performance.received=tmgAdsTimer(),t.performance.latency=Math.round(parseFloat((t.performance.received-t.performance.init).toFixed(3))),t.performance)tmgAds.performance[e.name][s]=t.performance[s];"function"==typeof e.callback&&e.callback()}},e.timeout&&setTimeout(function(){"received"!=e.status&&(e.status="timeout",tmgAds.plugins.timeouts.push(e.name),"function"==typeof e.timeoutFn&&(e.timeoutFn(),tmgAds.performance[e.name].timeout=tmgAdsTimer()))},e.timeout),e.status="requested",tmgAds.performance[e.name].requested=tmgAdsTimer(),s.src=t.url;var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(s,d)}function tmgAdsGetBrowserData(){tmgAdsLog("Called:");var e,t={};for(var s in navigator)if(navigator.hasOwnProperty(s)){var d=navigator[s];"object"!=typeof d&&(t[s]=d)}return document.all?(tmgAdsLog("document.all exists"),t.biw=document.documentElement.offsetWidth,t.bih=document.documentElement.offsetHeight):(tmgAdsLog("document.all does not exists"),t.biw=window.innerWidth,t.bih=window.innerHeight),t.isIE=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var d=e.indexOf("Edge/");return d>0&&parseInt(e.substring(d+5,e.indexOf(".",d)),10)}(),t.chromeVer=!!(e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./))&&parseInt(e[2],10),t.chromeVer?t.isChrome=!0:t.isChrome=!1,t}function tmgAdsGetCookie(e){tmgAdsLog("Called: tmgAdsGetCookie("+e+"): Called");var t,s,d,i,a=document.cookie.split(";");for(s=0;s<a.length;s++)d=a[s].substr(0,a[s].indexOf("=")),i=a[s].substr(a[s].indexOf("=")+1),(d=d.replace(/^\s+|\s+$/g,""))==e&&(t=decodeURIComponent(i));return t}function tmgAdsSetCookie(e,t,s,d){tmgAdsLog('Called: tmgAdsSetCookie("'+e+'","'+t+'","'+s+'","'+d+'"): Called');var i,a,n,o,r=e+"="+encodeURIComponent(t);s?(a=(i=new Date).getTime(),a+=3600*s*1e3,i.setTime(a),n=";expires="+i.toGMTString()):n="",o=r+n+";path=/"+(void 0===d?"":";domain="+d),document.cookie=o}function tmgAdsTimer(){var e=!1;return e=void 0!==window.RUM&&void 0!==window.RUM.now?window.RUM.now():void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),parseFloat(e.toFixed(0))}function tmgAdsCsvToObj(e,t,s){var d;if(tmgAdsLog('Called: data="'+e+'" delimiter="'+t+'" assignment='+s),s=s||"=",void 0!==e)for(var i in(d={dfplegacy:"",raw:e,vars:{}}).data=e.split(t),d.data)if(d.data[i].length>0&&"string"==typeof d.data[i]){var a=d.data[i].split(s);d.vars[a[0]]=a[1],d.dfplegacy+="&"+a[0]+"="+a[1],tmgAdsLog("extra custVars set in function call, creating them now -> "+a[0]+s+a[1])}return d}function tmgAdsBuildAd(e,t,s){tmgAdsLog("#####################################################################################"),tmgAdsLog('### tmgAdsBuildAd("'+e+'","'+t+'","'+s+'")'),++tmgAds.dfp.tile;var d={adunit:tmgAds.dfp.adunit,altsizes:s,outofpage:!1,arguments:arguments,slot:e.split("_"),size:[],slotid:e,prebid:{hb_data:[],hb_adid:[],hb_size:[],hb_pb:[],hb_rid:[],hb_ttr:[],hb_pid:[]},customvars:tmgAds.dfp.customvars||{},customvarstr:"",refreshable:!1,dynmpu:!1,block:!1,div:e,vidid:null,pos:tmgAds.dfp.tile,tile:tmgAds.dfp.tile,ord:Number(new Date),extra:tmgAdsCsvToObj(t,";")};for(var i in"none"!=tmgAds.config.deliveryModel.activityStatus?d.adcount=1:d.adcount=0,tmgAds.ads[d.pos]={},1==d.slot.length?d.adtype=d.slot[0]:d.adtype=d.slot[2],d.adloc=d.slot[1],d.slot[3]&&(d.adpos=d.slot[3],d.dynid=d.adpos),void 0!==window.martech&&void 0!==window.martech.utils?void 0!==window.martech.utils.activities?d.customvars.martech=window.martech.utils.activities:d.customvars.martech=["none"]:d.customvars.martech=["unset"],"nat"==d.adtype&&(d.natid=d.div.substring(11),d.nattype="unclassified","nat_index_sparkbrain"==d.natid.substring(0,20)&&(d.nattype=d.customvars.nattype="sparkbrain"),"nat_index_sidebar"==d.natid.substring(0,17)&&(d.nattype=d.customvars.nattype="sidebar"),"nat_index_logo"==d.natid.substring(0,14)&&(d.nattype=d.customvars.nattype="logo"),"nat_index_mob_portal_newsfeed"==d.natid.substring(0,29)&&(d.nattype=d.customvars.nattype="newsfeeed"),"nat_index_firstlist_mob"==d.natid.substring(0,23)&&(d.nattype=d.customvars.nattype="firstllist"),"nat_index_multilist_mob"==d.natid.substring(0,23)&&(d.nattype=d.customvars.nattype="multilist"),"nat_index_sponsored_list_item"==d.natid.substring(0,29)&&(d.nattype=d.customvars.nattype="sponsored"),"nat_story_sparkbrain"==d.natid.substring(0,20)&&(d.nattype=d.customvars.nattype="sparkbrain"),"nat_story_outbrain"==d.natid.substring(0,18)&&(d.nattype=d.customvars.nattype="outbrain"),"nat_story_sidebar"==d.natid.substring(0,17)&&(d.nattype=d.customvars.nattype="sidebar"),"nat_story_logo"==d.natid.substring(0,14)&&(d.nattype=d.customvars.nattype="logo"),d.customvars.nattype=d.nattype),(tmgAds.plugins.oopunits.indexOf(d.adtype)>-1||"oop"==d.adpos)&&(d.outofpage=!0),void 0===tmgAds.metrics.tmggptAdFirstAdQueued&&(tmgAdsLog("TMG-ADTECH: First Ad Requested"),tmgAds.metrics.tmggptAdFirstAdQueued=tmgAdsTimer(),tmgAds.metrics.metricTimeToQueueFirstAd=tmgAds.metrics.tmggptAdFirstAdQueued),tmgAds.metrics.tmggptAdLastAdQueued=tmgAdsTimer(),tmgAds.metrics.ads[d.adtype]={queued:tmgAds.metrics.tmggptAdLastAdQueued,viewable:!1,archive:[]},!1!==typeof tmgAds.plugins.adomik.active&&(d.customvars.ad_group=tmgAds.plugins.adomik.getAdGroup(),d.customvars.ad_h=(new Date).getUTCHours()),d.customvars)d.customvars.hasOwnProperty(i)&&(d.customvarstr+="&"+i+"="+d.customvars[i],tmgAdsLog("KVPs: "+i+"="+d.customvars[i]));if(d.altsizes.length>0){for(tmgAdsLog("Altsizes have been chosen - over-riding the defaults and setting them to: "+d.altsizes),d.oldsizes=d.altsizes.split(","),tmgAdsLog("Altsizes set: "),d.newsizes=[],i=0;i<d.oldsizes.length;i++)""!==d.oldsizes[i]&&d.oldsizes[i].length>=3?(tmgAdsLog("Altsizes: using this value "+d.oldsizes[i]),d.newsizes.push(d.oldsizes[i])):tmgAdsLog('Altsizes: not using this value "'+d.oldsizes[i]+'"');for(i in d.sizes=d.newsizes,tmgAdsLog("Altsizes set: "),d.sizes)d.sizes.hasOwnProperty(i)&&d.size.push([Number(d.sizes[i].split("x")[0]),Number(d.sizes[i].split("x")[1])])}else d.size=tmgAds.plugins.sizemapping[tmgAds.layout.viewport][d.adtype],tmgAdsLog("default sizes have been chosen - sizes are:"+d.size),d.sizemapping=googletag.cmd.push(function(){googletag.sizeMapping().addSize(tmgAds.plugins.sizemapping.x.size,tmgAds.plugins.sizemapping.x[d.adtype]).addSize(tmgAds.plugins.sizemapping.l.size,tmgAds.plugins.sizemapping.l[d.adtype]).addSize(tmgAds.plugins.sizemapping.m.size,tmgAds.plugins.sizemapping.m[d.adtype]).addSize(tmgAds.plugins.sizemapping.s.size,tmgAds.plugins.sizemapping.s[d.adtype]).addSize(tmgAds.plugins.sizemapping.xs.size,tmgAds.plugins.sizemapping.xs[d.adtype]).build()});if("vid"==d.adtype||"ins"==d.adtype||"int"==d.adtype)return"vid"==d.adtype&&(d.tmpsize=tmgAds.plugins.sizemapping[tmgAds.layout.viewport].vid,d.vidslot=d.slotid+"_"+d.pos,tmgAds.plugins.advast4&&(tmgAds.plugins.gpt.vastOutputVersion="xml_vast4"),d.url="https://securepubads.g.doubleclick.net/gampad/ads?env=vp&sz="+d.tmpsize+"&cmsid="+tmgAds.plugins.gpt.ooyalaCMSID+"&vid="+d.vidid+"&gdfp_req=1&impl=s&unviewed_position_start=1&output="+tmgAds.plugins.gpt.vastOutputVersion+"&iu="+d.adunit+"&hl=en&cust_params="+encodeURIComponent(d.customvarstr+"&vidslot="+d.vidslot+"&at="+d.adtype+"&pos="+d.pos+"&adcount="+d.adcount+d.extra.dfplegacy)+"&description_url="+encodeURIComponent(tmgAds.page.url)+"&url="+encodeURIComponent(tmgAds.page.url)+"&ciu_szs=&scp=&scor="+d.pos+"&correlator="+tmgAds.dfp.ord),"ins"==d.adtype&&(d.tmpsize=d.size[0][0]+"x"+d.size[0][1],d.url="https://securepubads.g.doubleclick.net/gampad/adx?sz="+d.tmpsize+"&iu="+tmgAds.dfp.adunit+"&url="+encodeURIComponent(tmgAds.page.url)+"&t="+encodeURIComponent(d.customvarstr+"&at="+d.thisad+"&pos="+d.pos+"&acount="+d.adcount)+"&m=application/javascript&tile="+d.pos+"&c="+tmgAds.dfp.ord),"int"==d.adtype&&(d.tmpsize=d.size[0][0]+"x"+d.size[0][1],d.url="https://securepubads.g.doubleclick.net/gampad/adx?sz="+d.tmpsize+"&iu="+tmgAds.dfp.adunit+"&url="+encodeURIComponent(tmgAds.page.url)+"&t="+encodeURIComponent(d.customvarstr+"&at="+d.thisad+"&pos="+d.pos+"&acount="+d.adcount)+"&m=application/javascript&tile="+d.pos+"&c="+tmgAds.dfp.ord),d.fetchUrl=function(){return tmgAds.plugins.adkill?"":d.url},d.display=function(){d.fetchUrl()},d;if("m"!=tmgAds.layout.viewport&&"s"!=tmgAds.layout.viewport&&"xs"!=tmgAds.layout.viewport||"story"!=tmgAds.page.pagetype&&"video"!=tmgAds.page.pagetype&&"live"!=tmgAds.page.pagetype||"mpu"!=d.adtype?d.block=!1:d.block=!0,tmgAds.plugins.adSlotRefresh.exemptAdSlots.indexOf(d.adtype)>-1||tmgAds.config.deliveryModel.activityStatus==d.adtype||"none"==tmgAds.config.deliveryModel.activityStatus||tmgAds.config.deliveryModel.exempt.indexOf(d.adtype)>-1){if("dyn"==d.adtype&&tmgAds.plugins.dynad.active&&-1==tmgAds.plugins.dynad.viewports.indexOf(tmgAds.layout.viewport))return tmgAdsLog("ALERT: Dynamic MPU slot not rendered as has not met criteria: adpos="+d.pos+" - adtype="+d.adtype+" - viewport="+tmgAds.layout.viewport+" - tmgAds.plugins.dynad.viewports.indexOf(tmgAds.layout.viewport)="+tmgAds.plugins.dynad.viewports.indexOf(tmgAds.layout.viewport)),d.refresh=function(){return d},d.display=function(){return d},d.fetchUrl=function(){return d},d;for("ban"==tmgAds.config.deliveryModel.activityStatus&&"ban"==d.adtype&&(tmgAds.layout.viewportHeight<tmgAds.config.deliveryModel.minHeight&&(d.size=[[970,90],[970,66],[728,90],[468,60],[1,1],"fluid"]),"m"==tmgAds.layout.viewport&&(d.size=[[728,90],[1,1],"fluid"]),"s"==tmgAds.layout.viewport&&(d.size=[[300,50],[320,50],[1,1],"fluid"]),"xs"==tmgAds.layout.viewport&&(d.size=[[300,50],[320,50],[1,1],"fluid"])),"mpu"==tmgAds.config.deliveryModel.activityStatus&&"mpu"==d.adtype&&tmgAds.layout.viewportHeight<tmgAds.config.deliveryModel.minHeight&&(tmgAdsLog("tmgAds.layout.viewportHeight is less thean the minHeight for certain sticky ads/mpus on this page, restricting to only 300x250"),d.size=[[300,250],[300,215],[300,189],[1,1],"fluid"]),d.rawsizes=[],i=0;i<d.size.length;i++)d.rawsizes.push(d.size[i][0]+"x"+d.size[i][1]);return googletag.cmd.push(function(){var e;for(e in!0===d.outofpage?(tmgAdsLog("OutOfPage unit chosen for: "+d.slotid),d.adslot=googletag.defineOutOfPageSlot(d.adunit,d.div).addService(googletag.pubads())):(tmgAdsLog("Standard Display unit chosen for: "+d.slotid+" sizes: "+d.size),d.adslot=googletag.defineSlot(d.adunit,d.size,d.div).addService(googletag.pubads())),"dyn"==d.adtype&&d.adslot.setTargeting("dynid",d.dynid),"nat"==d.adtype&&d.adslot.setTargeting("natid",d.natid),d.adslot.setTargeting("div",d.div),d.adslot.setTargeting("at",d.adtype),d.adslot.setTargeting("pos",d.pos),d.adslot.setTargeting("adcount",String(d.adcount)),d.adslot.setTargeting("tsor",tmgAdsTimer()),tmgAds.plugins.gpt.useppid&&void 0!==tmgAds.tmg.pid&&googletag.pubads().setPublisherProvidedId(tmgAds.tmg.pid),d=tmgAdsUpdateHeaderBidderData(d),tmgAds.dfp.customvars)null!==typeof tmgAds.dfp.customvars[e]&&d.adslot.setTargeting(e,tmgAds.dfp.customvars[e]);for(e in d.extras)null!==typeof d.extras[e]&&("cmp"==e&&console.log("ADTECH:: cmp -> ",tmgAds.dfp.customvars[e]),d.adslot.setTargeting(e,d.extras[e]));for(e in d.extra.vars)tmgAdsLog('extra vars have been set, itterating through them now. Adding extra vars: ["'+e+'","'+d.extra.vars[e]+'"]'),d.adslot.setTargeting(e,d.extra.vars[e]);if(1==tmgAds.plugins.gpt.collapseEmptyDivs&&(tmgAdsLog("setCollapseEmptyDiv is active for: "+d.slotid),d.adslot.setCollapseEmptyDiv(!0)),tmgAds.plugins.permutive.active||tmgAds.plugins.adpermutiveon)try{var t=window.localStorage.getItem("_pdfps");d.adslot.setTargeting("permutive",t?JSON.parse(t):[])}catch(e){console.log("PERMUTIVE: error -> "+e)}googletag.enableServices()}),tmgAds.ads[d.pos]=d,d.display=function(){return googletag.cmd.push(function(){"vid"!==d.adtype?googletag.display(d.slotid):tmgAdsLog('.display() method called on "vid" adtype... ignoring')}),d},d.refresh=function(){googletag.cmd.push(function(){googletag.pubads().refresh([d.adslot])})},tmgAds.adslots[d.slotid]=d,!0===tmgAds.plugins.adkill?(tmgAdsLog('ALERT: "adkill" has been selected, so bailing here and not sending you an ad...'),d.refresh=function(){return d},d.display=function(){return d},d.fetchUrl=function(){return d},d):d}return tmgAds.config.deliveryModel.activityStatus!=d.adtype&&tmgAdsLog("ALERT: not matched - tmgAds.config.deliveryModel.activityStatus="+tmgAds.config.deliveryModel.activityStatus+"  --\x3e  tmp.adtype="+d.adtype+" so we did not call this ad."),tmgAds.plugins.dynad.active&&-1==tmgAds.plugins.dynad.viewports.indexOf(tmgAds.layout.viewport)&&tmgAdsLog("ALERT: Dynmic MPU not called - not matched viewport"),d.refresh=function(){return d},d.display=function(){return d},d.fetchUrl=function(){return d},d}function tmgAdsBuildAdTag(e,t,s,d,i,a,n){tmgAdsLog("-=-=-=--=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-="),tmgAdsLog('WARNING: DEPRECATED tmgAdsBuildAdTag("'+e+'","'+t+'","'+s+'","'+d+'","'+i+'")');var o={tile:(++tmgAds.dfp.tile,tmgAds.dfp.tile),adslot:e.split(","),sizes:t.split(","),thisad:e.split(",")[0].substr(0,3),sz:[],type:s,extra:{data:d,vars:{},dfp:""},style:i,refresh:a,refreshtime:n};if("mob"==o.thisad&&(o.thisad="ban"),o.id_div="tmgads_legacy_"+o.thisad+"_"+o.tile,o.extra.data.length>0)for(var r in o.extra.tmp=o.extra.data.split(";"),o.extra.tmp)if(o.extra.tmp[r].length>0){var m=o.extra.tmp[r].split("=");o.extra.vars[m[0]]=m[1],o.extra.dfp+="&"+m[0]+"="+m[1],tmgAdsLog("extra custVars set in function call, creating them now -> "+m[0]+"="+m[1])}return"ins"!=o.thisad&&"vid"!=o.thisad&&"int"!=o.thisad?o.output='<div id="'+o.id_div+'"><script type="text/javascript">tmgAds.cmd.push(function(){var '+o.id_div+' = tmgAdsBuildAd("'+o.id_div+'","'+o.extra.data+'","'+t+'","0").display();});<\/script></div>\n':o.output=googletag.cmd.push(tmgAdsBuildAd(o.id_div,o.extra.data,t,0).fetchUrl()),--tmgAds.dfp.tile,o.output}function tmgAdsUpdateHeaderBidderData(e){if((tmgAds.plugins.prebid.active||tmgAds.plugins.adprebidon)&&!tmgAds.plugins.adprebidoff&&tmgAds.prodServers.indexOf(window.location.host)>=0&&-1==tmgAds.plugins.prebid.exempt.indexOf(e.adtype)){var t=tmgAds.plugins.prebid.bidResponse;for(a=0;a<=tmgAds.plugins.prebid.keynames.length-1;a++){e.prebid[tmgAds.plugins.prebid.keynames[a]];e.prebid[tmgAds.plugins.prebid.keynames[a]]=[]}if(tmgAdsObjSz(t)>=1){for(var s in e.prebid.hasBidders=[],t)if(e.div==s)for(var d in t[s].bids)if("1"==t[s].bids[d].getStatusCode()){if(window.location.search.indexOf("pbtest")>=0&&console.log("PREBID: SUCCESS - Bids Available ["+s+"]["+d+"] -> ",t[s].bids[d]),void 0!==t[s].bids[0].adserverTargeting.hb_size);else for(o in t[s].bids[0].adserverTargeting);if(e.rawsizes.indexOf(t[s].bids[d].getSize())>=0){for(ozonekey in e.prebid.hasAds=!0,e.prebid.hasBidders.push(t[s].bids[d].bidder),e.prebid.bidID=t[s].bids[d].bidID,e.prebid.bidData=t[s].bids[d].bidData,e.prebid.hb_data.push(e.prebid.bidData),e.prebid.hb_bids.push(e.prebid.bidID),void 0!==t[s].bids[d].dealId&&(e.prebid.hb_dealId=e.prebid.hb_dealId||[],e.prebid.hb_dealId.push(t[s].bids[d].dealId)),e.prebid.ozoneTargeting=e.prebid.ozoneTargeting||{},t[s].bids[d].adserverTargeting)-1==ozonekey.indexOf("hb_")&&(e.prebid[ozonekey]=t[s].bids[d].adserverTargeting[ozonekey],e.adslot.setTargeting(ozonekey,t[s].bids[d].adserverTargeting[ozonekey]),"oz_winner"==ozonekey&&(0==t[s].bids[d].adserverTargeting[ozonekey].indexOf("oz")?e.adslot.setTargeting("oz_winner_audience","yes"):e.adslot.setTargeting("oz_winner_audience","no")));tmgAds.plugins.prebid.commonId.active&&(console.log("PREBID: tmgAds.plugins.prebid.commonId.active ACTIVE"),t[s].bids[d].id)}}else e.prebid.hb_pid.push(t[s].bids[d].placementId+"_nobids")}else tmgAds.plugins.adhboff?console.log("PREBID: HeaderBidding turned off throughb url-param - no bids. ",t):console.log("PREBID: No bids returned - bidstatus="+tmgAds.plugins.prebid.bidstatus,t);for(s=0;s<=tmgAds.plugins.prebid.keynames.length-1;s++)e.adslot.setTargeting(tmgAds.plugins.prebid.keynames[s],e.prebid[tmgAds.plugins.prebid.keynames[s]]);e.adslot.setTargeting("hb_auction",tmgAds.plugins.prebid.auctionID),e.prebid.hasAds?(e.prebid.hasBiddersUnique=tmgAdsGetUniqueArray(e.prebid.hasBidders),e.adslot.setTargeting("hb_hasbids","yes"),e.adslot.setTargeting("hb_hasbidders",e.prebid.hasBiddersUnique),e.adslot.setTargeting("hb_bidstatus",tmgAds.plugins.prebid.bidstatus)):(e.adslot.setTargeting("hb_hasbids","no"),e.adslot.setTargeting("hb_hasbidders","none"),e.adslot.setTargeting("hb_bidstatus",tmgAds.plugins.prebid.bidstatus))}return e}function tmgAdsGetUniqueArray(e){for(var t=[],s=0,d=e.length;s<d;s++)-1===t.indexOf(e[s])&&""!==e[s]&&t.push(e[s]);return t}function tmgAdsRefreshAd(e){var t={};e.slot=tmgAdsUpdateHeaderBidderData(e.slot),tmgAdsLog("Called: Refreshing ad["+e.adID+"]: "+e.slot.adtype),tmgAds.ads[e.adID].hasOwnProperty("adslot")?(tmgAdsLog("Refreshing ad: googletag.pubads().refresh(["+e.slot+"]);"),googletag.cmd.push(function(){for(var s in tmgAdsLog("Updating setTargeting values:"),e.slot.adslot.setTargeting("adcount",[tmgAds.refreshTimers[e.slot.adtype].adcount]),tmgAdsLog("Updating setTargeting values-> adcount="+tmgAds.refreshTimers[e.slot.adtype].adcount),tmgAds.dfp.customvars)null!==typeof tmgAds.dfp.customvars[s]&&(e.slot.adslot.setTargeting(s,tmgAds.dfp.customvars[s]),tmgAdsLog("Updating setTargeting values -> "+s+"="+tmgAds.dfp.customvars[s]));for(s in tmgAds.metrics.ads[e.slot.adtype])"object"!=typeof tmgAds.metrics.ads[e.slot.adtype][s]&&(t[s]=tmgAds.metrics.ads[e.slot.adtype][s],delete tmgAds.metrics.ads[e.slot.adtype][s]);tmgAds.metrics.ads[e.slot.adtype].archive.push(t),tmgAds.metrics.ads[e.slot.adtype].queued=tmgAdsTimer(),googletag.pubads().refresh([e.slot.adslot])})):tmgAdsLog("adslot does not exist: googletag.pubads().refresh(["+e.slot.adslot+"]);")}function tmgAdsCountdown(e){tmgAds.refreshTimers[e.adtype].currentCount>0?!0===tmgAds.config.viewportstatus?(tmgAdsLog("Countdown not finished, reducing countdown by 1s :: adtype:"+e.adtype+"  viewportstatus:"+tmgAds.config.viewportstatus+"  countdownID:"+tmgAds.refreshTimers[e.adtype].countdownID+"  timeOutstanding:"+tmgAds.refreshTimers[e.adtype].currentCount+"  adcount:"+tmgAds.refreshTimers[e.adtype].adcount),2==tmgAds.refreshTimers[e.adtype].currentCount&&(0===tmgAds.config.deliveryModel.refreshCycle||tmgAds.config.deliveryModel.refreshCycle>tmgAds.refreshTimers[e.adtype].adcount)&&tmgAdsEvent("headerbid:reload"),--tmgAds.refreshTimers[e.adtype].currentCount):tmgAdsLog("tmgAds.config.viewportstatus="+tmgAds.config.viewportstatus+" - window is not active, so countdown remains at "+tmgAds.refreshTimers[e.adtype].currentCount+"s"):tmgAdsLog("Countdown finished, - ad is ready to refresh - waiting for the user to interact with the page before we refresh ads.")}function tmgAdsScheduleRefreshableAds(e){function t(t){0===tmgAds.refreshTimers[e.adtype].currentCount&&!1===tmgAds.refreshTimers[e.adtype].refreshStatus?(tmgAds.refreshTimers[e.adtype].refreshStatus=!0,tmgAdsLog("REFRESH: Refreshing: "+e.div),(0===tmgAds.config.deliveryModel.refreshCycle||tmgAds.config.deliveryModel.refreshCycle>tmgAds.refreshTimers[e.adtype].adcount)&&(document.getElementById(e.div).style.opacity="0"),setTimeout(function(){tmgAdsLog("User has interacted with page and therefore is now active - event.type="+t.type+"  -  count is 0... lets refrsh some ads:"),tmgAdsLog("Firstly, lets remove the existing countdownID: "+tmgAds.refreshTimers[e.adtype].countdownID),window.clearInterval(tmgAds.refreshTimers[e.adtype].countdownID),0===tmgAds.config.deliveryModel.refreshCycle||tmgAds.config.deliveryModel.refreshCycle>tmgAds.refreshTimers[e.adtype].adcount?(tmgAdsLog("SUCCESS: We can refresh this ad as there is either no limit on number of refreshed ads or we have delivered less than the current limit"),tmgAdsLog("tmgAds.config.deliveryModel.refreshCycle = "+tmgAds.config.deliveryModel.refreshCycle),++tmgAds.refreshTimers[e.adtype].adcount,tmgAdsLog("Incrementing tmgAds.refreshTimers["+e.adtype+"].adcount to: "+tmgAds.refreshTimers[e.adtype].adcount),tmgAdsLog("Creating a new countdownID"),tmgAds.refreshTimers[e.adtype].countdownID=setInterval(function(){tmgAdsCountdown(e)},1e3),tmgAdsLog("CSS transitions fadeout - Countdown has reached 1s to go... we need to start transitioning the look/feel of this unit by fading out the ad..."),tmgAdsLog("Resetting the countdown"),tmgAds.refreshTimers[e.adtype].currentCount=tmgAds.config.deliveryModel.refreshRate/1e3,tmgAdsLog("Requesting Ad refresh - adtype:"+e.adtype+" countdownID:"+tmgAds.refreshTimers[e.adtype].countdownID+" ad.adID="+e.adID),tmgAds.refreshTimers[e.adtype].refreshStatus=!1,"click"!=t.type?(tmgAdsLog("Event is NOT a click event, so we can happily refresh this ad now."),tmgAdsRefreshAd(tmgAds.refreshTimers[e.adtype])):tmgAdsLog("Event is a CLICK event, we do not refresh based on these as they can overinflate delivery attempts.")):(tmgAdsLog("ALERT: tmgAds.config.deliveryModel.refreshCycle has been met."),tmgAdsLog("ALERT: tmgAds.config.deliveryModel.refreshCycle = "+tmgAds.config.deliveryModel.refreshCycle),tmgAdsLog("ALERT: tmgAds.refreshTimers["+e.adtype+"].adcount = "+tmgAds.refreshTimers[e.adtype].adcount),"ban"!=e.adtype||"index"!=tmgAds.page.pagetype&&"topic"!=tmgAds.page.pagetype?tmgAdsEvent("tmggpt-collapseStickyad"):tmgAdsEvent("tmggpt-revertStickyBanner"))},1e3)):0==tmgAds.refreshTimers[e.adtype].currentCount?tmgAdsLog("User has interacted with page: event.type="+t.type+" : tmgAds.refreshTimers[ad.adtype].currentCount="+tmgAds.refreshTimers[e.adtype].currentCount+"  -  BUT sticky-ad refresh has now been disabled due to hitting refreshlimits"):tmgAdsLog("User has interacted with page: event.type="+t.type+" : tmgAds.refreshTimers[ad.adtype].currentCount="+tmgAds.refreshTimers[e.adtype].currentCount+"s")}tmgAds.refreshTimers[e.adtype]={adID:e.adID,slot:tmgAds.ads[e.adID],duration:tmgAds.config.deliveryModel.refreshRate/1e3,currentCount:tmgAds.config.deliveryModel.refreshRate/1e3,refreshStatus:!1,adcount:1,countdownID:setInterval(function(){tmgAdsCountdown(e)},1e3)},document.addEventListener("focus",function(e){t(e)}),document.addEventListener("orientationchange",function(e){t(e)}),document.addEventListener("keydown",function(e){t(e)}),document.addEventListener("scroll",function(e){t(e)}),document.addEventListener("resize",function(e){t(e)}),document.addEventListener("mousemove",function(e){t(e)}),document.addEventListener("mousewheel",function(e){t(e)},{passive:!0}),document.addEventListener("DOMMouseScroll",function(e){t(e)},{passive:!0})}function tmgAdsSetAdSlotToRefresh(e){if(tmgAds.counters=tmgAds.counters||{},tmgAds.counters.hasOwnProperty(e)||(tmgAds.counters[e]=0),Object.keys(tmgAds.ads).length>0&&tmgAds.plugins.adSlotRefresh.active&&tmgAds.plugins.adSlotRefresh.retryCount<=tmgAds.plugins.adSlotRefresh.retryLimit){tmgAdsLog("SUCCESS: Ads seem to have been defined AND retryCount <= retryLimit: tmgAds.plugins.stadSlotRefresh.retryCount="+tmgAds.plugins.adSlotRefresh.retryCount+"   tmgAds.plugins.adSlotRefresh.retryLimit="+tmgAds.plugins.adSlotRefresh.retryLimit);var t="none";for(var s in tmgAds.ads)if(tmgAds.ads.hasOwnProperty(s)){if(tmgAds.ads[s].adtype==e){tmgAdsLog("SUCCESS: tmgads.ads["+s+"].adtype = "+e),tmgAds.ads[s].adID=t=s;break}tmgAdsLog("FAILURE: tmgads.ads["+s+"].adtype != "+e)}else tmgAdsLog("FAILURE: tmgads.hasOwnProperty("+s+") - no hasOwnProperty exixts");"none"==t?(tmgAdsLog("Ad not found ["+e+"] perhaps its not beeing created yet. Number of times this script has been run for this ad -> "+tmgAds.counters[e]),tmgAds.counters[e]<tmgAds.plugins.counters&&(++tmgAds.counters[e],window.setTimeout(function(){tmgAdsSetAdSlotToRefresh(e)},tmgAds.plugins.adSlotRefresh.retryPeriod))):tmgAds.ads[t].adtype==e&&("object"==typeof tmgAds.ads[t].adslot?(tmgAdsLog("SUCCESS: calling tmgAdsScheduleRefreshableAds("+e+")"),tmgAdsScheduleRefreshableAds(tmgAds.ads[t])):(tmgAdsLog("ALERT: delaying implementing refreshables until the adslots are available - recalling tmgAdsSetAdSlotToRefresh("+e+") in "+tmgAds.plugins.adSlotRefresh.retryPeriod+"ms - retryCount:"+tmgAds.plugins.adSlotRefresh.retryCount+" of "+tmgAds.plugins.adSlotRefresh.retryLimit),tmgAds.plugins.adSlotRefresh.retryCount<=tmgAds.plugins.adSlotRefresh.retryLimit?(++tmgAds.plugins.adSlotRefresh.retryCount,window.setTimeout(function(){tmgAdsSetAdSlotToRefresh(e)},tmgAds.plugins.adSlotRefresh.retryPeriod)):tmgAdsLog("ALERT: tmgAdsSetAdSlotToRefresh request limit hit")))}else++tmgAds.plugins.adSlotRefresh.retryCount,tmgAdsLog("ALERT: the tmgAds.ads object does not exist or is empty, ads have not been created yet - recalling tmgAdsSetAdSlotToRefresh("+e+") in "+tmgAds.plugins.adSlotRefresh.retryPeriod+"ms - incrementing count to: "+tmgAds.plugins.adSlotRefresh.retryCount),tmgAds.plugins.adSlotRefresh.retryCount<=tmgAds.plugins.adSlotRefresh.retryLimit&&window.setTimeout(function(){tmgAdsSetAdSlotToRefresh(e)},tmgAds.plugins.adSlotRefresh.retryPeriod)}function tmgAdsOnPageLoad(){for(tmgAdsEvent("tmggpt:pageload"),tmgAdsLog("##################################################################################################################"),tmgAdsLog("P A G E   L  O A D E D "),tmgAdsLog("##################################################################################################################"),window.addEventListener("focus",function(){tmgAds.config.viewportstatus=!0,tmgAdsLog("AutoRefresh Event: window.onfocus - tmgAds.config.viewportstatus="+tmgAds.config.viewportstatus)}),window.addEventListener("blur",function(){tmgAds.config.viewportstatus=!1,tmgAdsLog("AutoRefresh Event: window.onblur - tmgAds.config.viewportstatus="+tmgAds.config.viewportstatus)}),tmgAdsLog("Executing tmgAds.cmd queue:"),tmgAdsEvent("tmggpt:commandqueue");tmgAds.cmd.length>0;)tmgAdsLog("Executing tmgAds.cmd queue: "+tmgAds.cmd.slice(0,1)),tmgAds.cmd.shift()();return!0}function tmgAdsEvent(e,t){var s=new CustomEvent("tmgAds:"+e);document.dispatchEvent(s)}function tmgAdsInitDeliveryModel(){try{if(tmgAdsLog("Called tmgAdsInitDeliveryModel"),tmgAds.config.deliveryModel=tmgAds.plugins.models.default,tmgAds.config.deliveryModel.matched=!1,tmgAds.plugins.adstickyon&&(tmgAds.sticky=!0),tmgAds.plugins.adstickyoff&&(tmgAds.sticky=!1),tmgAds.plugins.mytelegraph.isActive&&!tmgAds.plugins.admytoff&&-1==tmgAds.plugins.mytelegraph.exempt.indexOf(tmgAds.page.businessseg)&&("xs"==tmgAds.layout.viewport||"s"==tmgAds.layout.viewport?(tmgAds.tmg.isRegistered||!document.getElementById("advert_tmg_ban")||"story"!=tmgAds.page.pagetype&&"live"!=tmgAds.page.pagetype&&"video"!=tmgAds.page.pagetype?document.getElementById("advert_tmg_ban")&&(document.getElementById("advert_tmg_ban").outerHTML="\x3c!--// advert_tmg_ban has been removed due to the MyTelegraph rules on Mobile that requires no banner slots to show  - user is registered//--\x3e"):document.getElementById("advert_tmg_ban").outerHTML+="\x3c!--// advert_tmg_ban has been retained //--\x3e",tmgAds.tmg.isRegistered?"story"!=tmgAds.page.pagetype&&"live"!=tmgAds.page.pagetype&&"video"!=tmgAds.page.pagetype&&"index"!=tmgAds.page.pagetype&&"topic"!=tmgAds.page.pagetype||(tmgAds.sticky=!1,tmgAds.plugins.mytelegraph.isApplied=!0,tmgAds.plugins.mytelegraph.isPlatform="mobile"):"index"!=tmgAds.page.pagetype&&"topic"!=tmgAds.page.pagetype||(tmgAds.sticky=!1)):(tmgAds.plugins.mytelegraph.isApplied=!0,tmgAds.plugins.mytelegraph.isPlatform="desktop")),tmgAds.sticky){for(var e in tmgAdsLog("tmgAdsInitDeliveryModel: tmgAds.sticky is TRUE"),tmgAds.plugins.models)if(tmgAds.plugins.models.hasOwnProperty(e)&&tmgAds.page.pagetype==e)for(var t in tmgAdsLog("tmgAdsInitDeliveryModel: matched pagetype -> "+e),tmgAds.plugins.models[e])tmgAds.plugins.models[e][t].hasOwnProperty("viewport")&&tmgAds.plugins.models[e][t].viewport==tmgAds.layout.viewport&&(tmgAds.config.deliveryModel=tmgAds.plugins.models[e][t],tmgAds.config.deliveryModel.matched=!0,tmgAdsLog("tmgAdsInitDeliveryModel: matched viewport -> "+tmgAds.plugins.models[e][t].viewport),"none"!=tmgAds.config.deliveryModel.model?tmgAds.plugins.adSlotRefresh.pagetypes.indexOf(tmgAds.page.pagetype)>-1?"ban"==tmgAds.config.deliveryModel.model&&tmgAds.browser.isIE&&!tmgAds.plugins.adiesticky?tmgAds.config.deliveryModel.activityStatus="none":"ban"==tmgAds.config.deliveryModel.model&&tmgAds.browser.isChrome&&tmgAds.browser.chromeVer<=55?tmgAds.config.deliveryModel.activityStatus="none":(tmgAdsLog("tmgAdsInitDeliveryModel: page is sutiable for sticky ad model, setting vars now."),tmgAds.config.deliveryModel.ruleName=tmgAds.page.pagetype+"-"+tmgAds.config.deliveryModel.model+"-"+tmgAds.config.deliveryModel.minHeight+"-"+tmgAds.config.deliveryModel.refreshRate+"-"+tmgAds.config.deliveryModel.refreshCycle,tmgAds.config.deliveryModel.sticky=!0,tmgAds.config.deliveryModel.activityStatus=tmgAds.config.deliveryModel.model,tmgAdsSetAdSlotToRefresh(tmgAds.config.deliveryModel.activityStatus)):(tmgAdsLog('ALERT: tmgAdsInitDeliveryModel: page is exempted from sticky ads in the tmgAds.config.models. tmgAds.plugins.adSlotRefresh.pagetypes.indexOf("'+tmgAds.page.pagetype+'");'),tmgAds.config.deliveryModel.activityStatus="none"):(tmgAdsLog("ALERT: tmgAdsInitDeliveryModel: tmgAds.page.pagetype is not suitable for sticky ads -> setting tmgAds.config.deliveryModel.activityStatus = none"),tmgAds.config.deliveryModel.activityStatus="none"))}else tmgAds.config.deliveryModel={activityStatus:"none",exempt:[]}}catch(e){tmgAdsLog("ERROR: tmgAdsInitDeliveryModel failed -> error="+e.message,tmgAds)}}function tmgAdsInitHeaderBidders(){tmgAdsEvent("headerbid:start"),tmgAds.plugins.adprebidoff&&(console.log("HEADERBIDDING: URL-Param [adhbon] is present -> PreBid is turned off"),tmgAds.plugins.prebid.active=!1),tmgAds.plugins.adprebidon&&(console.log("HEADERBIDDING: URL-Param [adhbon] is present -> PreBid is turned on"),tmgAds.plugins.prebid.active=!0),window.location.search.indexOf("pbtest")>=0&&(console.log("HEADERBIDDING: Prebid - swapping TEST for PRODUCTION urls -> "+tmgAds.plugins.prebid.jstest),tmgAds.plugins.prebid.jsprod=tmgAds.plugins.prebid.jstest),-1==tmgAds.plugins.prebid.domains.indexOf(window.location.host)&&(console.log("HEADERBIDDING: Domain not suitable to make prebid requests on -> PreBid is turned off"),tmgAds.plugins.prebid.active=!1),tmgAds.plugins.prebid.active?(tmgAds.plugins.prebid.auctionID=tmgAdsUUID(),tmgAds.metrics.prebid=tmgAds.metrics.prebid||{},tmgAds.metrics.prebid.initiated=tmgAdsTimer(),"init"==tmgAds.plugins.prebid.bidstatus||"timeout"==tmgAds.plugins.prebid.bidstatus?(tmgAds.plugins.prebid.jsurl=tmgAds.plugins.prebid.jsprod,tmgAdsLoad(tmgAds.plugins.prebid)):(tmgAds.plugins.prebid.bidResponse=[],tmgAds.plugins.prebid.bidResponse.length=0,tmgAds.plugins.prebid.bids=[],tmgAds.plugins.prebid.bids.length=0,pbjs.requestBids(tmgAds.plugins.prebid.bidsBackHandler))):tmgAds.plugins.adhboff,tmgAdsEvent("headerbid:end")}function tmgAdsThrottle(e,t){var s,d;return t=t||tmgAds.plugins.lazyLoad.delayCall,function(){var i=this,a=+new Date,n=arguments;s&&a<s+t?(clearTimeout(d),d=setTimeout(function(){s=a,e.apply(i,n)},t)):(s=a,e.apply(i,n))}}function tmgAdsElementIsInView(e,t){var s=[{left:0,right:0,top:0,bottom:0},t].reduce(function(e,t){return Object.keys(t).forEach(function(s){e[s]=t[s]}),e},{}),d=e.getBoundingClientRect(),i=window.innerHeight,a=window.innerWidth,n=d.top+s.top,o=d.bottom-s.bottom,r=d.left-s.left,m=d.right+s.right;return n<i&&o>0&&(r<a&&m>0)}function tmgAdsElementInView(e,t,s){var d=e.id.split("_"),i="unknown";i="dyn"==d[2]?d[2]+d[3]:d[2];var a=!1;tmgAdsElementIsInView(e,s)&&!a&&(a=!0,"dyn"==d[2]&&d[3]>0&&(googletag.pubads().updateCorrelator(),console.log("tmgAdsElementInView: UPDATE CORRELATOR: "+i)),googletag.cmd.push(tmgAdsBuildAd(e.id,"lazy=true","").display()),tmgAdsPerf("mark",["adverts_create_"+i])),t.addEventListener("scroll",tmgAdsThrottle(function(){tmgAdsElementIsInView(e,s)&&!a&&(a=!0,"dyn"==d[2]&&d[3]>0&&(googletag.pubads().updateCorrelator(),console.log("tmgAdsElementInView: UPDATE CORRELATOR: "+i)),googletag.cmd.push(tmgAdsBuildAd(e.id,"","").display()),tmgAdsPerf("mark",["adverts_create_"+i]))},tmgAds.plugins.lazyLoad.delayCall))}function createAdvert(e,t,s,d){var i;return(i=document.createElement("div")).classList.add("js-advert","advert"),i.id=void 0!==t?"advert_tmg_"+e+"_"+t:"advert_tmg_"+e,i.id=void 0!==s&&s?i.id+"_"+s:i.id,i.setAttribute("data-adtype",e),i}function tmgAdsGetTitleForInjected(e){var t;return traverse()?t=e:tmgAdsGetTitleForInjected(e.parentNode),t.parentNode.querySelector(".component-heading").childNodes[0].textContent.trim().replace(/ /g,"_").toLowerCase()}function traverse(e){return e.parentNode.classList.contains("list-of-entities")}function tmgAdsNativeInject(e,t,s,d,i,a){void 0!==i?i.multiList&&void 0!==i.multiList?document.querySelectorAll(e).forEach(function(e,t){tmgAdsInjectList(e,i,d,t)}):tmgAdsInjectList(document.querySelector(e),i,d):(void 0===s&&(s=0),tmgAdsInjectAdvert(document.querySelectorAll(e)[s],t,d,a))}function tmgAdsInjectList(e,t,s,d){var i,a,n,o=e.children.length,r=[];d=d;tmgSetAdvertPositions(t.repeat,r,t,o),r.forEach(function(t,r){n=createAdvert(s,r,d),(i=document.createElement("li")).classList.add("list-of-entities__item"),i.appendChild(n),a=t<=o?t:o,tmgAdsCreateItem(e.children[a-1],i,a>=o?"afterend":"beforebegin",n.id,"list")},d)}function tmgSetAdvertPositions(e,t,s,d){if(e)for(var i=Math.floor(d/s.position)>0?Math.floor(d/s.position):1,a=1;a<=i;a++)a>1?t.push(s.position*a-(a-1)):t.push(s.position*a);else t.push(s.position)}function tmgAdsInjectAdvert(e,t,s,d){var i=createAdvert(s,void 0,void 0,d),a="before"===t?"beforebegin":"afterend";"before"===t&&(a="beforebegin"),"after"===t&&(a="afterend"),"replace"===t&&(a="replace"),tmgAdsCreateItem(e,i,a,i.id,"std")}function tmgAdsCreateItem(e,t,s,d,i){"beforebegin"==s||"afterend"==s?e.insertAdjacentHTML(s,t.outerHTML):"object"==typeof e?(e.innerHTML="",e.appendChild(t)):console.warn("WARNING: native ad placement selector not found ["+d+"]")}function tmgAdsCreateNativeSlots(){var e={vp:tmgAds.layout.viewport,pt:tmgAds.page.pagetype,data:tmgAds.plugins.nativeads.config};("live"!==e.pt&&"video"!==e.pt||(e.pt="story"),-1===tmgAds.plugins.nativeads.config.exclude.indexOf(tmgAds.page.businessseg))&&(e.data.pagetype[e.pt]&&e.data.pagetype[e.pt].adverts.forEach(function(t){if(t.active&&(-1===t.exclude.indexOf(tmgAds.page.businessseg)&&t.include.indexOf(tmgAds.page.businessseg)>=0||0==t.exclude.length&&0==t.include)){var s=t.id,d=t.selector,i=t.position,a=t.poscount,n=t.list,o=t.viewports,r=t.style,m=document.querySelector(d);o.forEach(function(t){t===e.vp&&document.body.contains(m)&&tmgAdsNativeInject(d,i,a,s,n,r)})}}))}function tmgAdsCreate(e){tmgAds.metrics.timings_tmgAdsCreate=tmgAdsTimer();var t={};if(tmgAds.plugins.adhboff)console.log("HEADERBIDDING: turned off.");else if((tmgAds.plugins.prebid.active||tmgAds.plugins.adprebidon)&&!tmgAds.plugins.adprebidoff)if("received"==tmgAds.plugins.prebid.bidstatus||"timeout"==tmgAds.plugins.prebid.bidstatus);else{if(tmgAds.plugins.prebid.timeoutCount<=tmgAds.plugins.prebid.timeout)return void setTimeout(function(){tmgAds.plugins.prebid.timeoutCount+=tmgAds.plugins.prebid.checkFreq,tmgAdsCreate("tmgAds.plugins.prebid.bidstatus not received ["+tmgAds.plugins.prebid.bidstatus+"] retrying -> "+tmgAds.plugins.prebid.timeoutCount)},tmgAds.plugins.prebid.checkFreq);tmgAds.plugins.prebid.timeoutHit=!0,tmgAds.plugins.prebid.bidstatus="timeout"}if(document.querySelector(".advert-banner")&&document.querySelector(".container-fluid")&&0==tmgAds.sticky){var s=document.querySelector(".advert-banner"),d=document.querySelector(".container-fluid");d.parentNode.insertBefore(s,d.nextSibling),s.style.paddingBottom="10px",s.style.borderBottom=0}tmgAds.sticky&&("ban"==tmgAds.config.deliveryModel.activityStatus||"mpu"==tmgAds.config.deliveryModel.activityStatus?("ban"==tmgAds.config.deliveryModel.activityStatus&&document.getElementsByClassName("js-advert-banner")[0]&&document.getElementsByClassName("js-advert-banner")[0].classList.add("is-sticky"),"mpu"==tmgAds.config.deliveryModel.activityStatus&&(-1==tmgAds.config.deliveryModel.exempt.indexOf("ban")?document.getElementsByClassName("js-advert-banner")[0]&&(document.getElementsByClassName("js-advert-banner")[0].style.display="none"):console.log("ADTECH: Exempting ban slot from being collapsed as this has been added to the exempted as in tmgAds.config.deliveryModel.exempt"),"gallery"==tmgAds.page.pagetype?document.getElementsByClassName("article__sidebar-inner")[0]?document.getElementsByClassName("article__sidebar-inner")[0].classList.add("is-sticky"):document.getElementsByClassName("gallery__sidebar")[0].classList.add("is-sticky"):document.getElementsByClassName("js-sidebar")[0]&&document.getElementsByClassName("js-sidebar")[0].classList.add("is-sticky"))):console.log("NO MODEL TO SET ON THIS PAGE")),t.isLazyLoad=function(e,t){return tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].active?(tmgAdsLog("LazyLoad-Check: PASS: viewport -> "+tmgAds.layout.viewport),null!==typeof tmgAds.dfp.customvars.geo&&(tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].geo.indexOf(tmgAds.dfp.customvars.geo)>-1||0==tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].geo.length)?(tmgAdsLog("LazyLoad-Check: PASS: geo -> "+tmgAds.dfp.customvars.geo),tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].channels.indexOf(tmgAds.dfp.site)>-1||0==tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].channels.length?(tmgAdsLog("LazyLoad-Check: PASS: site -> "+tmgAds.dfp.site),tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].lazy.indexOf(e)>-1?(tmgAdsLog("LazyLoad-Check: PASS: adtype -> "+e),!(tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].exempt.indexOf(t)>-1)):(tmgAdsLog("LazyLoad-Check: FAIL: adtype -> "+e),!1)):(tmgAdsLog("LazyLoad-Check: FAIL: site -> "+tmgAds.dfp.site,tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].channels.indexOf(tmgAds.dfp.site)),!1)):(tmgAdsLog("LazyLoad-Check: FAIL: geo -> "+tmgAds.dfp.customvars.geo),!1)):(tmgAdsLog("LazyLoad-Check: FAIL: viewport -> "+tmgAds.layout.viewport),!1)},t.fetchAds=function(){for(var e=0;e<t.adverts.length;++e)t.adtype=t.adverts[e].id.split("_")[2],t.isLazyLoad(t.adtype,t.adverts[e].id)?tmgAdsElementInView(t.adverts[e],window,{top:tmgAds.plugins.lazyLoad[tmgAds.layout.viewport].offset}):googletag.cmd.push(tmgAdsBuildAd(t.adverts[e].id,"","").display())},t.adverts=tmgAdsGetAllAdSlots(),requestAnimationFrame(function(){t.fetchAds()})}function tmgAdsObjSz(e){var t=0;if("object"==typeof e)if(Object.keys)t=Object.keys(e).length;else if(window._)t=_.keys(e).length;else if(window.$)t=$.map(e,function(){return 1}).length;else for(var s in e)e.hasOwnProperty(s)&&t++;return t}function tmgAdsInit3rdParties(e){var t=[];for(let e in tmgAds.plugins)tmgAds.plugins.hasOwnProperty(e)&&tmgAds.plugins[e].hasOwnProperty("type")&&"js"==tmgAds.plugins[e].type&&"prebid"!=e&&"sourcepoint"!=e&&t.push(e);for(i=0;i<t.length;i++)tmgAds.plugins["ad"+t[i]+"off"]||(tmgAds.plugins[t[i]].active||tmgAds.plugins["ad"+t[i]+"on"])&&(tmgAds.plugins["ad"+t[i]+"on"]&&console.log("ADTECH:: "+t[i].toUpperCase()+" - Turned on by url-param"),tmgAdsLoad(tmgAds.plugins[t[i]]))}function tmgAdsUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function tmgAdsCreateDynamicAds(){var e=tmgAds.plugins.dynamicads.ads,t="tmgAdsCreateDynamicAds: ";if(tmgAds.plugins.dynamicads.active&&-1===tmgAds.plugins.dynamicads.exclude.indexOf(tmgAds.page.businessseg))for(var s in e)if(t="ADTECH: tmgAdsCreateDynamicAds: "+e[s].id,e[s].active&&e[s].cms.indexOf(tmgAds.page.cms)>-1&&(e[s].viewports.indexOf(tmgAds.layout.viewport)>=0||e[s].viewports.indexOf("all")>=0)&&(e[s].pagetypes.indexOf(tmgAds.page.pagetype)>=0||e[s].pagetypes.indexOf("all")>=0)&&(e[s].rendertypes.indexOf(tmgAds.page.dataLayer.pageType)>=0||e[s].rendertypes.indexOf("all")>=0)&&(e[s].storytypes.indexOf("all")>=0||e[s].storytypes.indexOf(tmgAds.page.storytype))&&(e[s].geo.include.indexOf(tmgAds.page.geo)>=0||e[s].geo.include.indexOf("all")>=0)&&-1===e[s].geo.exclude.indexOf(tmgAds.page.geo)&&(e[s].section.include.indexOf(tmgAds.page.site)>=0||e[s].section.include.indexOf("all")>=0)&&-1===e[s].section.exclude.indexOf(tmgAds.page.site))if(!e[s].testParam||window.location.search.indexOf(e[s].testParam)>=0){if(e[s].userstate.indexOf(tmgAds.tmg.userState)>=0||e[s].userstate.indexOf("all")>=0){var d=e[s].id,i=e[s].selector,a=e[s].position,n=e[s].poscount,o=e[s].list,r=(e[s].viewports,e[s].style);if("function"==typeof i)i();else if("string"==typeof i&&document.querySelectorAll(i).length>=1){if(e[s].fullWidth){var m=document.createElement("div");m.id="advert_wrapper_"+d,m.className="grid-col grid-col-12 commercial-unit u-full-bleed",m.setAttribute("data-test","commercial-unit"),m.setAttribute("data-test","commercial-unit"),m.innerHTML='<div id="advert_title_'+d+'" class="advert-label">Advertisement</div>',"before"==a&&document.querySelectorAll(i)[0].insertAdjacentElement("beforebegin",m),"after"==a&&document.querySelectorAll(i)[0].insertAdjacentElement("afterbegin",m);var g=document.createElement("div");g.id="advert_tmg_"+d,g.className="advert advert--banner js-advert",g.setAttribute("data-test","advert"),g.setAttribute("data-adtype",d),document.querySelectorAll("#advert_title_"+d)[0].insertAdjacentElement("afterend",g)}else tmgAdsNativeInject(i,a,n,d,o,r);if(r.length>0){var l=document.createElement("style");l.innerHTML="#advert_tmg_"+d+" {"+r+"}";var p=document.querySelector("script");p.parentNode.insertBefore(l,p)}}}}else console.log(t+' TESTPARAM - Slot requires ad-param to activate, set url param accordingly OR set ad-config for this slot to "false"  testParam->',e[s].testParam)}function tmgAdsGetYouTubeConfig(e){var t=tmgAds.dfp.customvars;t.at="vid",console.log("ADTECH: tmgAdsGetYouTubeConfig() - params",t);var s={adsConfig:{adTagParameters:{iu:tmgAds.dfp.adunit,cust_params:encodeURIComponent(JSON.stringify(t)),description_url:encodeURIComponent(tmgAds.page.url),npa:!0}}};return tmgAds.plugins.gpt.useppid&&void 0!==tmgAds.tmg.pid&&(s.adsConfig.adTagParameters.ppid=tmgAds.tmg.pid),s}function tmgAdsFormatAds(){var e={ads:document.getElementsByClassName("js-advert"),targets:["lmpu","bin"],adtype:{}};for(i=0;i<e.ads.length;i++)e.thisad=e.ads[i].id.split("_"),e.targets.indexOf(e.thisad[2])>=0&&(void 0===e.adtype[e.thisad[2]]?e.adtype[e.thisad[2]]=0:++e.adtype[e.thisad[2]],e.ads[i].id=e.thisad[0]+"_"+e.thisad[1]+"_"+e.thisad[2]+"_"+e.adtype[e.thisad[2]]);delete e.thisad}function tmgAdsAddAdTitles(e){for(nodes=document.getElementsByClassName("premium_ads_text");nodes.length>0;)nodes[0].parentNode.removeChild(nodes[0]);nodes=document.getElementsByClassName(e);for(var t=0;t<nodes.length;t++)s=nodes[t],d=void 0,(d={}).sp1=document.createElement("div"),d.sp1.innerText="Advertisement",d.sp1.style.backgroundColor=tmgAds.plugins.dynad.styling.title,d.sp1.classList.add("new_premium_ads_text"),d.sp1.classList.add("dynMpuAdTitle"),d.sp1.style.marginTop="0",d.sp1.style.marginBottom="0",d.sp1.style.fontFamily='"Telesans Text Regular", Arial,sans-serif',d.sp1.style.fontSize="11px",d.sp1.style.color=tmgAds.plugins.dynad.styling.titleText,d.sp1.style.flex="1",d.sp1.style.padding="0px",d.sp1.style.textAlign="center",d.sp2=s,d.parentDiv=d.sp2.parentNode,d.parentDiv.insertBefore(d.sp1,d.sp2);var s,d}function tmgAdsRemoveElement(e){var t=document.getElementById(e);t.parentNode.removeChild(t)}function tmgAdsGetAllAdSlots(){return document.getElementsByClassName("js-advert")}function tmgadsGetPageData(e){let t=new Array;for(let t in e)s(t,e[t]);function s(e,s){let d=[],i=[{obj:s,stack:""}];for(;i.length>0;){let s=i.shift(),a=s.obj;for(let n in a)if(a.hasOwnProperty(n))if("object"==typeof a[n]&&Object.keys(a[n]).length>0){let e=!1;for(let t=0;t<d.length;t++)if(d[t]===a[n]){e=!0;break}e||(d.push(a[n]),i.push({obj:a[n],stack:s.stack+"_"+n}))}else t.push(e+s.stack+"_"+n)}}return t}tmgAds=tmgAds||{},tmgAds.cmp=tmgAds.cmp||{loaded:!1,loadStatus:"unset",purposes:"unset",categories:"unset",vendors:"unset",cookies:"unset",onMessageReady:!1,onMessageReceiveData:!1,onConsentReady:!1},tmgAds.dfp=tmgAds.dfp||{},tmgAds.adobe=tmgAds.adobe||{},tmgAds.target=tmgAds.target||{},tmgAds.cmd=tmgAds.cmd||[],tmgAds.log=tmgAds.log||[],tmgAds.sticky=tmgAds.sticky||!1,tmgAds.metrics=tmgAds.metrics||{ads:{},readyState:{}},tmgAds.performance=tmgAds.performance||{},tmgAds.timeouts=tmgAds.timeouts||{},tmgAds.log=tmgAds.log||[],tmgAds.ads=tmgAds.ads||{},tmgAds.adslots=tmgAds.adslots||{},tmgAds.errors=tmgAds.errors||[],tmgAds.data=tmgAds.data||{metatags:{},metrics:{},ads:{}},tmgAds.refreshTimers=tmgAds.refreshTimers||{},tmgAds.prodServers=tmgAds.prodServers||["www.telegraph.co.uk","books.telegraph.co.uk","shop.telegraph.co.uk","dating.telegraph.co.uk","gardenshop.telegraph.co.uk","tickets.telegraph.co.uk","puzzles.telegraph.co.uk","fantasyfootball.telegraph.co.uk","corporate.telegraph.co.uk","telegraph.newsprints.co.uk","announcements.telegraph.co.uk","jobs.telegraph.co.uk"],tmgAds.mytelegraph=tmgAds.mytelegraph||null,tmgAds.about={version:"8.00.01",date:"2020-09-30",company:"Telegraph Media Group",author:"Sean Dillon - sean@telegraph.co.uk"},window.tmgAds.mytelegraph=window.tmgAds.mytelegraph||null,window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],"function"!=typeof __cmp&&function(){function e(e){var t="string"==typeof e.data,s=e.data;if("object"!=typeof s)try{s=JSON.parse(s)}catch(s){return}if(s.__cmpCall){var d=s.__cmpCall;window.__cmp(d.command,d.parameter,function(s,i){var a={__cmpReturn:{returnValue:s,success:i,callId:d.callId}};e.source.postMessage(t?JSON.stringify(a):a,"*")})}}!function e(){if(!window.frames.__cmpLocator)if(document.body){var t=document.body,s=document.createElement("iframe");s.style.cssText="display:none",s.name="__cmpLocator",t.appendChild(s)}else setTimeout(e,5)}(),"function"!=typeof __cmp&&(window.__cmp=function(){var e=arguments;if(__cmp.a=__cmp.a||[],!e.length)return __cmp.a;"ping"===e[0]?e[2]({gdprAppliesGlobally:!1,cmpLoaded:!1},!0):__cmp.a.push([].slice.apply(e))},__cmp.msgHandler=e,window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent("onmessage",e))}(),"function"!=typeof __tcfapi&&function(){var e=function(){for(var e,t="__tcfapiLocator",s=[],d=window;d;){try{if(d.frames[t]){e=d;break}}catch(e){}if(d===window.top)break;d=d.parent}e||(function e(){var s=d.document,i=!!d.frames[t];if(!i)if(s.body){var a=s.createElement("iframe");a.style.cssText="display:none",a.name=t,s.body.appendChild(a)}else setTimeout(e,5);return!i}(),d.__tcfapi=function(){for(var e,t=arguments.length,d=new Array(t),i=0;i<t;i++)d[i]=arguments[i];if(!d.length)return s;if("setGdprApplies"===d[0])d.length>3&&2===parseInt(d[1],10)&&"boolean"==typeof d[3]&&(e=d[3],"function"==typeof d[2]&&d[2]("set",!0));else if("ping"===d[0]){var a={gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"};"function"==typeof d[2]&&d[2](a)}else s.push(d)},d.addEventListener("message",function(e){var t="string"==typeof e.data,s={};try{s=t?JSON.parse(e.data):e.data}catch(e){}var d=s.__tcfapiCall;d&&window.__tcfapi(d.command,d.version,function(s,i){var a={__tcfapiReturn:{returnValue:s,success:i,callId:d.callId}};t&&(a=JSON.stringify(a)),e.source.postMessage(a,"*")},d.parameter)},!1))};"undefined"!=typeof module?module.exports=e:e()}(),function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var s=document.createEvent("CustomEvent");return s.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),s}e.prototype=window.Event.prototype,window.CustomEvent=e}(),0==document.location.pathname.indexOf("/_mytelegraph/")&&(console.log("ADTECH: my.telegraph.co.uk - adding tmg.pubsub polyfill"),function(e){function t(t){for(var d,i,o=t[0],r=t[1],m=t[2],l=0,p=[];l<o.length;l++)i=o[l],a[i]&&p.push(a[i][0]),a[i]=0;for(d in r)Object.prototype.hasOwnProperty.call(r,d)&&(e[d]=r[d]);for(g&&g(t);p.length;)p.shift()();return n.push.apply(n,m||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],i=!0,o=1;o<s.length;o++)0!==a[s[o]]&&(i=!1);i&&(n.splice(t--,1),e=d(d.s=s[0]))}return e}function d(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,d),s.l=!0,s.exports}var i={},a={1:0},n=[];d.m=e,d.c=i,d.d=function(e,t,s){d.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,t){if(1&t&&(e=d(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(d.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)d.d(s,i,function(t){return e[t]}.bind(null,i));return s},d.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="";var o=window["tmg.build"]=window["tmg.build"]||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var m=0;m<o.length;m++)t(o[m]);var g=r;s()}([]),(window["tmg.build"]=window["tmg.build"]||[]).push([[0],{0:function(e,t,s){var d,i;void 0===(i="function"==typeof(d=function(e){Object.defineProperty(e,"__esModule",{value:!0}),window.tmg=window.tmg||{};var t=function(e){try{var t=tmg,s=e.split(".");return"tmg"===s[0]&&(s=s.slice(1)),s.forEach(function(e){void 0===t[e]&&(t[e]={}),t=t[e]}),t}catch(t){console.warn("couldn't create namespace:",e)}};window.tmg.createNamespace=t,e.default={create:t}})?d.apply(t,[t]):d)||(e.exports=i)},1:function(e,t,s){var d,i;s=[t,s(0)],void 0===(i="function"==typeof(d=function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),t=t&&t.__esModule?t:{default:t};var s=function(){function e(e,t){for(var s=0;s<t.length;s++){var d=t[s];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,d.key,d)}}return function(t,s,d){return s&&e(t.prototype,s),d&&e(t,d),t}}(),d=new(function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.topics=[],this.publishedTopics=[],this.UID=-1}return s(e,[{key:"subscribe",value:function(e){var t=e.topic,s=e.func;if("function"!=typeof s)return!1;if(e.runIfAlreadyPublished)for(e=0;e<this.publishedTopics.length;e++)this.publishedTopics[e]===t&&s.call();return e=(this.UID+=1).toString(),this.topics.push({token:e,topic:t,func:s}),e}},{key:"unsubscribe",value:function(e){e=e.topic;for(var t=0;t<this.topics.length;t++)this.topics[t].topic===e&&this.topics.splice(t,1)}},{key:"publish",value:function(e){e=e.topic,this.publishedTopics.push(e);for(var t=0;t<this.topics.length;t++)this.topics[t].topic===e&&this.topics[t].func.call()}}]),e}());t.default.create("tmg.pubsub"),window.tmg.pubsub=d,e.default=d})?d.apply(t,s):d)||(e.exports=i)},64:function(e,t,s){var d,i;s=[t,s(0),s(1)],void 0===(i="function"==typeof(d=function(e,t,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default={namespace:(t&&t.__esModule?t:{default:t}).default,pubsub:(s&&s.__esModule?s:{default:s}).default}})?d.apply(t,s):d)||(e.exports=i)}}]),(window["tmg.build"]=window["tmg.build"]||[]).push([[10],[],[[64,1,0]]])),document.addEventListener("readystatechange",function(e){tmgAds.metrics.readyState=tmgAds.metrics.readyState||{},tmgAds.metrics.readyState[document.readyState]=tmgAdsTimer()}),document.addEventListener("DOMContentLoaded",function(e){tmgAds.metrics.readyState=tmgAds.metrics.readyState||{},tmgAds.metrics.readyState.DOMContentLoaded=tmgAdsTimer()}),function(e){tmgAdsLog("##############################################################################"),tmgAdsLog("#                        TMG-GPT.JS  INITIALISATION                          #"),tmgAdsLog("##############################################################################"),tmgAdsInitEventHandlers(),tmgAdsEvent("tmggpt:initstart"),tmgAdsInit(),tmgAdsInitConfig(),tmgAdsInitGeoAPIStatus(),tmgAdsInitData(),tmgAdsEvent("tmggpt:initend"),window.tmgCMP||window._tmgAdsCmpLibVer?(console.log("ADTECH: tmgCMP exists - tmgAds.cmp.loaded=true"),e.cmp.loaded=!0):console.log("ADTECH: WARNING!!! - CMP not loaded, load this dynamically from tmg-gpt.js"),e.cmp.loaded||(e.plugins.sourcepoint={name:"sourcepoint",active:!1,status:"init",type:"js",loadStatus:!1,url:"https://static.telegraph.co.uk/telegraph-advertising/tmg-cmp.js",urltest:"https://static.telegraph.co.uk/develop/telegraph-advertising/tmg-cmp.js",domains:["all"],timeout:5e3,timeoutFn:function(){tmg.pubsub.publish({topic:"tmg.ads.sourcepoint.timeout"})},preload:function(){},callback:function(){},onerror:function(){}},tmgAdsLoad(e.plugins.sourcepoint),console.log("SOURCEPOINT: firing manually as tmg-cmp.js is not in this page")),tmg.pubsub.subscribe({topic:"tmg.page.ready",func:function(){tmg.pubsub.subscribe({topic:"tmg.cmp.onConsentReady",func:function(){window.location.search.indexOf("tmgAdsShowPlaceholderAds")>=0&&(e.config.productionAds=!1,console.log("ADTECH: tmgAds.config.tmgAdsShowPlaceholderAds set")),window.location.search.indexOf("tmgAdsShowProductionAds")>=0&&(e.config.productionAds=!0,console.log("ADTECH: tmgAds.config.tmgAdsShowProductionAds set")),tmgAdsInit3rdParties(),tmgAdsInitDeliveryModel(),-1==e.prodServers.indexOf(window.location.host)&&tmg.pubsub.publish({topic:"tmg.ads.lotame.ready"}),tmg.pubsub.subscribe({topic:"tmg.ads.lotame.ready",func:function(){tmgAdsOnPageLoad(),tmgAdsCreateDynamicAds(),tmgAdsFormatAds(),tmgAdsInitHeaderBidders(),tmgAdsInitDFP(),tmg.pubsub.publish({topic:"tmg.ads.page.ready"}),tmgAdsCreate("Initial call after CMP load and tmg.ads.lotame.ready event fires")},runIfAlreadyPublished:!0})},runIfAlreadyPublished:!0})},runIfAlreadyPublished:!0})}(tmgAds);