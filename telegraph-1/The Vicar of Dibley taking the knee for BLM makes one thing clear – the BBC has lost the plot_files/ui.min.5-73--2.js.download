(window["tmg.build"]=window["tmg.build"]||[]).push([[24,7,8,9,13,14,16,17,20,25,26],[,,function(g,l,b){function n(k,b){for(var c=0;c<b.length;c++){var a=b[c];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(k,a.key,a)}}b.r(l);var p=b(0);g=b(1);b=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");!0;p.default.create("tmg.page");tmg.page={getMetaTag:this.getMetaTag,getMetaContent:this.getMetaContent,
getPageType:this.getPageType,getChannel:this.getChannel,getBusinessSegment:this.getBusinessSegment,getCategory:this.getCategory,getContentType:this.getContentType,getArticleId:this.getArticleId,getPublishDate:this.getPublishDate,getKeywords:this.getKeywords,getLocation:this.getLocation,getLeadAssetLayout:this.getLeadAssetLayout,isArticle:this.isArticle,isSponsored:this.isSponsored,isGallery:this.isGallery,isPremium:this.isPremium,isApp:this.isApp}}var d;return d=[{key:"getPageType",value:function(){return window.dataLayer&&
window.dataLayer.pageType}},{key:"getChannel",value:function(){return this.getMetaContent("tmgads.channel")}},{key:"getCategory",value:function(){return this.getMetaContent("DCSext.Category")}},{key:"getBusinessSegment",value:function(){return this.getMetaContent("tmgads.businessSegment")}},{key:"getContentType",value:function(){return this.getMetaContent("DCSext.Content_Type")}},{key:"getArticleId",value:function(){return this.getMetaContent("tmgads.articleid")}},{key:"getPublishDate",value:function(){return this.getMetaContent("DCSext.articleFirstPublished")}},
{key:"getKeywords",value:function(){return this.getMetaContent("keywords").split(",").map(function(c){return c.trim()})}},{key:"getLocation",value:function(){return document.location}},{key:"getMetaContent",value:function(c){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"content",e=this.getMetaTag(c),b="generic";return e&&e.getAttribute(a)&&(b=e.getAttribute(a)),b}},{key:"getMetaTag",value:function(c){return document.querySelector("meta[name\x3d'".concat(c,"']"))}},{key:"isArticle",
value:function(){var c=this,a=!1;return["articleRenderer","articleRenderer2"].forEach(function(e){c.getPageType()===e&&(a=!0)}),a}},{key:"isGallery",value:function(){return"galleryRenderer"===this.getPageType()}},{key:"isSponsored",value:function(){return"sponsored"===this.getBusinessSegment()}},{key:"isPremium",value:function(){return"true"===this.getMetaContent("tmg.premium.state")}},{key:"isApp",value:function(){return"true"===this.getMetaContent("tmg.app")}},{key:"isAuthor",value:function(){return document.documentElement.hasAttribute("data-is-author")}},
{key:"getLeadAssetLayout",value:function(){return this.isArticle()&&document.querySelector("[data-lead-asset-layout]")?document.querySelector("[data-lead-asset-layout]").dataset.leadAssetLayout:this.isArticle()?"hidden":void 0}}],n(b.prototype,d),b}();g.a.subscribe({topic:"tmg.page.ready",func:new b,runIfAlreadyPublished:!0});l.default=new b},function(g,l,b){function n(){for(var b=0,k={};b<arguments.length;b++){var d=arguments[b],c;for(c in d)k[c]=d[c]}return k}l.a=function d(b){function c(a,e,r){if(1<
arguments.length){if("number"==typeof(r=n({path:"/"},c.defaults,r)).expires){var k=new Date;k.setMilliseconds(k.getMilliseconds()+864E5*r.expires);r.expires=k}try{var d=JSON.stringify(e);/^[\{\[]/.test(d)&&(e=d)}catch(H){}return e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),a=(a=(a=encodeURIComponent(String(a))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[a,"\x3d",e,
r.expires&&"; expires\x3d"+r.expires.toUTCString(),r.path&&"; path\x3d"+r.path,r.domain&&"; domain\x3d"+r.domain,r.secure?"; secure":""].join("")}a||(d={});k=document.cookie?document.cookie.split("; "):[];for(var z=/(%[0-9A-Z]{2})+/g,v=0;v<k.length;v++){var t=k[v].split("\x3d"),g=t[0].replace(z,decodeURIComponent);t=t.slice(1).join("\x3d");'"'===t.charAt(0)&&(t=t.slice(1,-1));try{if(t=b&&b(t,g)||t.replace(z,decodeURIComponent),this.json)try{t=JSON.parse(t)}catch(H){}if(a===g){d=t;break}a||(d[g]=t)}catch(H){}}return d}
return c.get=c.set=c,c.getJSON=function(){return c.apply({json:!0},[].slice.call(arguments))},c.defaults={},c.remove=function(a,b){c(a,"",n(b,{expires:-1}))},c.withConverter=d,c}()},function(g,l,b){b.r(l);g=b(0);b={};var n=function(b){var c={};return"string"==typeof b&&(c=p(b.replace(/'/g,'"'))),c},p=function(b,c){c=c||{};var a=b,e=[],r=[],d=/[{?,\s]\s*"([^"]|\\")+"\s*:(\s*"([^"]|\\")+"|(.+))\s*[},]/gi,g=/^\s*{?\s*'|'\s*}?\s*$/i;if(!b)return c;if("[object Object]"===Object.prototype.toString.call(b))return b;
if(k(a)||((a.match(d)||[]).forEach(function(c){if(c.includes('"label"')){var b=c.replace(/^\s*[{\s]|[,}]\s*$/gi,"").split(":")[1].replace(/\s*"([^]+|\\")"\s*$/gi,"$1"),e=b.replace(/"/gi,'\\"');b=c.replace(b,e);a=a.replace(c,b)}}),e=a.replace(d,"").split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/)),e.forEach(function(a){a=a.replace(/^\s*{|}\s*$/gi,"");k("{".concat(a,"}"))||r.push(a)}),r.forEach(function(c){var b=!1,e=c;!0===g.test(c)&&(e=c.replace(/^\s*'([^']+|\\')':/,'"$1":').replace(/:\s*('')\s*$/,': ""').replace(/:\s*'([^']+|\\')'\s*$/,
': "$1"'),b=k("{".concat(e,"}")));b||!0!==/[^"']\w+[^"']:/.test(e)||(e=e.replace(/^\s*(.*?):/,'"$1":'),b=k("{".concat(e,"}")));b&&(a=a.replace(c,e))}),k(a))c=k(a);else try{JSON.parse(a)}catch(z){console.log("tmg.json.tryParse failed:",z)}return c},k=function(b){var c=!1;try{c=JSON.parse(b)}catch(a){}return c};b={parseFromAem:n,tryParse:p,simpleTryParse:k};g.default.create("tmg.json");tmg.json=b;l.default=b;tmg.parseAemJson=n},function(g,l,b){g=b(8);g=b.n(g);b(0).default.create("tmg.store");tmg.store=
g.a;l.a=g.a},function(g,l,b){b.r(l);var n=b(3),p=b(4);g=b(0);var k=b(5),d={pId:"",firstName:"",lastName:"",username:"",email:"",readerType:"",subscriber:"",subButton:""},c={livefyreToken:"livefyre-token",pianoRefToken:"user_ref_token",meterCount:"tmg_meter_count",personalisation:"tmg_p13n",publicId:"tmg_pid",registrationSuccess:"tmg_registration_success",rememberMe:"tmg_rem",session:"tmg_session",refreshToken:"tmg_refresh",subscriptionConfirmation:"tmg_subscription_confirmation"},a={},e=document.querySelector("html"),
r=function(){var a=document.querySelectorAll('[class*\x3d"'.concat("logged-in--",'"], [class*\x3d"').concat("is-subscriber--",'"]'));(a=Array.prototype.slice.call(a)).forEach(function(a){u(a,!0)})},u=function(a,c){if(c||r(),a)return c="\\b(?:".concat("logged-in--","|").concat("is-subscriber--",").+\\b"),a.className=a.className.replace(new RegExp(c,"g"),""),a.classList&&(a.classList.add("".concat("logged-in--").concat(z())),a.classList.add("".concat("is-subscriber--").concat(v()))),a.classList},Q=
function(){var a=n.a.get(c.personalisation);return p.default.tryParse(a,d)},z=function(){return!!n.a.get(c.session)},v=function(){return"true"===a.subscriber},t=function(){return window.sessionStorage.removeItem("id_token"),window.sessionStorage.removeItem("access_token"),n.a.remove(c.session),w(),!0},w=function(){return a=Q(),u(e),a};b={applyStatusCssClasses:u,clearAllData:function(){for(var a in t(),c)n.a.remove(c[a]);return k.a.remove("fyre-auth"),k.a.remove("fyre-authentication-creds"),w(),!0},
getLiveFyreToken:function(){return n.a.get(c.livefyreToken)||!1},getLiveFyreDetails:function(){var a=k.a.get("fyre-auth")||"{}";return p.default.tryParse(a)},getPianoRefToken:function(){return n.a.get(c.pianoRefToken)||!1},getMeterCount:function(){return!1},getMyTelegraphToken:function(){var a=k.a.storage.read("tmg.user.mytelegraph.token");return"undefined"!==a&&null!==a||(a=!1),a},getProfile:Q,getSessionId:function(){return n.a.get(c.session)||""},getRefreshToken:function(){return n.a.get(c.refreshToken)||
""},isLoggedIn:z,isRegistered:function(){return!!a.pId},isSubscriber:v,canComment:function(){return"true"===a.subscriber&&!!n.a.get(c.session)},isMyTelegraphOnboarded:function(){return!!k.a.storage.read("tmg.user.mytelegraph.onboarded.status")},login:function(){return w(),!1},logout:t,setMyTelegraphToken:function(a){return k.a.storage.write("tmg.user.mytelegraph.token",a.token)},setMyTelegraphOnboarded:function(a){return k.a.storage.write("tmg.user.mytelegraph.onboarded.status",a.status)},updateState:w};
g.default.create("tmg.user");window.tmg.user=b;a=w();l.default=b},function(g,l,b){b.r(l);var n;g=b(0);var p=b(2),k=new RegExp(/\?[^#]*|(?=#)|$/),d=(n={},function(a){return n[a]||(n[a]=new RegExp("([?\x26;]".concat(a,"(?\x3d[\x3d\x26;#]|$))\x3d?([^\x26;#]*)")))}),c=function(a,c){return(a=d(c).exec(a))&&decodeURIComponent(a[2])},a=function(a,b,e){var r,u,t;return void 0===a&&(a=p.default.getLocation().search),null===c(a,b)?(r="".concat(b,"\x3d").concat(encodeURIComponent(e)),u=k.exec(a)[0],t=a.replace(k,
(u.length?u+"\x26":"?")+r)):t=a.replace(d(b),"$1\x3d".concat(encodeURIComponent(e))),t};b=function(a,b){if(null!==c(b,a)){var e=b.split("?")[0];b=(-1!==b.indexOf("?")?b.split("?")[1]:"").split("\x26");for(var k=b.length-1;0<=k;--k)b[k].split("\x3d")[0]===a&&b.splice(k,1);return e+(0<b.length?"?":"")+b.join("\x26")}return b};var e=function(b,e){return null!==c(b,"redirectTo")?a(b,"redirectTo",e):b};g.default.create("tmg.GET_PARAM");tmg.getQuerystringParam=c;tmg.setQuerystringParam=a;tmg.removeQuerystringParam=
b;tmg.updateRedirectParam=e;location.search.substr(1).split("\x26").forEach(function(a){a=a.split("\x3d");1<a.length?tmg.GET_PARAM[a[0]]=decodeURIComponent(a[1]):tmg.GET_PARAM[a[0]]=""});l.default={matchParam:d,matchQuerystring:k,getQuerystringParam:c,removeQuerystringParam:b,setQuerystringParam:a,updateRedirectParam:e}},function(g,l,b){(function(b){g.exports=function a(b,d,c){function e(r,g){if(!d[r]){if(!b[r]){if(k)return k(r,!0);g=Error("Cannot find module '"+r+"'");throw g.code="MODULE_NOT_FOUND",
g;}g=d[r]={exports:{}};b[r][0].call(g.exports,function(a){return e(b[r][1][a]||a)},g,g.exports,a,b,d,c)}return d[r].exports}for(var k=!1,g=0;g<c.length;g++)e(c[g]);return e}({1:[function(b,d,c){c=b("../src/store-engine");b=[b("../storages/localStorage"),b("../storages/sessionStorage"),b("../storages/cookieStorage"),b("../storages/memoryStorage")];d.exports=c.createStore(b,[])},{"../src/store-engine":2,"../storages/cookieStorage":4,"../storages/localStorage":5,"../storages/memoryStorage":6,"../storages/sessionStorage":7}],
2:[function(b,d,c){function a(a,b,c){c||(c="");a&&!v(a)&&(a=[a]);b&&!v(b)&&(b=[b]);var d=c?"__storejs_"+c+"_":"",r=c?new RegExp("^"+d):null;if(!/^[a-zA-Z0-9_\-]*$/.test(c))throw Error("store.js namespaces can only have alphanumerics + underscores and dashes");var u=n({_namespacePrefix:d,_namespaceRegexp:r,_testStorage:function(a){try{a.write("__storejs__test__","__storejs__test__");var b="__storejs__test__"===a.read("__storejs__test__");return a.remove("__storejs__test__"),b}catch(y){return!1}},_assignPluginFnProp:function(a,
b){var c=this[b];this[b]=function(){var b=e(arguments,0),d=this,k=[function(){if(c)return g(arguments,function(a,c){b[c]=a}),c.apply(d,b)}].concat(b);return a.apply(d,k)}},_serialize:function(a){return JSON.stringify(a)},_deserialize:function(a,b){if(!a)return b;var c="";try{c=JSON.parse(a)}catch(L){c=a}return void 0!==c?c:b},_addStorage:function(a){this.enabled||this._testStorage(a)&&(this.storage=a,this.enabled=!0)},_addPlugin:function(a){var b=this;if(v(a))g(a,function(a){b._addPlugin(a)});else if(!k(this.plugins,
function(b){return a===b})){if(this.plugins.push(a),!t(a))throw Error("Plugins must be function values that return objects");var c=a.call(this);if(!w(c))throw Error("Plugins must return an object of function properties");g(c,function(c,e){if(!t(c))throw Error("Bad plugin property: "+e+" from plugin "+a.name+". Plugins should only return functions.");b._assignPluginFnProp(c,e)})}},addStorage:function(a){(function(){var a="undefined"==typeof console?null:console;a&&(a.warn?a.warn:a.log).apply(a,arguments)})("store.addStorage(storage) is deprecated. Use createStore([storages])");
this._addStorage(a)}},H,{plugins:[]});return u.raw={},g(u,function(a,b){t(a)&&(u.raw[b]=l(u,a))}),g(a,function(a){u._addStorage(a)}),g(b,function(a){u._addPlugin(a)}),u}b=b("./util");var e=b.slice,k=b.pluck,g=b.each,l=b.bind,n=b.create,v=b.isList,t=b.isFunction,w=b.isObject;d.exports={createStore:a};var H={version:"2.0.12",enabled:!1,get:function(a,b){a=this.storage.read(this._namespacePrefix+a);return this._deserialize(a,b)},set:function(a,b){return void 0===b?this.remove(a):(this.storage.write(this._namespacePrefix+
a,this._serialize(b)),b)},remove:function(a){this.storage.remove(this._namespacePrefix+a)},each:function(a){var b=this;this.storage.each(function(c,e){a.call(b,b._deserialize(c),(e||"").replace(b._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(a){return this._namespacePrefix=="__storejs_"+a+"_"},createStore:function(){return a.apply(this,arguments)},addPlugin:function(a){this._addPlugin(a)},namespace:function(b){return a(this.storage,this.plugins,b)}}},
{"./util":3}],3:[function(k,d,c){(function(a){function b(a,b){return Array.prototype.slice.call(a,b||0)}function c(a,b){k(a,function(a,c){return b(a,c),!1})}function k(a,b){if(g(a))for(var c=0;c<a.length;c++){if(b(a[c],c))return a[c]}else for(c in a)if(a.hasOwnProperty(c)&&b(a[c],c))return a[c]}function g(a){return null!=a&&"function"!=typeof a&&"number"==typeof a.length}var l=Object.assign?Object.assign:function(a,b,e,k){for(var d=1;d<arguments.length;d++)c(Object(arguments[d]),function(b,c){a[c]=
b});return a},v=function(){if(Object.create)return function(a,c,e,d){var k=b(arguments,1);return l.apply(this,[Object.create(a)].concat(k))};var a=function(){};return function(c,e,k,d){var g=b(arguments,1);return a.prototype=c,l.apply(this,[new a].concat(g))}}();d.exports={assign:l,create:v,trim:String.prototype.trim?function(a){return String.prototype.trim.call(a)}:function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},bind:function(a,b){return function(){return b.apply(a,Array.prototype.slice.call(arguments,
0))}},slice:b,each:c,map:function(a,b){var c=g(a)?[]:{};return k(a,function(a,e){return c[e]=b(a,e),!1}),c},pluck:k,isList:g,isFunction:function(a){return a&&"[object Function]"==={}.toString.call(a)},isObject:function(a){return a&&"[object Object]"==={}.toString.call(a)},Global:"undefined"!=typeof window?window:a}}).call(this,void 0!==b?b:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(b,d,c){function a(a){for(var b=l.cookie.split(/; ?/g),c=b.length-1;0<=c;c--)if(g(b[c])){var e=
b[c].split("\x3d"),d=unescape(e[0]);a(unescape(e[1]),d)}}function e(a){a&&k(a)&&(l.cookie=escape(a)+"\x3d; expires\x3dThu, 01 Jan 1970 00:00:00 GMT; path\x3d/")}function k(a){return(new RegExp("(?:^|;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$\x26")+"\\s*\\\x3d")).test(l.cookie)}b=b("../src/util");c=b.Global;var g=b.trim;d.exports={name:"cookieStorage",read:function(a){if(!a||!k(a))return null;a="(?:^|.*;\\s*)"+escape(a).replace(/[\-\.\+\*]/g,"\\$\x26")+"\\s*\\\x3d\\s*((?:[^;](?!;))*[^;]?).*";return unescape(l.cookie.replace(new RegExp(a),
"$1"))},write:function(a,b){a&&(l.cookie=escape(a)+"\x3d"+escape(b)+"; expires\x3dTue, 19 Jan 2038 03:14:07 GMT; path\x3d/")},each:a,remove:e,clearAll:function(){a(function(a,b){e(b)})}};var l=c.document},{"../src/util":3}],5:[function(b,d,c){function a(a){return e.localStorage.getItem(a)}var e=b("../src/util").Global;d.exports={name:"localStorage",read:a,write:function(a,b){return e.localStorage.setItem(a,b)},each:function(b){for(var c=e.localStorage.length-1;0<=c;c--){var d=e.localStorage.key(c);
b(a(d),d)}},remove:function(a){return e.localStorage.removeItem(a)},clearAll:function(){return e.localStorage.clear()}}},{"../src/util":3}],6:[function(b,d,c){d.exports={name:"memoryStorage",read:function(b){return a[b]},write:function(b,c){a[b]=c},each:function(b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)},remove:function(b){delete a[b]},clearAll:function(b){a={}}};var a={}},{}],7:[function(b,d,c){function a(a){return e.sessionStorage.getItem(a)}var e=b("../src/util").Global;d.exports={name:"sessionStorage",
read:a,write:function(a,b){return e.sessionStorage.setItem(a,b)},each:function(b){for(var c=e.sessionStorage.length-1;0<=c;c--){var d=e.sessionStorage.key(c);b(a(d),d)}},remove:function(a){return e.sessionStorage.removeItem(a)},clearAll:function(){return e.sessionStorage.clear()}}},{"../src/util":3}]},{},[1])(1)}).call(this,b(14))},function(g,l,b){function n(b,d){for(var c=0;c<d.length;c++){var a=d[c];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,
a.key,a)}}b.r(l);var p=b(0);g=b(1);b=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");!0;p.default.create("tmg.utils");tmg.utils={injectScript:this.inject}}var d;return d=[{key:"inject",value:function(b){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return new Promise(function(c,d){b?(d=document.createElement("script"),d.setAttribute("src",b),d.addEventListener("load",c,!1),a&&d.setAttribute("defer","true"),document.querySelector("head").appendChild(d)):
d(Error("No src supplied"))})}}],n(b.prototype,d),b}();g.a.subscribe({topic:"tmg.page.ready",func:new b,runIfAlreadyPublished:!0});l.default=b},,function(g,l,b){function n(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}b.r(l);g=b(1);var p=b(0),k=b(2);b=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");!0;this.params={local:"local",qa:"qa",
ci:"ci",staging:"staging",prod:"prod"};this.currentEnv=this.determineEnvironment();p.default.create("tmg.environment");tmg.environment={currentEnv:this.currentEnv,getEnvironment:this.getEnvironment,getList:this.getList,getTld:this.getTld,isCommentingTurnedOn:this.isCommentingTurnedOn,isHttps:this.isHttps,isLocal:this.isLocal,isProd:this.isProd}}var c;return c=[{key:"determineEnvironment",value:function(){var a=k.default.getLocation().hostname.split(".");return a.some(function(a){return"local"===a||
"127"===a||"localhost"===a})?this.getList().local:a.some(function(a){return/(^|-)ci[0-9]+$/i.test(a)})?this.getList().ci:a.some(function(a){return/(^|-)qa[0-9]+$/i.test(a)})?this.getList().qa:a.some(function(a){return/(^|-)staging(.*)$/i.test(a)})?this.getList().staging:this.getList().prod}},{key:"getList",value:function(){return this.params}},{key:"getEnvironment",value:function(){return this.currentEnv}},{key:"getTld",value:function(){return"telegraph.co.uk"}},{key:"isCommentingTurnedOn",value:function(){var a=
!1;try{void 0!==tmg.COMMENTING_STATUS&&(a=!!tmg.COMMENTING_STATUS)}catch(e){console.log(e)}return a}},{key:"isHttps",value:function(){return"https:"===k.default.getLocation().protocol||this.isLocal()}},{key:"isLocal",value:function(){return this.getEnvironment()===this.getList().local}},{key:"isProd",value:function(){return this.getEnvironment()===this.getList().prod}}],n(b.prototype,c),b}();g.a.subscribe({topic:"tmg.page.ready",func:new b,runIfAlreadyPublished:!0});l.default=b},function(g,l,b){function n(a,
b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}b.r(l);var p=b(0);g=b(1);var k=b(3),d=b(6),c=b(2),a=b(7),e=b(4),r=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");!0;p.default.create("tmg.dataLayerUtils");window.dataLayer=window.dataLayer||{};this.cookieStatus=this.getCookies();this.isPaymentRenderer=window.dataLayer.pageType&&"paymentRenderer"===
window.dataLayer.pageType;this.listenerEvents=["click","input"];this.initListeners("[data-layer-event]");tmg.dataLayerUtils={cookieStatus:this.cookieStatus,update:this.update,isPaymentRenderer:this.isPaymentRenderer,onRegistrationSuccess:this.onRegistrationSuccess,onRegistrationUpdate:this.onRegistrationUpdate,onSubscriptionConfirmation:this.onSubscriptionConfirmation,updateSubscription:this.updateSubscription,updateUserStatus:this.updateUserStatus,checkCookie:this.checkCookie,removeCookie:this.removeCookie,
addPropertyValue:this.addPropertyValue};this.update()}var g,l;return l=[{key:"addPropertyValue",value:function(a,b){a&&b&&(window.dataLayer[a]=b)}}],g=[{key:"update",value:function(){this.cookieStatus.registrationSuccess.value?(this.onRegistrationSuccess(),this.removeCookie(this.cookieStatus.registrationSuccess.name)):this.cookieStatus.registrationUpdate.value?(this.onRegistrationUpdate(),this.removeCookie(this.cookieStatus.registrationUpdate.name)):this.cookieStatus.subscriptionConfirmation.value?
(this.onSubscriptionConfirmation(),this.removeCookie(this.cookieStatus.subscriptionConfirmation.name)):this.isPaymentRenderer&&this.updateSubscription();this.updateUserStatus()}},{key:"updateUserStatus",value:function(){d.default.isLoggedIn()?window.dataLayer.userStatus=d.default.isSubscriber()?"subscribed":"registered":window.dataLayer.userStatus="anonymous"}},{key:"onRegistrationSuccess",value:function(){var a=this.checkCookie(this.cookieStatus.registrationSuccess,"success_facebook"),b=this.checkCookie(this.cookieStatus.registrationSuccess,
"success_emailoffers-true");window.dataLayer.event=["registrationComplete"];window.dataLayer.registration={registrationType:a?"facebook":"email",emailOptIn:b?"true":"false"}}},{key:"onRegistrationUpdate",value:function(){"1"!==this.cookieStatus.registrationUpdate.value?(window.dataLayer.event=["registrationUpdate","newsletterSignup"],window.dataLayer.newsletterType=this.cookieStatus.registrationUpdate.value):window.dataLayer.event=["registrationUpdate"];window.dataLayer.registration={registrationType:"email"}}},
{key:"onSubscriptionConfirmation",value:function(){window.dataLayer.event=["subscriptionConfirmation"];window.dataLayer.subscription=e.default.tryParse(JSON.stringify(this.cookieStatus.subscriptionConfirmation.value))}},{key:"updateSubscription",value:function(){window.dataLayer.event=["subscriptionCheckout"];window.dataLayer.subscription={productID:a.default.getQuerystringParam(c.default.getLocation().search,"productId")}}},{key:"checkCookie",value:function(a,b){return!(!a||!b)&&a.value===b}},{key:"removeCookie",
value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;a&&k.a.remove(a,{domain:".telegraph.co.uk"})}},{key:"initListeners",value:function(a){var b=this;(a=document.querySelectorAll(a))&&a.forEach(function(a){return b.bindListeners(a)})}},{key:"bindListeners",value:function(a){var b=this;this.listenerEvents.forEach(function(c){a.addEventListener(c,function(a){b.addEvent(a.target.dataset.layerEvent)})})}},{key:"addEvent",value:function(a){window.dataLayer.event!==a&&(window.dataLayer.event=
a)}},{key:"getCookies",value:function(){return{registrationSuccess:{name:"tmg_registration_success",value:k.a.get("tmg_registration_success")},registrationUpdate:{name:"tmg_registration_update",value:k.a.get("tmg_registration_update")},subscriptionConfirmation:{name:"tmg_subscription_confirmation",value:k.a.get("tmg_subscription_confirmation")}}}}],n(b.prototype,g),l&&n(b,l),b}();g.a.subscribe({topic:"tmg.page.ready",func:function(){new r},runIfAlreadyPublished:!0});l.default=r},,function(g,l){l=
function(){return this}();try{l=l||(new Function("return this"))()}catch(b){"object"==typeof window&&(l=window)}g.exports=l},function(g,l,b){l.a={throttle:function(b,g){var k,d;return g=g||200,function(){var c=this,a=+new Date,e=arguments;k&&a<k+g?(clearTimeout(d),d=setTimeout(function(){k=a;b.apply(c,e)},g)):(k=a,b.apply(c,e))}}}},,,function(g,l,b){function n(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,
e.key,e)}}var p=b(0),k=b(7);g=b(1);b=function(){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");!0;this.redirectSelector="[data-redirect-current]"}var c;return c=[{key:"init",value:function(){var a=document.querySelectorAll(this.redirectSelector);a.length&&this.setRedirects(a);p.default.create("tmg.redirect");window.tmg.redirect={getAmendedHref:this.getAmendedHref}}},{key:"setRedirects",value:function(a){var b=this;a.forEach(function(a){var c=a.getAttribute("href");
c&&a.setAttribute("href",b.getAmendedHref(c))})}},{key:"getAmendedHref",value:function(a){return-1<a.indexOf("redirectTo")?k.default.updateRedirectParam(a,window.location.href):k.default.setQuerystringParam(a,"redirectTo",window.location.href)}}],n(b.prototype,c),b}();g.a.subscribe({topic:"tmg.page.ready",func:(new b).init(),runIfAlreadyPublished:!0});l.a=new b},,function(g,l,b){function n(b,c){for(var a=0;a<c.length;a++){var e=c[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=
!0);Object.defineProperty(b,e.key,e)}}b.r(l);g=b(1);var p=b(15),k=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");!0;this.params=Object.assign({scrollableBarSelector:"[data-drag-scroll]",activeClass:"is-dragging",defaultPositionSelector:""},a);this.options={scrollableBar:document.querySelector(this.params.scrollableBarSelector),isDragging:!1,startMousePosition:0,startScrollPosition:0,startScrollItem:null,endScrollItem:null}}var c;return c=
[{key:"init",value:function(){this.options.scrollableBar&&(""!==this.params.defaultPositionSelector&&this.scrollToCurrentItem(),this.isTouchDevice()||this.bindListeners())}},{key:"bindListeners",value:function(){var a=this;this.options.scrollableBar.addEventListener("mousedown",function(b){a.onMouseDown(b)});window.addEventListener("mouseup",function(b){a.options.isDragging&&a.onMouseUp(b)});window.addEventListener("mousemove",p.a.throttle(function(b){a.options.isDragging&&a.onDrag(b)},10));this.handleDragLinkClick()}},
{key:"setStartPosition",value:function(a){this.options.startMousePosition=a.pageX-this.options.scrollableBar.offsetLeft;this.options.startScrollPosition=this.options.scrollableBar.scrollLeft}},{key:"onMouseDown",value:function(a){this.options.isDragging=!0;a.preventDefault();this.options.startScrollItem=a.target;this.options.endScrollItem=null;this.setStartPosition(a);this.toggleActiveClass(!0)}},{key:"onMouseUp",value:function(a){this.options.isDragging=!1;this.toggleActiveClass(!1);this.options.endScrollItem=
a.target}},{key:"onDrag",value:function(a){this.options.scrollableBar.scrollLeft=this.options.startScrollPosition-(a.pageX-this.options.scrollableBar.offsetLeft-this.options.startMousePosition)}},{key:"handleDragLinkClick",value:function(){var a=this;this.options.scrollableBar.querySelectorAll("a").forEach(function(b){b.addEventListener("click",function(b){a.hasScrolled()&&a.options.startScrollItem===a.options.endScrollItem&&(b.preventDefault(),a.options.startScrollItem=null,a.options.endScrollItem=
null)})})}},{key:"hasScrolled",value:function(){return this.options.startScrollPosition!==this.options.scrollableBar.scrollLeft}},{key:"scrollToCurrentItem",value:function(){var a=this.options.scrollableBar.querySelector(this.params.defaultPositionSelector);a&&a.offsetLeft>this.options.scrollableBar.offsetWidth-100&&(this.options.scrollableBar.scrollLeft=a.offsetLeft/2)}},{key:"toggleActiveClass",value:function(a){(a&&!this.options.scrollableBar.classList.contains(this.params.activeClass)||!a&&this.options.scrollableBar.classList.contains(this.params.activeClass))&&
this.options.scrollableBar.classList.toggle(this.params.activeClass)}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}}],n(b.prototype,c),b}();g.a.subscribe({topic:"tmg.page.ready",func:function(){(new k({defaultPositionSelector:"[data-current-navigation-item]"})).init()},runIfAlreadyPublished:!0});l.default=k},function(g,l,b){b.r(l);var n=b(0);g=function(){n.default.create("tmg.guid");window.tmg.guid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,
function(b){var g=16*Math.random()|0;return("x"===b?g:3&g|8).toString(16)})};b(1).a.subscribe({topic:"tmg.page.ready",func:g,runIfAlreadyPublished:!0});l.default={guid:g}},function(g,l,b){function n(b,d){for(var c=0;c<d.length;c++){var a=d[c];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}b.r(l);var p=b(17);g=function(){function b(c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");!0;this.params=Object.assign({openTriggerSelector:"[data-modal-open-button]",
contentUrl:"/all-sections.modal/"},c);this.openButton=document.querySelector(this.params.openTriggerSelector);this.modal="";this.keydownActions=this.keydownActions.bind(this);this.options={hasContent:!1,keyboardNavigation:!1,firstFocusableElement:"",lastFocusableElement:""}}var d;return d=[{key:"init",value:function(){this.bindButtonClick(this.openButton)}},{key:"bindButtonClick",value:function(b){var a=this;b&&b.addEventListener("click",function(b){b.preventDefault();a.modal||a.createModalContainer();
a.toggleModal()})}},{key:"createModalContainer",value:function(){var b=document.createElement("div");b.classList.add("all-sections-modal","all-sections-modal--hidden");b.setAttribute("aria-hidden","true");b.setAttribute("role","dialog");b.setAttribute("aria-label","Navigation modal containing links for all sections of the site");b.setAttribute("data-all-sections-modal","");document.body.appendChild(b);this.modal=b}},{key:"toggleModal",value:function(){this.modal.classList.toggle("all-sections-modal--hidden");
document.querySelector("html").classList.toggle("all-sections-modal--is-open");this.options.hasContent?this.toggleFocusableElement():(this.setModalHeaderContent(),this.setModalContentWrapper(),this.getModalContent());this.bindKeydownEventListeners();this.modal.classList.contains("all-sections-modal--hidden")?this.modal.setAttribute("aria-hidden",!0):this.modal.setAttribute("aria-hidden",!1)}},{key:"bindKeydownEventListeners",value:function(){this.modal.classList.contains("all-sections-modal--hidden")?
document.removeEventListener("keydown",this.keydownActions):document.addEventListener("keydown",this.keydownActions)}},{key:"setModalHeaderContent",value:function(){this.modal.insertAdjacentHTML("beforeend",'\n\t\t\t\x3cheader class\x3d"site-header all-sections-modal__header-wrapper"\x3e\n\t\t\t\t\x3cdiv class\x3d"site-header__container site-header__primary-content all-sections-modal__header-content"\x3e\n\n\t\t\t\t\t\x3cdiv class\x3d"site-header__logo"\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"e-site-logo__award"\x3e\n\t\t\t\t\t\t\tNews website of the year\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\t\x3ca href\x3d"https://www.telegraph.co.uk" class\x3d"e-site-logo"\x3e\n\t\t\t\t\t\t\t\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"\n\t\t\t\t\t\t\t\taria-labelledby\x3d"site-logo-title"\n\t\t\t\t\t\t\t\tclass\x3d"e-site-logo__image"\x3e\n\t\t\t\t\t\t\t\t\x3cuse xlink:href\x3d"#site-logo"\x3e\x3c/use\x3e\n\t\t\t\t\t\t\t\x3c/svg\x3e\n\t\t\t\t\t\t\t'.concat(this.hasPoppyLogo()?
this.getPoppyMarkup():"",'\n\t\t\t\t\t\t\x3c/a\x3e\n\t\t\t\t\t\x3c/div\x3e\n\n\t\t\t\t\t\x3cdiv class\x3d"all-sections-modal__button"\x3e\n\t\t\t\t\t\t\x3cdiv class\x3d"e-site-header-button e-site-header-button--close"\x3e\n\t\t\t\t\t\t\t\x3ca href\x3d""\n\t\t\t\t\t\t\t\tclass\x3d"e-site-header-button__link"\n\t\t\t\t\t\t\t\taria-label\x3d"Close all sections navigation menu"\n\t\t\t\t\t\t\t\tdata-modal-close-button\x3e\n\t\t\t\t\t\t\t\t\x3cspan class\x3d"all-sections-modal__button-text"\x3eClose Menu\x3c/span\x3e\n\t\t\t\t\t\t\t\t\x3csvg id\x3d"global-close" class\x3d"e-site-header-button__icon" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 1792 1792"\x3e\n\t\t\t\t\t\t\t\t\t\x3cpolygon points\x3d"1792,1712.8 975.2,896 1792,79.2 1712.8,0 896,816.8 79.2,0 0,79.2 816.8,896 0,1712.8 79.2,1792 896,975.2\n\t\t\t\t\t\t\t\t\t\t1712.8,1792"/\x3e\n\t\t\t\t\t\t\t\t\x3c/svg\x3e\n\t\t\t\t\t\t\t\x3c/a\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/header\x3e'));
this.bindButtonClick(document.querySelector("[data-modal-close-button]"))}},{key:"setModalContentWrapper",value:function(){this.modal.insertAdjacentHTML("beforeend",'\x3cdiv class\x3d"container all-sections__container" data-modal-content-wrapper\x3e\x3c/div\x3e')}},{key:"getModalContent",value:function(){var b=this;return fetch(this.params.contentUrl,{cache:"no-cache"}).then(function(a){if(a.ok)return a.text();throw Error("Please refresh and try again.");}).then(function(a){b.setModalContent(a);b.initAccordionForModal()}).catch(function(a){b.setModalContent('\n\t\t\t\t\t\x3cdiv class\x3d"all-sections-modal__error-message"\x3e\n\t\t\t\t\t\t\x3ch2 class\x3d"all-sections__main-heading u-heading-2"\x3eSomething went wrong\x3c/h2\x3e\n\t\t\t\t\t\t\x3cp class\x3d"all-sections__body-text"\x3e'.concat(a.message,
"\x3c/p\x3e\n\t\t\t\t\t\x3c/div\x3e"))})}},{key:"setModalContent",value:function(b){document.querySelector("[data-modal-content-wrapper]").insertAdjacentHTML("beforeend",b);this.defineFocusableElements();this.toggleFocusableElement();this.options.hasContent=!0}},{key:"keydownActions",value:function(b){this.bindEscapeKey(b);this.trapFocusWithinModal(b)}},{key:"bindEscapeKey",value:function(b){27===b.keyCode&&(this.resetScrollPosition(),this.toggleModal())}},{key:"trapFocusWithinModal",value:function(b){this.options.hasContent&&
(9===b.keyCode||b.shiftKey&&9===b.keyCode)&&(this.options.keyboardNavigation||this.setFocusPosition(b,!0,!0),b.shiftKey&&9===b.keyCode?b.target===this.options.firstFocusableElement&&this.setFocusPosition(b,!1):9===b.keyCode&&b.target===this.options.lastFocusableElement&&this.setFocusPosition(b,!0))}},{key:"setFocusPosition",value:function(b,a){var c=2<arguments.length&&void 0!==arguments[2]&&arguments[2];b.preventDefault();c&&(this.options.keyboardNavigation=!0);a?this.options.firstFocusableElement.focus():
this.options.lastFocusableElement.focus()}},{key:"defineFocusableElements",value:function(){var b=this.modal.querySelectorAll("a, button");this.options.firstFocusableElement=b[0];this.options.lastFocusableElement=b[b.length-1]}},{key:"toggleFocusableElement",value:function(){this.options.keyboardNavigation&&(this.modal.classList.contains("all-sections-modal--hidden")?this.openButton.focus():this.options.firstFocusableElement.focus())}},{key:"resetScrollPosition",value:function(){this.modal.classList.contains("all-sections-modal--hidden")||
0===this.modal.scrollTop||(this.modal.scrollTop=0)}},{key:"initAccordionForModal",value:function(){(new p.default({accordionSelector:"[data-accordion-modal]",hideClasses:["accordion--is-collapsed","accordion--is-expanded"]})).init()}},{key:"hasPoppyLogo",value:function(){var b=document.querySelector("[data-has-poppy-logo]");return b&&"true"===b.getAttribute("data-has-poppy-logo")}},{key:"getPoppyMarkup",value:function(){return'\x3cdiv class\x3d"e-site-logo__poppy"\x3e\n\t\t\t\x3csvg viewbox\x3d"0 0 17 32"\x3e\n\t\t\t\t\x3cuse xlink:href\x3d"#poppy"\x3e\x3c/use\x3e\n\t\t\t\x3c/svg\x3e\n\t\t\x3c/div\x3e'}}],
n(b.prototype,d),b}();(new g).init();l.default=g},,function(g,l,b){function n(b){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(b)}var p;!function(k,d){var c=null;"object"===n(l)?g.exports=d(c):void 0===(p=function(a){try{c=b(25)("moment")}catch(e){}return d(c)}.call(l,b,l,g))||(g.exports=p)}(0,function(b){var g="function"==typeof b,c=
!!window.addEventListener,a=window.document,e=window.setTimeout,k=function(a,b,m,e){c?a.addEventListener(b,m,!!e):a.attachEvent("on"+b,m)},l=function(a,b,m,e){c?a.removeEventListener(b,m,!!e):a.detachEvent("on"+b,m)},p=function(a,b){return-1!==(" "+a.className+" ").indexOf(" "+b+" ")},z=function(a,b){p(a,b)||(a.className=""===a.className?b:a.className+" "+b)},v=function(a,b){var q;a.className=(q=(" "+a.className+" ").replace(" "+b+" "," ")).trim?q.trim():q.replace(/^\s+|\s+$/g,"")},t=function(a){return/Array/.test(Object.prototype.toString.call(a))},
w=function(a){return/Date/.test(Object.prototype.toString.call(a))&&!isNaN(a.getTime())},H=function(a,b){return[31,0==a%4&&0!=a%100||0==a%400?29:28,31,30,31,30,31,31,30,31,30,31][b]},R=function(a){w(a)&&a.setHours(0,0,0,0)},K=function(a,b){return a.getTime()===b.getTime()},I=function x(a,b,c){var q,m;for(q in b)(m=void 0!==a[q])&&"object"===n(b[q])&&null!==b[q]&&void 0===b[q].nodeName?w(b[q])?c&&(a[q]=new Date(b[q].getTime())):t(b[q])?c&&(a[q]=b[q].slice(0)):a[q]=x({},b[q],c):!c&&m||(a[q]=b[q]);return a},
S=function(b,c,e){var q;a.createEvent?((q=a.createEvent("HTMLEvents")).initEvent(c,!0,!1),q=I(q,e),b.dispatchEvent(q)):a.createEventObject&&(q=a.createEventObject(),q=I(q,e),b.fireEvent("on"+c,q))},T=function(a){return 0>a.month&&(a.year-=Math.ceil(Math.abs(a.month)/12),a.month+=12),11<a.month&&(a.year+=Math.floor(Math.abs(a.month)/12),a.month-=12),a},A={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,
defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:"January February March April May June July August September October November December".split(" "),
weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" ")},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},Z=function(a,b,c){for(b+=a.firstDay;7<=b;)b-=7;return c?a.i18n.weekdaysShort[b]:a.i18n.weekdays[b]},N=function(a){var b=[],c="false";if(a.isEmpty){if(!a.showDaysInNextAndPreviousMonths)return'\x3ctd class\x3d"is-empty"\x3e\x3c/td\x3e';b.push("is-outside-current-month");a.enableSelectionDaysInNextAndPreviousMonths||
b.push("is-selection-disabled")}return a.isDisabled&&b.push("is-disabled"),a.isToday&&b.push("is-today"),a.isSelected&&(b.push("is-selected"),c="true"),a.hasEvent&&b.push("has-event"),a.isInRange&&b.push("is-inrange"),a.isStartRange&&b.push("is-startrange"),a.isEndRange&&b.push("is-endrange"),'\x3ctd data-day\x3d"'+a.day+'" class\x3d"'+b.join(" ")+'" aria-selected\x3d"'+c+'"\x3e\x3cbutton class\x3d"pika-button pika-day" type\x3d"button" data-pika-year\x3d"'+a.year+'" data-pika-month\x3d"'+a.month+
'" data-pika-day\x3d"'+a.day+'"\x3e'+a.day+"\x3c/button\x3e\x3c/td\x3e"},y=function(a,b,c,e){return'\x3ctr class\x3d"pika-row'+(c?" pick-whole-week":"")+(e?" is-selected":"")+'"\x3e'+(b?a.reverse():a).join("")+"\x3c/tr\x3e"},L=function(a,b,c,e,g,d){var q,m,x=a._o,k=c===x.minYear,l=c===x.maxYear,F='\x3cdiv id\x3d"'+d+'" class\x3d"pika-title" role\x3d"heading" aria-live\x3d"assertive"\x3e',n=!0,V=!0;var p=[];for(d=0;12>d;d++)p.push('\x3coption value\x3d"'+(c===g?d-b:12+d-b)+'"'+(d===e?' selected\x3d"selected"':
"")+(k&&d<x.minMonth||l&&d>x.maxMonth?'disabled\x3d"disabled"':"")+"\x3e"+x.i18n.months[d]+"\x3c/option\x3e");g='\x3cdiv class\x3d"pika-label"\x3e'+x.i18n.months[e]+'\x3cselect class\x3d"pika-select pika-select-month" tabindex\x3d"-1"\x3e'+p.join("")+"\x3c/select\x3e\x3c/div\x3e";t(x.yearRange)?(d=x.yearRange[0],q=x.yearRange[1]+1):(d=c-x.yearRange,q=1+c+x.yearRange);for(p=[];d<q&&d<=x.maxYear;d++)d>=x.minYear&&p.push('\x3coption value\x3d"'+d+'"'+(d===c?' selected\x3d"selected"':"")+"\x3e"+d+"\x3c/option\x3e");
return m='\x3cdiv class\x3d"pika-label"\x3e'+c+x.yearSuffix+'\x3cselect class\x3d"pika-select pika-select-year" tabindex\x3d"-1"\x3e'+p.join("")+"\x3c/select\x3e\x3c/div\x3e",x.showMonthAfterYear?F+=m+g:F+=g+m,k&&(0===e||x.minMonth>=e)&&(n=!1),l&&(11===e||x.maxMonth<=e)&&(V=!1),0===b&&(F+='\x3cbutton class\x3d"pika-prev'+(n?"":" is-disabled")+'" type\x3d"button"\x3e'+x.i18n.previousMonth+"\x3c/button\x3e"),b===a._o.numberOfMonths-1&&(F+='\x3cbutton class\x3d"pika-next'+(V?"":" is-disabled")+'" type\x3d"button"\x3e'+
x.i18n.nextMonth+"\x3c/button\x3e"),F+"\x3c/div\x3e"},E=function(q){var m=this,d=m.config(q);m._onMouseDown=function(a){if(m._v){var b=(a=a||window.event).target||a.srcElement;if(b)if(p(b,"is-disabled")||(!p(b,"pika-button")||p(b,"is-empty")||p(b.parentNode,"is-disabled")?p(b,"pika-prev")?m.prevMonth():p(b,"pika-next")&&m.nextMonth():(m.setDate(new Date(b.getAttribute("data-pika-year"),b.getAttribute("data-pika-month"),b.getAttribute("data-pika-day"))),d.bound&&e(function(){m.hide();d.blurFieldOnSelect&&
d.field&&d.field.blur()},100))),p(b,"pika-select"))m._c=!0;else{if(!a.preventDefault)return a.returnValue=!1,!1;a.preventDefault()}}};m._onChange=function(a){var b=(a=a||window.event).target||a.srcElement;b&&(p(b,"pika-select-month")?m.gotoMonth(b.value):p(b,"pika-select-year")&&m.gotoYear(b.value))};m._onKeyChange=function(a){if(a=a||window.event,m.isVisible())switch(a.keyCode){case 13:case 27:d.field&&d.field.blur();break;case 37:a.preventDefault();m.adjustDate("subtract",1);break;case 38:m.adjustDate("subtract",
7);break;case 39:m.adjustDate("add",1);break;case 40:m.adjustDate("add",7)}};m._onInputChange=function(a){var c;a.firedBy!==m&&(c=d.parse?d.parse(d.field.value,d.format):g?(c=b(d.field.value,d.format,d.formatStrict))&&c.isValid()?c.toDate():null:new Date(Date.parse(d.field.value)),w(c)&&m.setDate(c),m._v||m.show())};m._onInputFocus=function(){m.show()};m._onInputClick=function(){m.show()};m._onInputBlur=function(){var b=a.activeElement;do if(p(b,"pika-single"))return;while(b=b.parentNode);m._c||(m._b=
e(function(){m.hide()},50));m._c=!1};m._onClick=function(a){var b=(a=a||window.event).target||a.srcElement;if(a=b){!c&&p(b,"pika-select")&&(b.onchange||(b.setAttribute("onchange","return;"),k(b,"change",m._onChange)));do if(p(a,"pika-single")||a===d.trigger)return;while(a=a.parentNode);m._v&&b!==d.trigger&&a!==d.trigger&&m.hide()}};m.el=a.createElement("div");m.el.className="pika-single"+(d.isRTL?" is-rtl":"")+(d.theme?" "+d.theme:"");k(m.el,"mousedown",m._onMouseDown,!0);k(m.el,"touchend",m._onMouseDown,
!0);k(m.el,"change",m._onChange);d.keyboardInput&&k(a,"keydown",m._onKeyChange);d.field&&(d.container?d.container.appendChild(m.el):d.bound?a.body.appendChild(m.el):d.field.parentNode.insertBefore(m.el,d.field.nextSibling),k(d.field,"change",m._onInputChange),d.defaultDate||(g&&d.field.value?d.defaultDate=b(d.field.value,d.format).toDate():d.defaultDate=new Date(Date.parse(d.field.value)),d.setDefaultDate=!0));q=d.defaultDate;w(q)?d.setDefaultDate?m.setDate(q,!0):m.gotoDate(q):m.gotoDate(new Date);
d.bound?(this.hide(),m.el.className+=" is-bound",k(d.trigger,"click",m._onInputClick),k(d.trigger,"focus",m._onInputFocus),k(d.trigger,"blur",m._onInputBlur)):this.show()};return E.prototype={config:function(a){this._o||(this._o=I({},A,!0));a=I(this._o,a,!0);a.isRTL=!!a.isRTL;a.field=a.field&&a.field.nodeName?a.field:null;a.theme="string"==typeof a.theme&&a.theme?a.theme:null;a.bound=!!(void 0!==a.bound?a.field&&a.bound:a.field);a.trigger=a.trigger&&a.trigger.nodeName?a.trigger:a.field;a.disableWeekends=
!!a.disableWeekends;a.disableDayFn="function"==typeof a.disableDayFn?a.disableDayFn:null;var b=parseInt(a.numberOfMonths,10)||1;(a.numberOfMonths=4<b?4:b,w(a.minDate)||(a.minDate=!1),w(a.maxDate)||(a.maxDate=!1),a.minDate&&a.maxDate&&a.maxDate<a.minDate&&(a.maxDate=a.minDate=!1),a.minDate&&this.setMinDate(a.minDate),a.maxDate&&this.setMaxDate(a.maxDate),t(a.yearRange))?(b=(new Date).getFullYear()-10,a.yearRange[0]=parseInt(a.yearRange[0],10)||b,a.yearRange[1]=parseInt(a.yearRange[1],10)||b):(a.yearRange=
Math.abs(parseInt(a.yearRange,10))||A.yearRange,100<a.yearRange&&(a.yearRange=100));return a},toString:function(a){return a=a||this._o.format,w(this._d)?this._o.toString?this._o.toString(this._d,a):g?b(this._d).format(a):this._d.toDateString():""},getMoment:function(){return g?b(this._d):null},setMoment:function(a,c){g&&b.isMoment(a)&&this.setDate(a.toDate(),c)},getDate:function(){return w(this._d)?new Date(this._d.getTime()):null},setDate:function(a,b){if(!a)return this._d=null,this._o.field&&(this._o.field.value=
"",S(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof a&&(a=new Date(Date.parse(a))),w(a)){var c=this._o.minDate,d=this._o.maxDate;w(c)&&a<c?a=c:w(d)&&a>d&&(a=d);this._d=new Date(a.getTime());R(this._d);this.gotoDate(this._d);this._o.field&&(this._o.field.value=this.toString(),S(this._o.field,"change",{firedBy:this}));b||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(a){var b=!0;if(w(a)){if(this.calendars){b=new Date(this.calendars[0].year,
this.calendars[0].month,1);var c=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),d=a.getTime();c.setMonth(c.getMonth()+1);c.setDate(c.getDate()-1);b=d<b.getTime()||c.getTime()<d}b&&(this.calendars=[{month:a.getMonth(),year:a.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths));this.adjustCalendars()}},adjustDate:function(a,b){var c,d=this.getDate()||new Date;b=864E5*parseInt(b);"add"===a?c=new Date(d.valueOf()+
b):"subtract"===a&&(c=new Date(d.valueOf()-b));this.setDate(c)},adjustCalendars:function(){this.calendars[0]=T(this.calendars[0]);for(var a=1;a<this._o.numberOfMonths;a++)this.calendars[a]=T({month:this.calendars[0].month+a,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(a){isNaN(a)||(this.calendars[0].month=parseInt(a,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++;this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--;
this.adjustCalendars()},gotoYear:function(a){isNaN(a)||(this.calendars[0].year=parseInt(a,10),this.adjustCalendars())},setMinDate:function(a){a instanceof Date?(R(a),this._o.minDate=a,this._o.minYear=a.getFullYear(),this._o.minMonth=a.getMonth()):(this._o.minDate=A.minDate,this._o.minYear=A.minYear,this._o.minMonth=A.minMonth,this._o.startRange=A.startRange);this.draw()},setMaxDate:function(a){a instanceof Date?(R(a),this._o.maxDate=a,this._o.maxYear=a.getFullYear(),this._o.maxMonth=a.getMonth()):
(this._o.maxDate=A.maxDate,this._o.maxYear=A.maxYear,this._o.maxMonth=A.maxMonth,this._o.endRange=A.endRange);this.draw()},setStartRange:function(a){this._o.startRange=a},setEndRange:function(a){this._o.endRange=a},draw:function(a){if(this._v||a){var b=this._o;var c=b.minYear;var d=b.maxYear,g=b.minMonth,k=b.maxMonth;a="";this._y<=c&&(this._y=c,!isNaN(g)&&this._m<g&&(this._m=g));this._y>=d&&(this._y=d,!isNaN(k)&&this._m>k&&(this._m=k));c="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,
"").substr(0,2);for(d=0;d<b.numberOfMonths;d++)a+='\x3cdiv class\x3d"pika-lendar"\x3e'+L(this,d,this.calendars[d].year,this.calendars[d].month,this.calendars[0].year,c)+this.render(this.calendars[d].year,this.calendars[d].month,c)+"\x3c/div\x3e";this.el.innerHTML=a;b.bound&&"hidden"!==b.field.type&&e(function(){b.trigger.focus()},1);"function"==typeof this._o.onDraw&&this._o.onDraw(this);b.bound&&b.field.setAttribute("aria-label",b.ariaLabel)}},adjustPosition:function(){var b,c,d,e,g,k,l,n,p;if(!this._o.container){if(this.el.style.position=
"absolute",c=b=this._o.trigger,d=this.el.offsetWidth,e=this.el.offsetHeight,g=window.innerWidth||a.documentElement.clientWidth,k=window.innerHeight||a.documentElement.clientHeight,l=window.pageYOffset||a.body.scrollTop||a.documentElement.scrollTop,n=!0,p=!0,"function"==typeof b.getBoundingClientRect){var r=(c=b.getBoundingClientRect()).left+window.pageXOffset;var t=c.bottom+window.pageYOffset}else for(r=c.offsetLeft,t=c.offsetTop+c.offsetHeight;c=c.offsetParent;)r+=c.offsetLeft,t+=c.offsetTop;(this._o.reposition&&
r+d>g||-1<this._o.position.indexOf("right")&&0<r-d+b.offsetWidth)&&(r=r-d+b.offsetWidth,n=!1);(this._o.reposition&&t+e>k+l||-1<this._o.position.indexOf("top")&&0<t-e-b.offsetHeight)&&(t=t-e-b.offsetHeight,p=!1);this.el.style.left=r+"px";this.el.style.top=t+"px";z(this.el,n?"left-aligned":"right-aligned");z(this.el,p?"bottom-aligned":"top-aligned");v(this.el,n?"right-aligned":"left-aligned");v(this.el,p?"top-aligned":"bottom-aligned")}},render:function(a,b,c){var d=this._o,e=new Date,g=H(a,b),k=(new Date(a,
b,1)).getDay(),l=[],m=[];R(e);0<d.firstDay&&0>(k-=d.firstDay)&&(k+=7);for(var n=0===b?11:b-1,q=11===b?0:b+1,p=0===b?a-1:a,r=11===b?a+1:a,t=H(p,n),v=g+k,u=v;7<u;)u-=7;v+=7-u;var z,A,E,M;u=!1;for(var C=0,F=0;C<v;C++){var B=new Date(a,b,C-k+1),I=!!w(this._d)&&K(B,this._d),L=K(B,e),Q=-1!==d.events.indexOf(B.toDateString()),W=C<k||C>=g+k,O=C-k+1,J=b,P=a,S=d.startRange&&K(d.startRange,B),T=d.endRange&&K(d.endRange,B),U=d.startRange&&d.endRange&&d.startRange<B&&B<d.endRange;W&&(C<k?(O=t+O,J=n,P=p):(O-=g,
J=q,P=r));var X=I,D;!(D=d.minDate&&B<d.minDate||d.maxDate&&B>d.maxDate)&&(D=d.disableWeekends)&&(D=B.getDay(),D=0===D||6===D);B={day:O,month:J,year:P,hasEvent:Q,isSelected:X,isToday:L,isDisabled:D||d.disableDayFn&&d.disableDayFn(B),isEmpty:W,isStartRange:S,isEndRange:T,isInRange:U,showDaysInNextAndPreviousMonths:d.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:d.enableSelectionDaysInNextAndPreviousMonths};d.pickWholeWeek&&I&&(u=!0);m.push(N(B));7==++F&&(d.showWeekNumber&&
m.unshift((z=C-k,A=b,E=a,M=void 0,M=new Date(E,0,1),'\x3ctd class\x3d"pika-week"\x3e'+Math.ceil(((new Date(E,A,z)-M)/864E5+M.getDay()+1)/7)+"\x3c/td\x3e")),l.push(y(m,d.isRTL,d.pickWholeWeek,u)),m=[],F=0,u=!1)}b=[];d.showWeekNumber&&b.push("\x3cth\x3e\x3c/th\x3e");for(a=0;7>a;a++)b.push('\x3cth scope\x3d"col"\x3e\x3cabbr title\x3d"'+Z(d,a)+'"\x3e'+Z(d,a,!0)+"\x3c/abbr\x3e\x3c/th\x3e");d="\x3cthead\x3e\x3ctr\x3e"+(d.isRTL?b.reverse():b).join("")+"\x3c/tr\x3e\x3c/thead\x3e";return'\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"pika-table" role\x3d"grid" aria-labelledby\x3d"'+
c+'"\x3e'+d+("\x3ctbody\x3e"+l.join("")+"\x3c/tbody\x3e\x3c/table\x3e")},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),v(this.el,"is-hidden"),this._o.bound&&(k(a,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var b=this._v;!1!==b&&(this._o.bound&&l(a,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",z(this.el,"is-hidden"),
this._v=!1,void 0!==b&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){var b=this._o;this.hide();l(this.el,"mousedown",this._onMouseDown,!0);l(this.el,"touchend",this._onMouseDown,!0);l(this.el,"change",this._onChange);b.keyboardInput&&l(a,"keydown",this._onKeyChange);b.field&&(l(b.field,"change",this._onInputChange),b.bound&&(l(b.trigger,"click",this._onInputClick),l(b.trigger,"focus",this._onInputFocus),l(b.trigger,"blur",this._onInputBlur)));this.el.parentNode&&
this.el.parentNode.removeChild(this.el)}},E})},function(g,l){function b(b){b=Error("Cannot find module '"+b+"'");throw b.code="MODULE_NOT_FOUND",b;}b.keys=function(){return[]};b.resolve=b;g.exports=b;b.id=25},,function(g,l,b){function n(){this.setAttribute("aria-pressed","true"===this.getAttribute("aria-pressed")?"false":"true");this.setAttribute("aria-expanded","true"===this.getAttribute("aria-expanded")?"false":"true")}function p(a,b){for(var h=0;h<b.length;h++){var f=b[h];f.enumerable=f.enumerable||
!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}function k(a,b){for(var h=0;h<b.length;h++){var f=b[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}function d(a,b){for(var h=0;h<b.length;h++){var f=b[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}function c(a,b){var h,f=this;a.forEach(function(a){var b=f.sections.find(function(b){return b.identifier===
a.target.id});0<a.intersectionRatio?f.visibleElements.push(b):(b=f.visibleElements.indexOf(b),-1<b&&f.visibleElements.splice(b,1))});0!==this.visibleElements.length&&(h=1===this.visibleElements.length?this.visibleElements[0]:this.visibleElements.reduce(function(a,b){return a.index<b.index?a:b}),this.sections.map(function(a){a.identifier===h.identifier?a.navItem.classList.add("content-nav__item--selected"):a.navItem.classList.remove("content-nav__item--selected")}))}function a(a){a=a[0];1>a.intersectionRatio&&
0>a.boundingClientRect.y?this.elem.classList.add("".concat(this.className,"--sticky")):this.elem.classList.remove("".concat(this.className,"--sticky"))}function e(a,b){for(var h=0;h<b.length;h++){var f=b[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}function r(a,b){for(var h=0;h<b.length;h++){var f=b[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}function u(a,b){for(var h=
0;h<b.length;h++){var f=b[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}function Q(a,b){for(var h=0;h<b.length;h++){var f=b[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}function z(a,b){var h;if("undefined"==typeof Symbol||null==a[Symbol.iterator]){if(Array.isArray(a)||(h=function(a,b){if(a){if("string"==typeof a)return v(a,b);var h=Object.prototype.toString.call(a).slice(8,
-1);"Object"===h&&a.constructor&&(h=a.constructor.name);if("Map"===h||"Set"===h)return Array.from(a);if("Arguments"===h||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return v(a,b)}}(a))||b&&a&&"number"==typeof a.length){h&&(a=h);var f=0;b=function(){};return{s:b,n:function(){return f>=a.length?{done:!0}:{done:!1,value:a[f++]}},e:function(a){throw a;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}var c,d=!0,sa=!1;return{s:function(){h=a[Symbol.iterator]()},n:function(){var a=h.next();return d=a.done,a},e:function(a){sa=!0;c=a},f:function(){try{d||null==h.return||h.return()}finally{if(sa)throw c;}}}}function v(a,b){(null==b||b>a.length)&&(b=a.length);for(var h=0,f=Array(b);h<b;h++)f[h]=a[h];return f}function t(a,b){for(var h=0;h<b.length;h++){var f=b[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}function w(a,b){for(var h=
0;h<b.length;h++){var f=b[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}function H(a,b){for(var h=0;h<b.length;h++){var f=b[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}function R(a){var b;(b=function(a){if(Array.isArray(a))return K(a)}(a))||(b="undefined"!=typeof Symbol&&Symbol.iterator in Object(a)?Array.from(a):void 0);if(!(a=b||function(a,b){if(a){if("string"==
typeof a)return K(a,b);var h=Object.prototype.toString.call(a).slice(8,-1);"Object"===h&&a.constructor&&(h=a.constructor.name);if("Map"===h||"Set"===h)return Array.from(a);if("Arguments"===h||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return K(a,b)}}(a)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return a}function K(a,b){(null==b||b>a.length)&&(b=a.length);for(var h=0,f=Array(b);h<
b;h++)f[h]=a[h];return f}function I(a,b){for(var h=0;h<b.length;h++){var f=b[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}function S(a,b){for(var h=0;h<b.length;h++){var f=b[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}function T(a,b){for(var h=0;h<b.length;h++){var f=b[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,
f.key,f)}}function A(a,b){for(var h=0;h<b.length;h++){var f=b[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}function Z(a,b){for(var h=0;h<b.length;h++){var f=b[h];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}b.r(l);g=b(5);var N=b(0),y=b(1),L=[],E=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};ia();a=a.selector;return L=Array.from(document.querySelectorAll("".concat(void 0===
a?"":a,'.u-accordion__tab [type\x3d"checkbox"]')))},ia=function(){var a=document.querySelectorAll('[data-js\x3d"accordion-item"]');if(0<a.length)for(var b=0,h=a.length;b<h;b++)a[b].addEventListener("click",n)};var q={init:E,closeAll:function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:L).forEach(function(a){a.checked=!1})},openAll:function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:L).forEach(function(a){a.checked=!0})},selectItem:ia};N.default.create("tmg.utils.accordion");
tmg.utils.accordion=q;y.a.subscribe({topic:"tmg.page.ready",func:E,runIfAlreadyPublished:!0});E=b(3);var m=b(4),F=b(18),x=b(15),V=b(7),ca=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.params=Object.assign({identifier:b.counter.getAttribute("data-counter-id"),max:b.counter.querySelector("[data-counter-max]").getAttribute("data-counter-max"),min:0,minusSelector:"[data-counter-minus]",plusSelector:"[data-counter-plus]",disabledSelector:"counter__button--disabled"},
b);this.event=document.createEvent("HTMLEvents");this.input=document.getElementById(this.params.identifier);this.minusBtn=this.params.counter.querySelector(this.params.minusSelector);this.plusBtn=this.params.counter.querySelector(this.params.plusSelector)}var b;return b=[{key:"init",value:function(){this.input&&(this.bindPlusCounter(),this.bindMinusCounter(),this.event.initEvent("change",!1,!0))}},{key:"bindPlusCounter",value:function(){var a=this;this.plusBtn.addEventListener("click",function(b){b.preventDefault();
a.addCounter()})}},{key:"bindMinusCounter",value:function(){var a=this;this.minusBtn.addEventListener("click",function(b){b.preventDefault();a.minusCounter()})}},{key:"minusCounter",value:function(){var a=parseInt(this.input.value,10)-1;this.updateValue(a,this.minusBtn,a<=this.params.min);this.plusBtn.classList.remove(this.params.disabledSelector)}},{key:"addCounter",value:function(){var a=parseInt(this.input.value,10)+1;this.updateValue(a,this.plusBtn,a>=this.params.max);this.minusBtn.classList.remove(this.params.disabledSelector)}},
{key:"updateValue",value:function(a,b){var h=2<arguments.length&&void 0!==arguments[2]&&arguments[2];!b.classList.contains(this.params.disabledSelector)&&0<=a&&(this.input.value=a,this.input.dispatchEvent(this.event));b.classList.toggle(this.params.disabledSelector,h)}}],p(a.prototype,b),a}();y.a.subscribe({topic:"tmg.page.ready",func:function(){document.querySelectorAll("[data-counter-id]").forEach(function(a){a&&(new ca({counter:a})).init()})},runIfAlreadyPublished:!0});var aa=b(24),ja=b.n(aa),
ka=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.params=Object.assign({occupancyContainer:'[data-js\x3d"calendar-availability__people-mix"]',occupancyInput:'[data-js\x3d"calendar-availability__occupancy"]',childSelector:'[data-js\x3d"calendar-availability__child-ages"]',childTarget:'[data-js\x3d"calendar-availability__child-ages-target"]',datepicker:"[data-datepicker]",clearPicker:"[data-datepicker-clear]",datesSelector:"[data-calendar-dates]",
months:"Jan Feb Mar Apr May June July Aug Sep Oct Nov Dec".split(" "),rooms:1,adults:2,children:0,childAges:{},checkInDate:new Date,checkOutDate:new Date},b);this.hasCalendar=this.params.partnerLinks&&0<this.params.partnerLinks.length;this.availabilityBanner=document.getElementById("calendar-availability-banner");this.hasCalendar&&this.setCalendarElements()}var b;return b=[{key:"init",value:function(){var a=this;this.hasCalendar&&(this.occupancyContainer.querySelectorAll("input").forEach(function(b){a.bindOccupancyInput(b);
a.setOccupancyToLocal(b)}),this.updateOccupancyValue(),this.buildDatePickers(),this.setTransactionId());this.params.bookingElement&&(this.observer=new IntersectionObserver(this.observerCallback.bind(this),{threshold:[.9,1]}),this.observer.observe(this.params.bookingElement))}},{key:"observerCallback",value:function(a){var b=a[0].boundingClientRect.y?0>a[0].boundingClientRect.y:!a[0].isIntersecting;1>a[0].intersectionRatio&&b?this.availabilityBanner.classList.remove("calendar-availability__banner--hidden"):
this.availabilityBanner.classList.add("calendar-availability__banner--hidden")}},{key:"setCalendarElements",value:function(){this.datepickerContainer=document.querySelector(this.params.datepicker);this.datepickerClear=document.querySelector(this.params.clearPicker);this.checkInInputs=document.querySelectorAll("[data-calendar-checkin]");this.checkOutInputs=document.querySelectorAll("[data-calendar-checkout]");this.childContainer=document.querySelector(this.params.childTarget);this.childWrapper=document.querySelector(this.params.childSelector);
this.occupancyInput=document.querySelector(this.params.occupancyInput);this.occupancyContainer=document.querySelector(this.params.occupancyContainer);this.product=document.querySelector('[data-js\x3d"package-json"]')?JSON.parse(document.querySelector('[data-js\x3d"package-json"]').dataset.options):{};this.providerProduct=this.product.hotel}},{key:"toggleRequiredValidation",value:function(a,b){a.forEach(function(a){b?a.setAttribute("data-required",""):a.removeAttribute("data-required")})}},{key:"setOccupancyToLocal",
value:function(a){a.value=localStorage.getItem(a.id)||a.value;this.updateOccupancyValues(a,!0)}},{key:"bindOccupancyInput",value:function(a){var b=this;a.addEventListener("change",function(){b.updateOccupancyValues(a)})}},{key:"updateOccupancyValues",value:function(a,b){switch(localStorage.setItem(a.id,a.value),a.id){case "numberOfRooms":this.params.rooms=parseInt(a.value,10);break;case "numberOfAdults":this.params.adults=parseInt(a.value,10);break;case "numberOfChildren":this.updateChildren(a,b);
this.params.children=parseInt(a.value,10);break;default:this.storeChildAges(a)}this.updateOccupancyValue();this.updateBookingReferences()}},{key:"updateOccupancyValue",value:function(){if(this.occupancyInput){var a="".concat(this.params.rooms," room(s), ").concat(this.params.adults," adult(s), ").concat(this.params.children," child(ren)");this.occupancyInput.value=a}}},{key:"storeChildAges",value:function(a){this.params.childAges[a.id]=a.value}},{key:"removeChildAge",value:function(a){delete this.params.childAges[a.id];
localStorage.removeItem(a.id)}},{key:"updateChildren",value:function(a,b){if(b)for(b=1;b<=a.value;b++)this.addChildElement(b,localStorage.getItem("child-".concat(b)));else this.params.children<parseInt(a.value,10)?this.addChildElement(a.value):this.removeChildElement(this.params.children)}},{key:"addChildElement",value:function(a,b){1===parseInt(a,10)&&(this.childWrapper.style.display="block");var h=document.createElement("div");h.classList.add("calendar-people__occupancy","u-separator-bottom");h.setAttribute("data-child-id",
a);h.innerHTML='\n\t\t\x3cdiv class\x3d"calendar-availability__occupany-title"\x3e\n\t\t\t\x3cspan class\x3d"calendar-people__mix-title"\x3eChild '.concat(a,'\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d"calendar-people__mix calendar-availability__counter"\x3e\n\t\t\t\x3cdiv class\x3d"counter" data-counter-id\x3d"child-').concat(a,'"\x3e\n\t\t\t\t\x3ca class\x3d"counter__button" data-counter-minus\x3e\n\t\t\t\t\t\x3cspan class\x3d"counter__symbol counter__minus"\x3e\x3c/span\x3e\n\t\t\t\t\x3c/a\x3e\n\t\t\t\t\x3cinput class\x3d"counter__input" name\x3d"child-').concat(a,
'" id\x3d"child-').concat(a,'" type\x3d"text" value\x3d"1"\x3e\n\t\t\t\t\x3ca class\x3d"counter__button" data-counter-plus data-counter-max\x3d"17"\x3e\n\t\t\t\t\t\x3cspan class\x3d"counter__symbol"\x3e+\x3c/span\x3e\n\t\t\t\t\x3c/a\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e');a=h.querySelector("input");this.childContainer.appendChild(h);this.bindOccupancyInput(a);a.value=b||0;this.storeChildAges(a);(new ca({counter:h.querySelector("[data-counter-id]")})).init()}},{key:"removeChildElement",value:function(a){1===
parseInt(a,10)&&(this.childWrapper.style.display="none");a=this.childContainer.querySelector('[data-child-id\x3d"'.concat(a,'"]'));this.childContainer.removeChild(a);a=a.querySelector("input");this.removeChildAge(a)}},{key:"buildDatePickers",value:function(){var a=this;if(this.datepickerContainer){var b=new Date;b.setHours(0,0,0,0);this.checkOutPicker=new ja.a({bound:!1,container:this.datepickerContainer,field:this.checkOutInputs[0],firstDay:1,theme:"date-picker__wrapper",minDate:b,onSelect:function(){a.updateCheckOutDate(a.checkOutPicker.getDate())}});
this.checkInPicker=new ja.a({bound:!1,container:this.datepickerContainer,field:this.checkInInputs[0],firstDay:1,minDate:b,theme:"date-picker__wrapper",onSelect:function(){a.updateCheckInDate(a.checkInPicker.getDate())}});var c=new Date(localStorage.getItem("checkInDate")||b);c<=b&&c.setDate(b.getDate()+1);var d=new Date(localStorage.getItem("checkOutDate")||b);d<=c&&d.setDate(b.getDate()+3);this.checkInPicker.setDate(c);this.checkOutPicker.setDate(d);this.bindDatePickerMoveEvent();this.bindDatePickerClear()}}},
{key:"updateCheckInDate",value:function(a){var b=this;this.params.checkInDate=a;localStorage.setItem("checkInDate",a);this.checkInInputs.forEach(function(a){a.value=b.buildDateString(b.params.checkInDate)});this.checkInPicker.hide();this.checkOutPicker.setMinDate(this.params.checkInDate);this.checkOutPicker.setStartRange(this.params.checkInDate);this.checkOutPicker.gotoDate(this.params.checkInDate);this.setEndRange(this.params.checkInDate);this.checkOutPicker.show();this.toggleRequiredValidation(this.checkInInputs,
!a)}},{key:"updateCheckOutDate",value:function(a){var b=this;this.params.checkOutDate=a;localStorage.setItem("checkOutDate",a);this.checkOutInputs.forEach(function(a){a.value=b.buildDateString(b.params.checkOutDate)});this.setEndRange(this.params.checkOutDate);this.toggleRequiredValidation(this.checkOutInputs,!a);this.updateBookingReferences();a&&(document.getElementById("modal-dropdown-datepicker").classList.add("modal-dropdown--hidden"),document.querySelector("[data-modal-dropdown-close]").classList.add("modal-dropdown--hidden"))}},
{key:"buildDateString",value:function(a){return a?"".concat(a.getDate()," ").concat(this.params.months[a.getMonth()]," ").concat(a.getFullYear()):null}},{key:"bindDatePickerMoveEvent",value:function(){var a=this,b=this.datepickerContainer.parentElement;this.target=!1;b.addEventListener("mousemove",function(b){b.target.classList.contains("pika-button")?(a.target=!0,a.setEndRangeToButton(b)):!0===a.target&&(a.target=!1,a.setEndRange(a.params.checkOutDate))})}},{key:"bindDatePickerClear",value:function(){var a=
this;this.datepickerClear.addEventListener("click",function(b){b.preventDefault();a.checkOutPicker.setDate(null);a.updateCheckOutDate(null);a.checkInPicker.setDate(null);a.updateCheckInDate(null);a.checkOutPicker.hide();a.checkInPicker.show()})}},{key:"setEndRangeToButton",value:function(a){a=a.target;a=new Date(a.getAttribute("data-pika-year"),a.getAttribute("data-pika-month"),a.getAttribute("data-pika-day"));this.setEndRange(a)}},{key:"setEndRange",value:function(a){a&&(this.checkOutPicker.setEndRange(a),
this.checkOutPicker.draw())}},{key:"setTransactionId",value:function(){var a=this;(new Promise(function(b,h){b(a.params.transactionId=a.generateTransactionId());h(Error("Failed to generate transactionID"))})).then(this.addIDToDataLayer(this.params.transactionId)).then(this.updateBookingReferences())}},{key:"generateTransactionId",value:function(){for(var a=(new Date).getTime(),b=[],c=0;32>c;c++){var d=(a+16*Math.random())%16|0;a=Math.floor(a/16);b.push(d.toString(16))}return"booking-".concat(b.join(""))}},
{key:"addIDToDataLayer",value:function(a){window.dataLayer.bookingTransactionId="".concat(a)}},{key:"buildBookingCta",value:function(){var a=this;if(!this.providerProduct||!this.providerProduct.source)return!1;var b=this.providerProduct.baseUrl.split(";")[0],c=Object.keys(this.params.childAges).map(function(b){return a.params.childAges[b]}),d=this.params.checkInDate?"".concat(this.params.checkInDate.getFullYear(),"-").concat(this.params.checkInDate.getMonth()+1,"-").concat(this.params.checkInDate.getDate()):
"",e=this.params.checkOutDate?"".concat(this.params.checkOutDate.getFullYear(),"-").concat(this.params.checkOutDate.getMonth()+1,"-").concat(this.params.checkOutDate.getDate()):"",g="";"Booking.com"===this.providerProduct.source?(c=c.length?"\x26age\x3d".concat(c.join("\x26age\x3d")):"",g="".concat(g,";checkin\x3d").concat(d,";checkout\x3d").concat(e,";no_rooms\x3d").concat(this.params.rooms,";group_adults\x3d").concat(this.params.adults,";group_children\x3d").concat(this.params.children+c)):"Expedia"===
this.providerProduct.source&&(c=c.length?"\x26".concat(c.join("\x26")):"",g="".concat(g).concat(d,"/").concat(e,"?FromAirport\x3d").concat(this.params.airport,"\x26Destination\x3d").concat(this.params.destination,"\x26NumRoom\x3d").concat(this.params.rooms,"\x26NumAdult\x3d").concat(this.params.adults,"\x26numChild\x3d").concat(this.params.children).concat(c,"\x26HotelID\x3d").concat(this.params.hotelId,"\x26siteid\x3d").concat(this.params.telegraphSiteId));return this.params.transactionId&&("Booking.com"===
this.providerProduct.source?b=b.concat(";label\x3d".concat(this.params.transactionId)):"Expedia"===this.providerProduct.source&&b.replace("TELEGRAPH_REF",this.params.transactionId)),b.concat(g)}},{key:"updateBookingReferences",value:function(){var a=this.buildBookingCta();a&&this.params.partnerLinks.forEach(function(b){b.href=a})}}],k(a.prototype,b),a}();y.a.subscribe({topic:"tmg.page.ready",func:function(){var a=document.querySelector("[data-booking-availability]"),b=document.querySelectorAll('[data-js\x3d"calendar-availability"]');
a&&(new ka({partnerLinks:b,bookingElement:a})).init()},runIfAlreadyPublished:!0});var la=function(){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");!0;this.className="content-nav";this.elem=a;this.visibleElements=[];this.isOpen=this.elem.classList.contains("".concat(this.className,"--open"));this.sections=[];this.toggle=this.toggle.bind(this);this.observerSticky=this.observer=null}var e;return e=[{key:"init",value:function(){this.elem.addEventListener("click",
this.toggle);this.createObservers();this.addAnchorItems()}},{key:"createObservers",value:function(){this.observer=new IntersectionObserver(c.bind(this),{root:null,rootMargin:"-60px"});this.observerSticky=new IntersectionObserver(a.bind(this),{threshold:[.9,1]});this.observerSticky.observe(this.elem)}},{key:"addAnchorItems",value:function(){var a=this;Array.from(this.elem.getElementsByTagName("li")).forEach(function(b,c){a.addAnchorItem(b,c)})}},{key:"addAnchorItem",value:function(a){var b=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:0,c=a.getElementsByTagName("a");0!==c.length&&(c=c[0].dataset.navitemId,b={identifier:c,index:b,navItem:a,target:document.getElementById(c),visible:!1},b.target&&(this.sections.push(b),this.observer.observe(b.target)))}},{key:"toggle",value:function(){(this.isOpen=!this.isOpen)?this.elem.classList.add("".concat(this.className,"--open")):this.elem.classList.remove("".concat(this.className,"--open"))}}],d(b.prototype,e),b}();y.a.subscribe({topic:"tmg.page.ready",func:function(){var a=
document.querySelector('[data-js\x3d"content-nav"]');a&&(new la(a)).init()},runIfAlreadyPublished:!0});var ma=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.element=b;this.elementWidth=this.element.offsetWidth;this.thumbnailsContainer=this.element.querySelector('[data-js\x3d"carousel__thumbnails-container"]');this.itemViewport=this.element.querySelector('[data-js\x3d"carousel__viewport"]');this.itemWrapper=this.element.querySelector('[data-js\x3d"carousel__items"]');
this.item=Array.from(this.element.querySelectorAll('[data-js\x3d"carousel__item"]'));this.itemCount=this.item.length;this.controlForPrevious=this.element.querySelector('[data-js\x3d"carousel__control--previous"]');this.controlForNext=this.element.querySelector('[data-js\x3d"carousel__control--next"]');this.currentSlideIndex=0}var b;return b=[{key:"init",value:function(){1<this.itemCount&&(this.setItemSizes(),this.bindControls(),this.showControls(),this.updateCurrentThumbnail(this.currentSlideIndex));
this.setItemSizesOnResize()}},{key:"setItemSizesOnResize",value:function(){var a=this;["orientationchange","resize"].forEach(function(b){window.addEventListener(b,function(){a.elementWidth=a.element.offsetWidth;a.setItemSizes()},!1)})}},{key:"setItemSizes",value:function(){this.itemViewport.style.width=this.elementWidth+"px";this.itemWrapper.style.width=this.elementWidth*this.itemCount+"px";for(var a=0,b=this.itemCount;a<b;a++)this.item[a].style.width=this.elementWidth+"px"}},{key:"bindControls",
value:function(){this.controlForPrevious.addEventListener("click",this.goToPreviousSlide.bind(this));this.controlForNext.addEventListener("click",this.goToNextSlide.bind(this));this.thumbnailsContainer&&this.thumbnailsContainer.addEventListener("click",this.goToSelectedSlide.bind(this))}},{key:"showControls",value:function(){this.controlForPrevious.classList.add("carousel__control--visible");this.controlForNext.classList.add("carousel__control--visible")}},{key:"showSlide",value:function(a){this.itemWrapper.style.left=
-this.elementWidth*a+"px"}},{key:"goToPreviousSlide",value:function(){0>=this.currentSlideIndex||(this.currentSlideIndex--,this.showSlide(this.currentSlideIndex),this.updateCurrentThumbnail(this.currentSlideIndex))}},{key:"goToNextSlide",value:function(){this.currentSlideIndex>=this.itemCount-1||(this.currentSlideIndex++,this.showSlide(this.currentSlideIndex),this.updateCurrentThumbnail(this.currentSlideIndex))}},{key:"goToSelectedSlide",value:function(a){if(a=a.target.closest("li"))a=a.dataset.thumbnailId,
this.currentSlideIndex=0<a?a-1:1,this.showSlide(this.currentSlideIndex),this.updateCurrentThumbnail(this.currentSlideIndex)}},{key:"updateCurrentThumbnail",value:function(a){if(this.thumbnailsContainer){var b=this.thumbnailsContainer.getElementsByClassName("carousel__thumbnail--is-active"),c=Array.from(this.thumbnailsContainer.querySelectorAll('[data-js\x3d"carousel__thumbnail"]'));0<b.length&&(this.prevCurrentIndex=b[0].dataset.thumbnailId,b[0].classList.remove("carousel__thumbnail--is-active"));
c.forEach(function(b,c){c!==a||b.classList.contains("carousel__thumbnail--is-active")||b.classList.add("carousel__thumbnail--is-active")})}}}],e(a.prototype,b),a}();y.a.subscribe({topic:"tmg.page.ready",func:function(){var a=Array.from(document.querySelectorAll('[data-js\x3d"carousel"]'));0<a.length&&a.forEach(function(a){(new ma(a)).init()})},runIfAlreadyPublished:!0});var Aa={className:"overlay-continuation",overlayTimeout:5E3},na=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:{};if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.options=Object.assign(Aa,b);this.overlayClickElem=document.querySelector('[data-js\x3d"'.concat(this.options.className,'__handler"]'));this.overlayContainer=document.querySelector('[data-js\x3d"'.concat(this.options.className,'"]'));this.overlayClose=document.querySelector('[data-js\x3d"'.concat(this.options.className,'__close"]'));this.overlayTimeout=null;this.overlayClickElem&&(this.overlayAnchor=
this.overlayClickElem.href)}var b;return b=[{key:"hasAllHtmlElements",value:function(){return null!==this.overlayClickElem&&null!==this.overlayContainer&&null!==this.overlayClose}},{key:"init",value:function(){var a=this;this.hasAllHtmlElements()&&(this.overlayClickElem.addEventListener("click",function(b){b.preventDefault();a.showOverlay()},!1),this.overlayClose.addEventListener("click",function(){clearTimeout(a.overlayTimeout);a.overlayContainer.classList.remove("".concat(a.options.className,"__visible"))}))}},
{key:"showOverlay",value:function(){var a=this;void 0!==this.overlayContainer&&this.overlayContainer.classList.add("".concat(this.options.className,"__visible"));this.overlayTimeout=setTimeout(function(){a.closeAndRedirect()},this.options.overlayTimeout)}},{key:"closeAndRedirect",value:function(){window.location.href=this.overlayAnchor}}],r(a.prototype,b),a}();y.a.subscribe({topic:"tmg.page.ready",func:function(){(new na).init()},runIfAlreadyPublished:!0});var G,da,oa,pa,Ba={overlayContinuation:na},
ea=!1,M=!1,C=[],ba=function(){0<Array.from(document.querySelectorAll('[data-js\x3d"navigation"]')).length&&(C=q.init({selector:"".concat('[data-js\x3d"navigation"]'," ")}),G=document.querySelector('[data-js\x3d"navigation"]'),da=G.querySelector(".navigation__menu-control"),pa=G.querySelector(".navigation__item--more .navigation__label-text"),oa=G.querySelector(".navigation__menu--main"),G.setAttribute("data-js",G.getAttribute("data-js").replace("navigation","")),B(),G.classList.add("navigation--js-active"))},
B=function(){da.addEventListener("click",function(){ha();q.closeAll(C);event.preventDefault()});pa.addEventListener("click",function(a){"none"===window.getComputedStyle(da).display&&(ha(),a.preventDefault())});oa.addEventListener("mouseenter",function(){M=!1});G.addEventListener("mouseleave",function(a){M=!0;var b=setTimeout(function(){M&&fa();clearTimeout(b)},300)});document.addEventListener("keyup",function(a){"Escape"!==a.key&&27!==a.keyCode||fa()})},fa=function(){G.classList.remove("navigation--opened");
q.closeAll(C);ea=!1},ha=function(){ea?fa():(G.classList.add("navigation--opened"),q.openAll(C),ea=!0)};aa={initializeAfterContentExists:ba,toggleExpandedMenu:ha};N.default.create("tmg.components.navigation");window.tmg.components.navigation=aa;y.a.subscribe({topic:"tmg.page.ready",func:ba,runIfAlreadyPublished:!0});var Ca=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.element=b}var b;return b=[{key:"init",value:function(){this.hideOptions();
this.bindEvents()}},{key:"hideOptions",value:function(){this.element.classList.remove("product-sort--visible","product-sort--no-js")}},{key:"bindEvents",value:function(){var a=this;this.element.addEventListener("click",function(){a.element.classList.toggle("product-sort--visible")})}}],u(a.prototype,b),a}();y.a.subscribe({topic:"tmg.page.ready",func:function(){var a=document.querySelector('[data-js\x3d"product-sort"]');a&&(new Ca(a)).init()},runIfAlreadyPublished:!0});var W=function(){function a(b){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");!0;this.params=Object.assign({closeAttribute:"data-modal-dropdown-close",heading:b.modal.getAttribute("data-modal-dropdown"),id:b.modal.id,hidden:"modal-dropdown--hidden",save:"Save"},b);this.createModalBackground();this.createModalHeading();this.createModalSaveButton()}var b;return b=[{key:"init",value:function(){this.bindCloseButtons();this.bindOpenButtons()}},{key:"bindCloseButtons",value:function(){var a=this;document.querySelectorAll("[".concat(this.params.closeAttribute,
"]")).forEach(function(b){b.addEventListener("click",function(b){b.preventDefault();a.toggleModalDropdown(!0)})})}},{key:"bindOpenButtons",value:function(){var a=this;document.querySelectorAll("[data-modal-dropdown-open\x3d".concat(this.params.id,"]")).forEach(function(b){b.addEventListener("click",function(){a.toggleModalDropdown()})})}},{key:"toggleModalDropdown",value:function(a){this.params.modal.classList.toggle(this.params.hidden,a);this.background.classList.toggle(this.params.hidden,a)}},{key:"createModalBackground",
value:function(){var a=this;this.background=document.createElement("div");this.background.classList.add("modal-dropdown__background",this.params.hidden);this.background.setAttribute(this.params.closeAttribute,"");this.background.addEventListener("click",function(){a.toggleModalDropdown(!0)});this.params.modal.parentNode.insertBefore(this.background,this.params.modal.parentNode.childNodes[0])}},{key:"createModalHeading",value:function(){var a=document.createElement("h4");a.classList.add("modal-dropdown__heading",
"calendar-availability__hidden");a.setAttribute(this.params.closeAttribute,"");a.innerHTML=this.params.heading;this.params.modal.insertBefore(a,this.params.modal.firstChild)}},{key:"createModalSaveButton",value:function(){var a=document.createElement("a");a.classList.add("modal-dropdown__button","calendar-availability__hidden","call-to-action__link","call-to-action__link--full-width");a.setAttribute(this.params.closeAttribute,"");a.innerHTML=this.params.save;this.params.modal.appendChild(a)}}],Q(a.prototype,
b),a}();y.a.subscribe({topic:"tmg.page.ready",func:function(){document.querySelectorAll("[data-modal-dropdown]").forEach(function(a){(new W({modal:a})).init()})},runIfAlreadyPublished:!0});var O=b(12);ba=b(11);var J=b(2),P=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.params=Object.assign({icidSelector:"[data-icid]",indexSelector:"data-track-index",destinationSelector:"data-track-destination",storageName:"tmgComponentTracking",trackingItems:[{type:"txt",
selector:"[data-track-txt]"},{type:"block",selector:"[data-track-block]"},{type:"img",selector:"[data-track-img]"}],wrapperSelector:"[data-track-wrapper]"},b)}var b;return b=[{key:"init",value:function(){var a=this;this.params.trackingItems.map(function(a){return a.selector}).forEach(function(b){a.setClickListener(b)});document.querySelectorAll(this.params.icidSelector).forEach(function(b){a.setICID(b)})}},{key:"setClickListener",value:function(a){var b=this;document.querySelectorAll(a).forEach(function(c){c.addEventListener("click",
function(){b.setLocalStorage(a,c)})})}},{key:"setLocalStorage",value:function(a,b){a=this.lookupTrackingItem(a);var c=this.getComponentName(b),d=b.getAttribute(this.params.indexSelector)||null;b=b.getAttribute(this.params.destinationSelector)||b.textContent;localStorage.setItem(this.params.storageName,JSON.stringify({componentName:c?this.cleanString(c):null,destination:this.cleanString(b),linkType:a?a.type:"",pageOfUse:this.getCurrentPagePath(),index:d}))}},{key:"getComponentName",value:function(a){if(a=
a.closest(this.params.wrapperSelector))return a.getAttribute(this.params.wrapperSelector.replace("[","").replace("]",""))}},{key:"getCurrentPagePath",value:function(){return document.location.pathname.replace(/\//g," ").trim().replace(/\s/g,"_")||"portal"}},{key:"lookupTrackingItem",value:function(a){var b,c=z(this.params.trackingItems);try{for(c.s();!(b=c.n()).done;){var d=b.value;if(d.selector===a)return d}}catch(Da){c.e(Da)}finally{c.f()}}},{key:"cleanString",value:function(a){return a.trim().replace(/[,\s]+/g,
"-").toLowerCase()}},{key:"getICIDValue",value:function(a){a=Object.assign({brand:J.default.getChannel(),product:"generic",mediaType:"generic",contentType:J.default.getContentType(),contentLocation:"generic"},a);return"".concat(a.brand,"_").concat(a.product,"_").concat(a.mediaType,"_").concat(a.contentType,"_").concat(a.contentLocation)}},{key:"setICID",value:function(a){var b=this.getICIDValue(m.default.tryParse(a.dataset.icid)),c=a.getAttribute("href");c&&a.setAttribute("href",V.default.setQuerystringParam(c,
"ICID",b))}}],t(a.prototype,b),a}();y.a.subscribe({topic:"tmg.page.ready",func:(new P).init(),runIfAlreadyPublished:!0});var qa=b(9),ra=function(a){(a=/.*social-share_(\w*)/i.exec(a.target.className))&&0<a.length&&"_satellite"in window&&(_satellite.setVar("shareprovider",a[1]),_satellite.track("share"))},U=function(){var a=document.querySelectorAll("[class*\x3d'social-share_']");[].slice.call(a).forEach(function(a){a.addEventListener("click",ra)})};y.a.subscribe({topic:"tmg.page.ready",func:U,runIfAlreadyPublished:!0});
U={trackSocialShare:ra,attachSocialShareClicks:U};var X=b(6),D=function(){var a,b=document.body,c=".".concat("viewport--breakpoint");return!(!window.getComputedStyle||!b)&&((a=document.querySelector(c))||((a=document.createElement("div")).classList.add("viewport--breakpoint"),b.appendChild(a)),window.getComputedStyle(a,"::after").content.replace(/[^a-z]/gi,"")||"xs")},Y=function(a){return void 0===a&&(a=!0),a&&0<=document.documentElement.clientWidth?document.documentElement.clientWidth:a&&document.body&&
0<=document.body.clientWidth?document.body.clientWidth:0<=window.innerWidth?window.innerWidth:0},ta={getBreakpointLabel:D,getWidth:Y};N.default.create("tmg.utils.viewport");tmg.utils.viewport=ta;tmg.getMediaQuery=D;tmg.getViewportWidth=Y;N=b(20);D=b(21);b=b(22);Y=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.params=Object.assign({triggerSelector:'[data-js\x3d"caption-trigger"]',imageSelector:'[data-js\x3d"article-body-image"]',captionSelector:'[data-js\x3d"caption"]',
toggleClassName:"e-caption--visible",selectedClassName:"e-caption-trigger--selected"},b);this.captionTrigger=document.querySelectorAll(this.params.triggerSelector);this.captionTrigger.length&&this.activateCaptionTrigger()}var b;return b=[{key:"activateCaptionTrigger",value:function(){var a=this;this.captionTrigger.forEach(function(b){b.addEventListener("click",function(){a.toggleCaption(b)})})}},{key:"toggleCaption",value:function(a){var b=a.closest(this.params.imageSelector).querySelector(this.params.captionSelector);
b.classList.toggle(this.params.toggleClassName);this.toggleTriggerStyle(a);this.updateAriaLabel(a,b)}},{key:"updateAriaLabel",value:function(a,b){a.setAttribute("aria-label",b.classList.contains(this.params.toggleClassName)?a.dataset.ariaClose:a.dataset.ariaOpen)}},{key:"toggleTriggerStyle",value:function(a){a.classList.toggle(this.params.selectedClassName)}}],w(a.prototype,b),a}();y.a.subscribe({topic:"tmg.page.ready",func:new Y});var ua=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
!0;this.userId=X.default.getProfile().pId;this.key="fb6cjraf9cejut2a";this.loadScript("liftigniter")}var b;return b=[{key:"loadScript",value:function(a){var b=this,c=new qa.default;window.$igniter_var=a;window[a]=window[a]||function(){(window[a].q=window[a].q||[]).push(arguments)};window[a].l=1*new Date;c.inject("//cdn.petametrics.com/".concat(this.key,".js")).then(function(){b.initialise();y.a.publish({topic:"tmg.liftigniter.ready"})})}},{key:"getConfiguration",value:function(){return window.liftIgniterPageKeywords=
tmg.page.getKeywords(),{inventory:{features:[this.getFeature("pageType","tmg.page.getPageType()"),this.getFeature("businessSegment","tmg.page.getBusinessSegment()"),this.getFeature("channel","tmg.page.getChannel()"),this.getFeature("keywords","window.liftIgniterPageKeywords"),this.getFeature("displayDate","tmg.page.getPublishDate()")]}}}},{key:"getFeature",value:function(a,b){return{name:a,type:"var",variable:b}}},{key:"initialise",value:function(){liftigniter("init",this.key,{config:this.getConfiguration()});
X.default.isLoggedIn()&&liftigniter("setUserId",this.userId);liftigniter("send","pageview")}}],H(a.prototype,b),a}();y.a.subscribe({topic:"tmg.page.ready",func:function(){J.default.isAuthor()||new ua},runIfAlreadyPublished:!0});var va=function(){function a(b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.element=b;this.params=c;this.register()}var b;return b=[{key:"register",value:function(){liftigniter("setRequestFields",["title","url","image"]);liftigniter("register",
{max:this.params.maxStories,widget:this.params.widget,callback:this.parseData.bind(this)})}},{key:"parseData",value:function(a){var b="column"===this.params.layout;a.items.forEach(function(a,c){a.isRow=!b;a.image&&(a.image=a.image.replace("?impolicy\x3dlogo-overlay","?impolicy\x3dutilities-thumbnail"),a.image=a.image.replace("?imwidth\x3d1200","?impolicy\x3dutilities-thumbnail"));a.className="u-separator-top";a.index=c;b&&(a.className="card--feature-switch grid-col grid-col-12 grid-col-sm-4 grid-col-md-2",
a.image&&(a.image=a.image.replace("?impolicy\x3dutilities-thumbnail","?imwidth\x3d210")))});this.render(a)}},{key:"render",value:function(a){var b='\n\t\t\t{{#items}}\n\t\t\t\t\x3carticle class\x3d"card u-clickable-area {{className}}" data-card data-track-wrapper\x3d"'.concat(this.params.trackingName,'"\x3e\n\t\t\t\t\t\x3cdiv class\x3d"card__content"\x3e\n\t\t\t\t\t\t\x3ch3 class\x3d"list-headline u-heading-7"\x3e\n\t\t\t\t\t\t\t\x3ca class\x3d"list-headline__link u-clickable-area__link" href\x3d"{{url}}" data-track-txt data-track-index\x3d"{{index}}"\x3e\n\t\t\t\t\t\t\t\t\x3cspan class\x3d"list-headline__text"\x3e\n\t\t\t\t\t\t\t\t\t{{title}}\n\t\t\t\t\t\t\t\t\x3c/span\x3e\n\t\t\t\t\t\t\t\x3c/a\x3e\n\t\t\t\t\t\t\x3c/h3\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t{{#image}}\n\t\t\t\t\t\t\x3cdiv class\x3d"card__thumbnail {{#isRow}}card__thumbnail--square{{/isRow}} u-order-first"\x3e\n\t\t\t\t\t\t\t\x3cfigure class\x3d"card__figure"\x3e\n\t\t\t\t\t\t\t\t\x3cimg src\x3d"{{image}}" class\x3d"card__image" alt\x3d"Image of {{title}}" /\x3e\n\t\t\t\t\t\t\t\x3c/figure\x3e\n\t\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t{{/image}}\n\t\t\t\t\x3c/article\x3e\n\t\t\t{{/items}}');
this.element.innerHTML=liftigniter("render",b,a);this.track()}},{key:"track",value:function(){liftigniter("track",{elements:this.element.querySelectorAll("[data-card]"),name:this.params.widget,source:"LI"});(new P).init()}}],I(a.prototype,b),a}();y.a.subscribe({topic:"tmg.liftigniter.ready",func:function(){J.default.isAuthor()||(R(document.querySelectorAll("[data-liftigniter]")).forEach(function(a){new va(a,m.default.tryParse(a.dataset.liftigniter))}),liftigniter("fetch"))},runIfAlreadyPublished:!0});
var wa=function(){function a(b){var c=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.container=b;this.structure=["continent","country","city","poi"];this.currentLevel=0;this.currentList=null;this.addOpenButton();this.addBackButton();this.container.querySelectorAll("[data-has-children]").forEach(function(a){return c.attachDomEvents(a)})}var b;return b=[{key:"toggleList",value:function(){this.container.parentNode.classList.toggle("destinations-selector--open")}},
{key:"addOpenButton",value:function(){this.openButton=this.container.parentNode.querySelector("[data-button-open]");this.openButton.addEventListener("click",this.toggleList.bind(this))}},{key:"addBackButton",value:function(){this.backBt=this.container.parentNode.querySelector("[data-button-back]");this.backBt.addEventListener("click",function(){this.setCurrentLevel(this.currentLevel-1)}.bind(this))}},{key:"attachDomEvents",value:function(a){this.container.parentNode.querySelector("[data-selector-overlay]").addEventListener("click",
this.toggleList.bind(this));a.addEventListener("click",function(a){var b=this.structure.indexOf(a.target.dataset.childrenType);this.setCurrentLevel(b);this.currentList=a=document.getElementById(a.target.dataset.showChildren);a.classList.add("destinations__list--active")}.bind(this),!1)}},{key:"setCurrentLevel",value:function(a){if(0<a?(this.backBt.classList.remove("destinations-selector__back-bt--label-close"),this.backBt.classList.add("destinations-selector__back-bt--label-back")):(this.backBt.classList.add("destinations-selector__back-bt--label-close"),
this.backBt.classList.remove("destinations-selector__back-bt--label-back")),0>a)this.toggleList();else{this.currentLevel=a;for(var b=a+1;b<this.structure.length;b++){var c=document.querySelectorAll("#destination-".concat(this.structure[b]," .destinations__list--active"));0<c.length&&Array.from(c).forEach(function(a){setTimeout(function(){a.classList.remove("destinations__list--active")},500)})}this.container.style.transform="translateX(-".concat(100*a,"%)")}}}],S(a.prototype,b),a}();y.a.subscribe({topic:"tmg.page.ready",
func:function(){var a=document.querySelector('[data-js\x3d"destinations-selector__container"]');a&&new wa(a)},runIfAlreadyPublished:!0});var xa=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.element=b}var b;return b=[{key:"bindEvents",value:function(){var a=this;this.element.addEventListener("click",function(){a.addBackToTopEvent()})}},{key:"addBackToTopEvent",value:function(){O.default.addPropertyValue("event",["backToTheTop"])}}],
T(a.prototype,b),a}();y.a.subscribe({topic:"tmg.page.ready",func:function(){var a=document.querySelector("[data-back-to-top-event]");a&&(new xa(a)).bindEvents()},runIfAlreadyPublished:!0});var ya=function(){function a(b){var c=this;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.element=b;this.accessToken=sessionStorage.getItem("access_token");this.idToken=sessionStorage.getItem("id_token");this.host=location.host;this.apiHost=function(){return"secure.telegraph.co.uk"===
c.host?"api.telegraph.co.uk":"api-preprod.telegraph.co.uk"};this.proxyServletUrl="https://"+this.host+"/bin/core/proxyservlet";this.commonHeaderContent={access_token:this.accessToken,id_token:this.idToken,acccept:"application/json","api-auth":!0,"api-strip-cookies":!0,"content-type":"application/json","api-method":"GET","api-host":this.apiHost(),"api-protocol":"HTTPS",origin:"https://"+this.host,referer:"https://"+this.host+"/secure/personal/",dataType:"JSON","x-requested-with":"XMLHttpRequest"};
this.apiPathUrl=function(){return"secure.telegraph.co.uk"===c.host?"/commerce/":"secure-staging-ams64.telegraph.co.uk"===c.host?"/commerce-api-qa/commerce/":"/commerce-api-uat/commerce/"};this.subIdUrl="";this.disableSpinner=function(){var a=document.querySelector(".lds-spinner");return a?a.classList.add("hidden"):null}}var b;return b=[{key:"init",value:function(){this.checkUser()}},{key:"checkUser",value:function(){var a={"api-path":this.apiPathUrl()+"accounts/me?subscription\x3dtrue\x26paymentMethod\x3dtrue"};
a=Object.assign({},this.commonHeaderContent,a);a={method:"POST",headers:new Headers(a)};var b=this;this.accessToken&&this.idToken?fetch(this.proxyServletUrl,a).then(function(a){return a.json()}).then(function(a){a.subscriptions?(a=a.subscriptions.filter(function(a){return"Active"===a.status})[0])&&a["@id"]?b.getSubscriptions(a["@id"]):(sessionStorage.setItem("upgradeErrorType","error-no-upgrade"),window.location.href="/secure/upgrade/error"):(sessionStorage.setItem("upgradeErrorType","error-no-upgrade"),
window.location.href="/secure/upgrade/error")}).catch(function(){sessionStorage.setItem("upgradeErrorType","error-technical");window.location.href="/secure/upgrade/error"}):window.location.href="/secure/login/?redirect\x3d../upgrade"}},{key:"getSubscriptions",value:function(a){this.subIdUrl=a.slice(a.indexOf(".co.uk/")+7,a.length);a=Object.assign({},this.commonHeaderContent,{"api-path":this.subIdUrl+"/upgrade-offers"});a={method:"POST",headers:new Headers(a)};var b=this;fetch(this.proxyServletUrl,
a).then(function(a){return a.json()}).then(function(a){b.prepareResponse(a)}).catch(function(){sessionStorage.setItem("upgradeErrorType","error-technical");window.location.href="/secure/upgrade/error"})}},{key:"prepareResponse",value:function(a){if(a){var b=a.priceChange;if(1===b.length&&0===Object.keys(b[0]).length&&b[0].constructor===Object||!b[0].alternatives)sessionStorage.setItem("upgradeErrorType","error-no-upgrade"),window.location.href="/secure/upgrade/error";else{b=document.querySelector("#entry-template").innerHTML;
b=Handlebars.compile(b)(a);var c=a["@id"],d=this,e=a.productFriendlyName,g=a.priceChange[0].number;document.querySelector(".subscription-list").innerHTML=b;d.disableSpinner();document.querySelector(".site-header-subs__subscription").innerHTML="You currently have ".concat("Annually"===a.frequencyDescription?"an annual":"Monthly"===a.frequencyDescription?"a monthly":"a periodic"," subscription to ").concat(e);document.querySelectorAll(".call-to-action").forEach(function(a){a.addEventListener("click",
function(b){b.preventDefault();var e=b.target.dataset.id;b=b.target.dataset.frequency;var f=a.querySelector("button"),h=a.closest(".subscription__options").dataset.productName;f.innerHTML="Loading...";f.setAttribute("disabled",!0);f.classList.add("call-to-action__link--disabled");d.upgradeSubscription(e,c,b,h,g)},!1)})}}else sessionStorage.setItem("upgradeErrorType","error-no-upgrade"),window.location.href="/secure/upgrade/error"}},{key:"upgradeSubscription",value:function(a,b,c,d,e){b=Object.assign({},
this.commonHeaderContent,{"api-path":this.subIdUrl+"/upgrade","api-method":"POST"});b=new Headers(b);var f=(new Date).toISOString().slice(0,16)+"Z";a={body:JSON.stringify(e?{offerCode:a,priceChangeNumber:e,effectiveDate:f}:{offerCode:a}),method:"POST",headers:b};sessionStorage.setItem("productDetails",JSON.stringify({productName:d,frequency:c}));fetch(this.proxyServletUrl,a).then(function(a){308<a.status?(sessionStorage.setItem("upgradeErrorType","error-technical"),window.location.href="/secure/upgrade/error"):
(sessionStorage.removeItem("upgradeErrorType"),window.location.href="/secure/upgrade/"+("Premium"===d?"confirmation-premium":"confirmation-premium-digital"))}).catch(function(){sessionStorage.setItem("upgradeErrorType","error-technical");window.location.href="/secure/upgrade/error"})}}],A(a.prototype,b),a}();y.a.subscribe({topic:"tmg.page.ready",func:function(){var a=document.querySelectorAll('[data-js\x3d"SubscriptionUpgrade"]');0<a.length&&(new ya(a)).init()},runIfAlreadyPublished:!0});var Ea={subscriptionUpgrade:ya},
za=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");!0;this.element=b;this.accessToken=sessionStorage.getItem("access_token");this.idToken=sessionStorage.getItem("id_token")}var b;return b=[{key:"init",value:function(){sessionStorage.upgradeErrorType?this.errorPage():this.confirmationPage()}},{key:"confirmationPage",value:function(){var a=JSON.parse(sessionStorage.productDetails);document.querySelector(".site-header-subs__subscription").innerHTML=
"We have updated your subscription to ".concat(a.productName," [").concat(a.frequency,"]")}},{key:"errorPage",value:function(){var a=document.querySelector(".subscription--error"),b=a.querySelector(".subscription__title"),c=a.querySelector(".subscription__error-msg");a.removeAttribute("hidden");a.removeAttribute("aria-hidden");"error-technical"===sessionStorage.upgradeErrorType?(b.innerHTML="We're sorry, there seems to have been a technical error processing your upgrade.",c.innerHTML='To complete the transaction please contact our contact center \nUK calls: \x3ca href\x3d"tel:08003163500"\x3e0800 316 3500\x3c/a\x3e \nInternational calls: \x3ca href\x3d"tel:+441622335007"\x3e+44 (0) 1622 33 50 07\x3c/a\x3e'):
(b.innerHTML="We're sorry, we don't have an upgrade available for you at the moment.",c.innerHTML='To find more about your subscription or talk to one of our team members please call our contact center on \x3ca href\x3d"tel:08003163500"\x3e0800 316 3500\x3c/a\x3e and quote your subscriber number.');setTimeout(function(){sessionStorage.removeItem("upgradeErrorType")},1E3)}}],Z(a.prototype,b),a}();y.a.subscribe({topic:"tmg.page.ready",func:function(){var a=document.querySelectorAll('[data-js\x3d"subscription-confirmation"]');
0<a.length&&(new za(a)).init()},runIfAlreadyPublished:!0});l.default={dataLayer:O.default,environment:ba.default,tracking:P,injectScript:qa.default,socialTracking:U,user:X.default,store:g.a,accordion:q,cookies:E.a,redirect:F.a,json:m.default,throttle:x.a,url:V.default,calendarAvail:ka,contentNav:la,counter:ca,carousel:ma,overlayContinuation:Ba,navigation:aa,page:J.default,productSort:void 0,modalDropdown:W,subscriptionUpgrade:Ea,subscriptionConfirmation:{subscriptionConfirmation:za},viewport:ta,dragScroll:N.default,
guid:D.default,modal:b.default,captionTrigger:Y,liftIgniter:ua,moreStories:va,destinationsSelector:wa,siteFooter:xa}}],[[27,1,0]]]);